<mat-drawer-container class="example-container">
  <mat-drawer
    #drawer
    [mode]="isHandset() ? 'over' : 'side'"
    class="drawer"
    [class.drawer-expanded]="isExpanded()"
    [class.drawer-collapsed]="!isExpanded()"
    opened
  >
    <div class="logo-container">
      <img
        src="assets/images/logo_light.svg"
        alt="Logo"
        height="52"
        *ngIf="isExpanded()"
      />
      <img
        src="assets/images/logo_light.svg"
        alt="Logo"
        height="32"
        *ngIf="!isExpanded()"
      />
    </div>
    <mat-nav-list class="nav-list">
      @for (item of navItems(); track item.route) {
      <mat-list-item
      class="nav-item"
      [routerLink]="item.route"
      routerLinkActive="active"
      [ngClass]="{'padding-fix': !isExpanded()}"
      [matTooltip]="!isExpanded() ? item.label : ''"
      matTooltipPosition="right"
      matTooltipShowDelay="500"
      >
        <mat-icon class="material-symbols-outlined" matListItemIcon>
          {{ item.icon }}
        </mat-icon>
        @if (isExpanded()) {
        <span class="nav-label" matListItemTitle>{{ item.label }}</span>
        }
      </mat-list-item>
      }
    </mat-nav-list>
    <mat-nav-list>
      <div class="spacer"></div>
      <mat-list-item [ngClass]="{'padding-fix': !isExpanded()}" class="nav-item" (click)="authService.logout()">
        <mat-icon class="material-symbols-outlined" matListItemIcon
          >logout</mat-icon
        >
        @if (isExpanded()) {
          <span class="nav-label" matListItemTitle>Logout</span>
        }
      </mat-list-item>
    </mat-nav-list>
  </mat-drawer>
  <mat-drawer-content class="drawer-content">
    <mat-toolbar class="header">
      @if (!isHandset()) {
      <button
        mat-icon-button
        (click)="drawer.toggle()"
        matTooltip="Toggle menu"
      >
        <mat-icon class="material-symbols-outlined">{{
          drawer.opened ? "menu_open" : "menu"
        }}</mat-icon>
      </button>
      }
      <span class="header-title">{{ appTitle }}</span>
      <span class="spacer"></span>
      <button class="header-actions" mat-icon-button matTooltip="Notifications">
        <mat-icon class="material-symbols-outlined">notifications</mat-icon>
      </button>
      <button class="header-actions" mat-icon-button matTooltip="Messages">
        <mat-icon class="material-symbols-outlined">chat</mat-icon>
      </button>
      <button class="header-actions" mat-icon-button matTooltip="Profile">
        <mat-icon class="material-symbols-outlined">person</mat-icon>
      </button>
    </mat-toolbar>

    <div class="main-content">
      <router-outlet></router-outlet>
    </div>

    @if (isHandset()) {
    <nav class="bottom-nav">
      @for (item of navItems().slice(0,5); track item.route) {
      <a
        class="bottom-nav-item"
        [routerLink]="item.route"
        routerLinkActive="active"
      >
        <mat-icon class="material-symbols-outlined">{{ item.icon }}</mat-icon>
        <span class="bottom-nav-label">{{ item.label }}</span>
      </a>
      }
    </nav>
    }
  </mat-drawer-content>
</mat-drawer-container>
@if (!isHandset() && showSidenavToggle() && drawer.opened) {
<button
  mat-icon-button
  [ngClass]="isExpanded() ? 'toggle-sidenav expanded' : 'toggle-sidenav'"
  (click)="toggleSidenavView()"
>
  <mat-icon class="material-symbols-outlined">
    {{
      isExpanded()
        ? "keyboard_double_arrow_left"
        : "keyboard_double_arrow_right"
    }}
  </mat-icon>
</button>
}
