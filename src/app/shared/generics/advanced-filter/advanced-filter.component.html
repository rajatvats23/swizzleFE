<!-- src/app/shared/components/advanced-filter/advanced-filter.component.html -->
<div class="filter-drawer" [class.open]="isOpen">
  <div class="drawer-header">
    <h2>Advanced Filters</h2>
    <button mat-icon-button (click)="onClose()">
      <mat-icon>close</mat-icon>
    </button>
  </div>
  
  <div class="drawer-content">
    <form [formGroup]="filterForm">
      <!-- Text input field for name -->
      @if (config.name) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Name</mat-label>
          <input matInput formControlName="name" placeholder="Enter name">
        </mat-form-field>
      }

      <!-- Categories -->
      @if (config.categories && config.categories.length > 0) {
        <div class="form-field-container">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Select Categories</mat-label>
            <mat-select (selectionChange)="addCategory($event.value)" [value]="">
              @for (option of categoryOptions; track option.value) {
                <mat-option [value]="option.value">{{ option.label }}</mat-option>
              }
            </mat-select>
          </mat-form-field>
        </div>

        <div class="chips-container">
          @for (category of selectedCategories; track category) {
            <mat-chip (removed)="removeCategory(category)">
              {{ getCategoryLabel(category) }}
              <mat-icon matChipRemove>cancel</mat-icon>
            </mat-chip>
          }
          @if (selectedCategories.length === 0) {
            <div class="no-chips-message">No categories selected</div>
          }
        </div>
      }
      
      <!-- Status dropdown -->
      @if (config.status && config.status.length > 0) {
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Status</mat-label>
          <mat-select formControlName="status">
            <mat-option value="">All</mat-option>
            @for (option of statusOptions; track option.value) {
              <mat-option [value]="option.value">{{ option.label }}</mat-option>
            }
          </mat-select>
        </mat-form-field>
      }
      
      <!-- Priority radio buttons -->
      @if (config.priority && config.priority.length > 0) {
        <div class="form-field-container">
          <label class="field-label">Priority</label>
          <mat-radio-group formControlName="priority" class="radio-group">
            <mat-radio-button value="">All</mat-radio-button>
            @for (option of priorityOptions; track option.value) {
              <mat-radio-button [value]="option.value">{{ option.label }}</mat-radio-button>
            }
          </mat-radio-group>
        </div>
      }
      
      <!-- Date range -->
      @if (config.dateRange) {
        <div class="form-field-container">
          <label class="field-label">Date Range</label>
          <div class="range-fields">
            <mat-form-field appearance="outline">
              <mat-label>Start Date</mat-label>
              <input matInput [matDatepicker]="startPicker" formControlName="startDate">
              <mat-datepicker-toggle matSuffix [for]="startPicker"></mat-datepicker-toggle>
              <mat-datepicker #startPicker></mat-datepicker>
            </mat-form-field>
            
            <mat-form-field appearance="outline">
              <mat-label>End Date</mat-label>
              <input matInput [matDatepicker]="endPicker" formControlName="endDate">
              <mat-datepicker-toggle matSuffix [for]="endPicker"></mat-datepicker-toggle>
              <mat-datepicker #endPicker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      }
      
      <!-- Amount range fields -->
      @if (config.amountRange) {
        <div class="form-field-container">
          <label class="field-label">Amount Range</label>
          <div class="range-fields">
            <mat-form-field appearance="outline">
              <mat-label>Min Amount</mat-label>
              <input matInput formControlName="minAmount" type="number" placeholder="Min">
            </mat-form-field>
            
            <mat-form-field appearance="outline">
              <mat-label>Max Amount</mat-label>
              <input matInput formControlName="maxAmount" type="number" placeholder="Max">
            </mat-form-field>
          </div>
        </div>
      }
    </form>
  </div>
  
  <div class="drawer-footer">
    <button mat-stroked-button (click)="onReset()">Reset</button>
    <button mat-flat-button color="primary" (click)="onApply()">Apply Filters</button>
  </div>
</div>

<div class="drawer-backdrop" [class.visible]="isOpen" (click)="onClose()"></div>