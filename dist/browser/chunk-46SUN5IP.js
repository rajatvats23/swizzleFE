import{a as z}from"./chunk-DXQHYOCY.js";import{a as F,c as S,h as E}from"./chunk-QTDDUBQI.js";import{a as T,b as A}from"./chunk-SWI6467K.js";import{a as P,c as R,d as V}from"./chunk-2D2I2PDG.js";import{b as O,c as G,i as L}from"./chunk-PTRNPYW6.js";import{a as U}from"./chunk-URY737FD.js";import{b as I,d as y,g as x,h as _,m as k,p as B,s as N,w as D,y as w}from"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import"./chunk-LK7ZGARP.js";import{q as j,u as q}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as g,c as v,d as C}from"./chunk-VSTSZJ55.js";import{Cc as h,Fb as M,Kc as b,Rb as o,Ta as m,Tb as p,cb as c,hb as f,ja as a,ob as u,xb as n,yb as t,zb as l}from"./chunk-KAD4X6AH.js";function J(s,i){s&1&&(n(0,"mat-error"),o(1,"Name is required"),t())}var H=class s{fb=a(D);route=a(g);router=a(v);menuService=a(z);snackBar=a(U);menuForm;isEditMode=!1;isSubmitting=!1;menuId="";ngOnInit(){this.initForm(),this.menuId=this.route.snapshot.params.id,this.isEditMode=!!this.menuId,this.isEditMode&&this.loadMenuData()}initForm(){this.menuForm=this.fb.group({name:["",y.required],description:[""]})}loadMenuData(){this.menuService.getMenuById(this.menuId).subscribe({next:i=>{let e=i.data.menu;this.menuForm.patchValue({name:e.name,description:e.description||""})},error:i=>{this.snackBar.open(i.error?.message||"Failed to load menu","Close",{duration:5e3}),this.router.navigate(["/dashboard/menus"])}})}onSubmit(){if(this.menuForm.invalid)return;this.isSubmitting=!0;let i=this.menuForm.value;this.isEditMode?this.menuService.updateMenu(this.menuId,i).subscribe({next:()=>{this.snackBar.open("Menu updated successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/menus"])},error:e=>{this.isSubmitting=!1,this.snackBar.open(e.error?.message||"Failed to update menu","Close",{duration:5e3})}}):this.menuService.createMenu(i).subscribe({next:()=>{this.snackBar.open("Menu created successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/menus"])},error:e=>{this.isSubmitting=!1,this.snackBar.open(e.error?.message||"Failed to create menu","Close",{duration:5e3})}})}static \u0275fac=function(e){return new(e||s)};static \u0275cmp=c({type:s,selectors:[["app-menu-form"]],decls:25,vars:5,consts:[[1,"container"],[1,"header-actions"],[1,"top-label"],["mat-button","","color","primary","routerLink","/dashboard/menus"],[1,"material-symbols-outlined"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter menu name"],[4,"ngIf"],["matInput","","formControlName","description","placeholder","Enter menu description","rows","4"],[1,"form-actions"],["mat-button","","type","button","routerLink","/dashboard/menus"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,r){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),o(3),t(),n(4,"button",3)(5,"mat-icon",4),o(6,"arrow_back"),t(),o(7," Back to List "),t()(),n(8,"mat-card")(9,"mat-card-content")(10,"form",5),M("ngSubmit",function(){return r.onSubmit()}),n(11,"mat-form-field",6)(12,"mat-label"),o(13,"Menu Name"),t(),l(14,"input",7),f(15,J,2,0,"mat-error",8),t(),n(16,"mat-form-field",6)(17,"mat-label"),o(18,"Description"),t(),l(19,"textarea",9),t(),n(20,"div",10)(21,"button",11),o(22,"Cancel"),t(),n(23,"button",12),o(24),t()()()()()()),e&2){let d;m(3),p("",r.isEditMode?"Edit":"Create"," Menu"),m(7),u("formGroup",r.menuForm),m(5),u("ngIf",(d=r.menuForm.get("name"))==null?null:d.hasError("required")),m(8),u("disabled",r.menuForm.invalid||r.isSubmitting),m(),p(" ",r.isSubmitting?"Saving...":r.isEditMode?"Update":"Create"," ")}},dependencies:[b,h,w,k,I,x,_,B,N,C,P,L,O,G,V,R,q,j,E,F,S,A,T],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:20px}"]})};export{H as MenuFormComponent};
