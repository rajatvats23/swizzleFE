import{a as le,b as me,c as pe,d as ge}from"./chunk-7X52NA7E.js";import"./chunk-F5X5MWHG.js";import{a as lt,b as L}from"./chunk-3JGKDRZ2.js";import{a as ue,b as fe,c as U,e as _e,f as xe,g as be,h as ve}from"./chunk-IEN5B5W2.js";import"./chunk-XOSWA2SM.js";import{a as Ce,b as Oe,c as ye,d as Me}from"./chunk-EFQTXQPC.js";import{b as he,g as Y}from"./chunk-Q73V3MFL.js";import{a as we}from"./chunk-VR5R2KS7.js";import{a as ce,b as R}from"./chunk-T763PW3Z.js";import{d as mt,h as pt,i as gt}from"./chunk-KUJCRXF6.js";import"./chunk-MPZJ55NE.js";import"./chunk-4NNSIX2F.js";import{c as V,d as B,f as O,g as K}from"./chunk-CS2UOYS6.js";import{h as $}from"./chunk-X4H6S6WA.js";import{a as E,b as I}from"./chunk-FNZWV5VH.js";import{a as re,d as oe}from"./chunk-SG7MWKE6.js";import{b as ne,i as ie}from"./chunk-TFWZGPIA.js";import{a as j,b as de}from"./chunk-MXW2SQ2E.js";import{b as te,g as ot,l as at,y as st,z as ee}from"./chunk-CG6HKZKU.js";import"./chunk-YE4XPGXQ.js";import{a as Ht}from"./chunk-4MJ6IACY.js";import{n as dt,q as ct,r as ae,s as se,u as P}from"./chunk-QRFS6CQK.js";import{C as Qt,F as xt,l as Wt,m as Gt,r as Xt,v as Zt,w as Jt}from"./chunk-24M76UXH.js";import{d as qt}from"./chunk-A2KXSCJD.js";import{Aa as Et,Ab as A,Ac as Rt,Ba as It,Bb as F,Bc as w,Cc as S,D as Mt,Db as b,Fa as Dt,Fb as _,Fc as Lt,Gb as l,H as wt,Jc as Ut,Kc as k,La as Tt,Oc as Yt,Qb as T,Rb as a,Sb as x,Ta as s,Tb as v,Ub as Ft,Vb as Vt,Wa as Bt,Wb as X,Xa as _t,Xb as Z,Yb as J,Z as St,aa as kt,ac as $t,cb as y,cc as Q,da as z,db as Kt,dc as tt,ea as Pt,eb as Nt,g as nt,gc as et,hb as p,ja as f,m as it,mc as rt,ob as c,pb as zt,q as yt,qa as g,qb as At,ra as u,uc as jt,xb as i,yb as r,zb as M}from"./chunk-Q5RHU532.js";var Se="mat-badge-content",Ee=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275cmp=y({type:n,selectors:[["ng-component"]],decls:0,vars:0,template:function(o,d){},styles:[`.mat-badge{position:relative}.mat-badge.mat-badge{overflow:visible}.mat-badge-content{position:absolute;text-align:center;display:inline-block;transition:transform 200ms ease-in-out;transform:scale(0.6);overflow:hidden;white-space:nowrap;text-overflow:ellipsis;box-sizing:border-box;pointer-events:none;background-color:var(--mat-badge-background-color, var(--mat-sys-error));color:var(--mat-badge-text-color, var(--mat-sys-on-error));font-family:var(--mat-badge-text-font, var(--mat-sys-label-small-font));font-weight:var(--mat-badge-text-weight, var(--mat-sys-label-small-weight));border-radius:var(--mat-badge-container-shape, var(--mat-sys-corner-full))}.mat-badge-above .mat-badge-content{bottom:100%}.mat-badge-below .mat-badge-content{top:100%}.mat-badge-before .mat-badge-content{right:100%}[dir=rtl] .mat-badge-before .mat-badge-content{right:auto;left:100%}.mat-badge-after .mat-badge-content{left:100%}[dir=rtl] .mat-badge-after .mat-badge-content{left:auto;right:100%}@media(forced-colors: active){.mat-badge-content{outline:solid 1px;border-radius:0}}.mat-badge-disabled .mat-badge-content{background-color:var(--mat-badge-disabled-state-background-color, color-mix(in srgb, var(--mat-sys-error) 38%, transparent));color:var(--mat-badge-disabled-state-text-color, var(--mat-sys-on-error))}.mat-badge-hidden .mat-badge-content{display:none}.ng-animate-disabled .mat-badge-content,.mat-badge-content._mat-animation-noopable{transition:none}.mat-badge-content.mat-badge-active{transform:none}.mat-badge-small .mat-badge-content{width:var(--mat-badge-legacy-small-size-container-size, unset);height:var(--mat-badge-legacy-small-size-container-size, unset);min-width:var(--mat-badge-small-size-container-size, 6px);min-height:var(--mat-badge-small-size-container-size, 6px);line-height:var(--mat-badge-small-size-line-height, 6px);padding:var(--mat-badge-small-size-container-padding, 0);font-size:var(--mat-badge-small-size-text-size, 0);margin:var(--mat-badge-small-size-container-offset, -6px 0)}.mat-badge-small.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-small-size-container-overlap-offset, -6px)}.mat-badge-medium .mat-badge-content{width:var(--mat-badge-legacy-container-size, unset);height:var(--mat-badge-legacy-container-size, unset);min-width:var(--mat-badge-container-size, 16px);min-height:var(--mat-badge-container-size, 16px);line-height:var(--mat-badge-line-height, 16px);padding:var(--mat-badge-container-padding, 0 4px);font-size:var(--mat-badge-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-container-offset, -12px 0)}.mat-badge-medium.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-container-overlap-offset, -12px)}.mat-badge-large .mat-badge-content{width:var(--mat-badge-legacy-large-size-container-size, unset);height:var(--mat-badge-legacy-large-size-container-size, unset);min-width:var(--mat-badge-large-size-container-size, 16px);min-height:var(--mat-badge-large-size-container-size, 16px);line-height:var(--mat-badge-large-size-line-height, 16px);padding:var(--mat-badge-large-size-container-padding, 0 4px);font-size:var(--mat-badge-large-size-text-size, var(--mat-sys-label-small-size));margin:var(--mat-badge-large-size-container-offset, -12px 0)}.mat-badge-large.mat-badge-overlap .mat-badge-content{margin:var(--mat-badge-large-size-container-overlap-offset, -12px)}
`],encapsulation:2,changeDetection:0})}return n})(),ke=(()=>{class n{_ngZone=f(It);_elementRef=f(Dt);_ariaDescriber=f(Qt);_renderer=f(Bt);_animationMode=f(Tt,{optional:!0});_idGenerator=f(Jt);get color(){return this._color}set color(t){this._setColor(t),this._color=t}_color="primary";overlap=!0;disabled;position="above after";get content(){return this._content}set content(t){this._updateRenderedContent(t)}_content;get description(){return this._description}set description(t){this._updateDescription(t)}_description;size="medium";hidden;_badgeElement;_inlineBadgeDescription;_isInitialized=!1;_interactivityChecker=f(Xt);_document=f(jt);constructor(){let t=f(Wt);t.load(Ee),t.load(Gt)}isAbove(){return this.position.indexOf("below")===-1}isAfter(){return this.position.indexOf("before")===-1}getBadgeElement(){return this._badgeElement}ngOnInit(){this._clearExistingBadges(),this.content&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement(),this._updateRenderedContent(this.content)),this._isInitialized=!0}ngOnDestroy(){this._renderer.destroyNode&&(this._renderer.destroyNode(this._badgeElement),this._inlineBadgeDescription?.remove()),this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description)}_isHostInteractive(){return this._interactivityChecker.isFocusable(this._elementRef.nativeElement,{ignoreVisibility:!0})}_createBadgeElement(){let t=this._renderer.createElement("span"),o="mat-badge-active";return t.setAttribute("id",this._idGenerator.getId("mat-badge-content-")),t.setAttribute("aria-hidden","true"),t.classList.add(Se),this._animationMode==="NoopAnimations"&&t.classList.add("_mat-animation-noopable"),this._elementRef.nativeElement.appendChild(t),typeof requestAnimationFrame=="function"&&this._animationMode!=="NoopAnimations"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{t.classList.add(o)})}):t.classList.add(o),t}_updateRenderedContent(t){let o=`${t??""}`.trim();this._isInitialized&&o&&!this._badgeElement&&(this._badgeElement=this._createBadgeElement()),this._badgeElement&&(this._badgeElement.textContent=o),this._content=o}_updateDescription(t){this._ariaDescriber.removeDescription(this._elementRef.nativeElement,this.description),(!t||this._isHostInteractive())&&this._removeInlineDescription(),this._description=t,this._isHostInteractive()?this._ariaDescriber.describe(this._elementRef.nativeElement,t):this._updateInlineDescription()}_updateInlineDescription(){this._inlineBadgeDescription||(this._inlineBadgeDescription=this._document.createElement("span"),this._inlineBadgeDescription.classList.add("cdk-visually-hidden")),this._inlineBadgeDescription.textContent=this.description,this._badgeElement?.appendChild(this._inlineBadgeDescription)}_removeInlineDescription(){this._inlineBadgeDescription?.remove(),this._inlineBadgeDescription=void 0}_setColor(t){let o=this._elementRef.nativeElement.classList;o.remove(`mat-badge-${this._color}`),t&&o.add(`mat-badge-${t}`)}_clearExistingBadges(){let t=this._elementRef.nativeElement.querySelectorAll(`:scope > .${Se}`);for(let o of Array.from(t))o!==this._badgeElement&&o.remove()}static \u0275fac=function(o){return new(o||n)};static \u0275dir=Nt({type:n,selectors:[["","matBadge",""]],hostAttrs:[1,"mat-badge"],hostVars:20,hostBindings:function(o,d){o&2&&At("mat-badge-overlap",d.overlap)("mat-badge-above",d.isAbove())("mat-badge-below",!d.isAbove())("mat-badge-before",!d.isAfter())("mat-badge-after",d.isAfter())("mat-badge-small",d.size==="small")("mat-badge-medium",d.size==="medium")("mat-badge-large",d.size==="large")("mat-badge-hidden",d.hidden||!d.content)("mat-badge-disabled",d.disabled)},inputs:{color:[0,"matBadgeColor","color"],overlap:[2,"matBadgeOverlap","overlap",rt],disabled:[2,"matBadgeDisabled","disabled",rt],position:[0,"matBadgePosition","position"],content:[0,"matBadge","content"],description:[0,"matBadgeDescription","description"],size:[0,"matBadgeSize","size"],hidden:[2,"matBadgeHidden","hidden",rt]}})}return n})(),q=(()=>{class n{static \u0275fac=function(o){return new(o||n)};static \u0275mod=Kt({type:n});static \u0275inj=Pt({imports:[Zt,xt,xt]})}return n})();var D=class n{http=f(Yt);baseUrl=`${Ht.apiUrl}/staff/orders`;activeOrdersSubject=new it([]);activeOrders$=this.activeOrdersSubject.asObservable();pollingSubscription;pollingInterval=3e4;startPolling(){this.pollingSubscription&&this.pollingSubscription.unsubscribe(),this.pollingSubscription=Mt(this.pollingInterval).pipe(St(()=>this.fetchActiveOrders()),wt(e=>(console.error("Error polling active orders:",e),yt(null)))).subscribe(),this.fetchActiveOrders().subscribe()}stopPolling(){this.pollingSubscription&&(this.pollingSubscription.unsubscribe(),this.pollingSubscription=null)}fetchActiveOrders(){return this.http.get(`${this.baseUrl}/active`).pipe(kt(e=>{e&&e.data&&e.data.orders&&this.activeOrdersSubject.next(e.data.orders)}))}getOrderById(e){return this.http.get(`${this.baseUrl}/${e}`)}updateOrderStatus(e,t){return this.http.put(`${this.baseUrl}/${e}/status`,t)}updateOrderItemStatus(e,t,o){return this.http.put(`${this.baseUrl}/${e}/items/${t}/status`,o)}refreshOrders(){this.fetchActiveOrders().subscribe()}getTimeSinceOrder(e){let t=new Date(e),d=new Date().getTime()-t.getTime(),m=Math.floor(d/6e4);if(m<1)return"Just now";if(m===1)return"1 minute ago";if(m<60)return`${m} minutes ago`;{let h=Math.floor(m/60);return h===1?"1 hour ago":`${h} hours ago`}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var H=class n{printOrderTicket(e){let t=window.open("","_blank");if(!t){alert("Please allow popups for this website");return}let o=new Date(e.createdAt),d=o.toLocaleDateString(),m=o.toLocaleTimeString(),h=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Order #${e._id.slice(-6)}</title>
        <style>
          body {
            font-family: 'Courier New', monospace;
            margin: 0;
            padding: 0.5cm;
            width: 8cm;
          }
          .ticket-header {
            text-align: center;
            border-bottom: 1px dashed #000;
            padding-bottom: 8px;
            margin-bottom: 8px;
          }
          .restaurant-name {
            font-size: 18px;
            font-weight: bold;
          }
          .order-info {
            display: flex;
            justify-content: space-between;
            margin: 8px 0;
          }
          .order-details {
            margin: 16px 0;
          }
          .item {
            margin-bottom: 12px;
          }
          .item-header {
            display: flex;
            justify-content: space-between;
            font-weight: bold;
          }
          .addon {
            padding-left: 16px;
            font-size: 14px;
          }
          .special-instructions {
            font-style: italic;
            border: 1px solid #000;
            padding: 4px;
            margin-top: 4px;
          }
          .summary {
            margin-top: 16px;
            border-top: 1px dashed #000;
            padding-top: 8px;
            text-align: center;
          }
          .footer {
            margin-top: 24px;
            text-align: center;
            font-size: 12px;
          }
          
          @media print {
            body {
              width: 8cm;
            }
          }
        </style>
      </head>
      <body>
        <div class="ticket-header">
          <div class="restaurant-name">KITCHEN ORDER</div>
          <div>Table: ${e.table.tableNumber}</div>
        </div>
        
        <div class="order-info">
          <div>Order #: ${e._id.slice(-6)}</div>
          <div>Status: ${e.status.toUpperCase()}</div>
        </div>
        
        <div class="order-info">
          <div>Date: ${d}</div>
          <div>Time: ${m}</div>
        </div>
        
        <div class="order-details">
          ${e.items.map(C=>`
            <div class="item">
              <div class="item-header">
                <div>${C.quantity}x ${C.product.name}</div>
                <div>${(C.price*C.quantity).toFixed(2)}</div>
              </div>
              ${C.selectedAddons&&C.selectedAddons.length>0?C.selectedAddons.map(Ot=>`
                  <div class="addon">+ ${Ot.addon.name}: ${Ot.subAddon.name}</div>
                `).join(""):""}
              ${C.specialInstructions?`<div class="special-instructions">NOTE: ${C.specialInstructions}</div>`:""}
            </div>
          `).join("")}
        </div>
        
        ${e.specialInstructions?`
          <div class="special-instructions">
            <strong>ORDER NOTES:</strong> ${e.specialInstructions}
          </div>
        `:""}
        
        <div class="summary">
          <div><strong>TOTAL: ${e.totalAmount.toFixed(2)}</strong></div>
        </div>
        
        <div class="footer">
          *** KITCHEN COPY ***
        </div>
      </body>
      </html>
    `;t.document.open(),t.document.write(h),t.document.close(),t.onload=()=>{t.print(),t.onafterprint=()=>{t.close()}}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};function Te(n,e){n&1&&(i(0,"mat-icon",5),a(1,"check_circle"),r())}function Be(n,e){n&1&&(i(0,"mat-icon",5),a(1,"restaurant"),r())}function Ke(n,e){n&1&&(i(0,"mat-icon",5),a(1,"schedule"),r())}function Ne(n,e){n&1&&(i(0,"mat-icon",5),a(1,"done_all"),r())}function ze(n,e){if(n&1){let t=b();i(0,"button",36),_("click",function(){g(t);let d=l().$implicit,m=l();return u(m.updateItemStatus(d._id,"preparing"))}),i(1,"mat-icon",5),a(2,"restaurant"),r(),i(3,"span"),a(4,"Start Preparing"),r()()}}function Ae(n,e){if(n&1){let t=b();i(0,"button",36),_("click",function(){g(t);let d=l().$implicit,m=l();return u(m.updateItemStatus(d._id,"ready"))}),i(1,"mat-icon",5),a(2,"check_circle"),r(),i(3,"span"),a(4,"Mark as Ready"),r()()}}function Fe(n,e){if(n&1){let t=b();i(0,"button",36),_("click",function(){g(t);let d=l().$implicit,m=l();return u(m.updateItemStatus(d._id,"delivered"))}),i(1,"mat-icon",5),a(2,"room_service"),r(),i(3,"span"),a(4,"Mark as Delivered"),r()()}}function Ve(n,e){if(n&1&&(i(0,"div",42)(1,"span",43),a(2),r(),i(3,"span",44),a(4),r()()),n&2){let t=e.$implicit;s(2),v("",t.addon.name,":"),s(2),x(t.subAddon.name)}}function $e(n,e){if(n&1&&(i(0,"div",40),p(1,Ve,5,2,"div",41),r()),n&2){let t=l(2).$implicit;s(),c("ngForOf",t.selectedAddons)}}function je(n,e){if(n&1&&(i(0,"div",45)(1,"mat-icon",46),a(2,"priority_high"),r(),i(3,"span",47),a(4),r()()),n&2){let t=l(2).$implicit;s(4),x(t.specialInstructions)}}function Re(n,e){if(n&1&&(i(0,"div",37),p(1,$e,2,1,"div",38)(2,je,5,1,"div",39),r()),n&2){let t=l().$implicit;s(),c("ngIf",t.selectedAddons==null?null:t.selectedAddons.length),s(),c("ngIf",t.specialInstructions)}}function Le(n,e){if(n&1&&(i(0,"div",25)(1,"div",26)(2,"div",27)(3,"div",28),a(4),r(),i(5,"div",29),a(6),r()(),i(7,"div",30)(8,"div",31),p(9,Te,2,0,"mat-icon",32)(10,Be,2,0,"mat-icon",32)(11,Ke,2,0,"mat-icon",32)(12,Ne,2,0,"mat-icon",32),r(),i(13,"button",33)(14,"mat-icon",5),a(15,"more_vert"),r()(),i(16,"mat-menu",null,0),p(18,ze,5,0,"button",34)(19,Ae,5,0,"button",34)(20,Fe,5,0,"button",34),r()()(),p(21,Re,3,2,"div",35),r()),n&2){let t=e.$implicit,o=T(17),d=l();c("ngClass",d.getItemStatusClass(t.status)),s(4),v("",t.quantity,"\xD7"),s(2),x(d.getItemName(t)),s(2),c("ngClass","status-indicator-"+t.status),s(),c("ngIf",t.status==="ready"),s(),c("ngIf",t.status==="preparing"),s(),c("ngIf",t.status==="ordered"),s(),c("ngIf",t.status==="delivered"),s(),c("matMenuTriggerFor",o),s(5),c("ngIf",t.status==="ordered"),s(),c("ngIf",t.status==="preparing"),s(),c("ngIf",t.status==="ready"),s(),c("ngIf",(t.selectedAddons==null?null:t.selectedAddons.length)||t.specialInstructions)}}function Ue(n,e){if(n&1&&(i(0,"div",48)(1,"div",49)(2,"mat-icon",5),a(3,"info"),r(),i(4,"span"),a(5,"Special Instructions"),r()(),i(6,"div",50),a(7),r()()),n&2){let t=l();s(7),x(t.order.specialInstructions)}}function Ye(n,e){if(n&1){let t=b();i(0,"button",51),_("click",function(){g(t);let d=l();return u(d.updateOrderStatus("preparing"))}),i(1,"mat-icon",5),a(2,"restaurant"),r(),i(3,"span"),a(4,"Start Preparing"),r()()}}function qe(n,e){if(n&1){let t=b();i(0,"button",52),_("click",function(){g(t);let d=l();return u(d.updateOrderStatus("ready"))}),i(1,"mat-icon",5),a(2,"check_circle"),r(),i(3,"span"),a(4,"Mark Ready"),r()()}}function He(n,e){if(n&1){let t=b();i(0,"button",53),_("click",function(){g(t);let d=l();return u(d.updateOrderStatus("delivered"))}),i(1,"mat-icon",5),a(2,"room_service"),r(),i(3,"span"),a(4,"Deliver"),r()()}}function We(n,e){if(n&1){let t=b();i(0,"button",54),_("click",function(){g(t);let d=l();return u(d.updateOrderStatus("completed"))}),i(1,"mat-icon",5),a(2,"done_all"),r(),i(3,"span"),a(4,"Complete"),r()()}}var ut=class n{order;statusChanged=new Et;kdsService=f(D);snackBar=f(j);printService=f(H);getOrderNumber(){return this.order._id.slice(-6).toUpperCase()}getStatusClass(){return`status-${this.order.status}`}getItemStatusClass(e){return`item-${e}`}printOrderTicket(){this.printService.printOrderTicket(this.order),this.snackBar.open("Order ticket sent to printer","Close",{duration:3e3})}getStatusLabel(e){return e.charAt(0).toUpperCase()+e.slice(1)}getStatusProgress(e){switch(e){case"placed":return"25%";case"preparing":return"50%";case"ready":return"75%";case"delivered":return"90%";case"completed":return"100%";default:return"0%"}}getTimeSince(e){return this.kdsService.getTimeSinceOrder(e)}getFullTimeString(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}getWaitingTime(e){let t=new Date(e),d=new Date().getTime()-t.getTime(),m=Math.floor(d/6e4);return m<10?"":m>20?`(${m} mins overdue)`:`(${m} mins waiting)`}getTimerClass(e){let t=new Date(e),d=new Date().getTime()-t.getTime(),m=Math.floor(d/6e4);return m>20?"urgent":m>10?"warning":"on-time"}updateOrderStatus(e){this.kdsService.updateOrderStatus(this.order._id,{status:e}).subscribe({next:()=>{this.snackBar.open(`Order status updated to ${e}`,"Close",{duration:3e3}),this.statusChanged.emit()},error:t=>{this.snackBar.open(t.error?.message||"Failed to update order status","Close",{duration:5e3})}})}updateItemStatus(e,t){this.kdsService.updateOrderItemStatus(this.order._id,e,{status:t}).subscribe({next:()=>{this.snackBar.open(`Item status updated to ${t}`,"Close",{duration:3e3}),this.statusChanged.emit()},error:o=>{this.snackBar.open(o.error?.message||"Failed to update item status","Close",{duration:5e3})}})}trackByItemId(e,t){return t._id}getItemName(e){return e.product&&e.product.name?e.product.name:`Menu Item (\u20B9${e.price})`}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-kds-order-card"]],inputs:{order:"order"},outputs:{statusChanged:"statusChanged"},decls:36,vars:18,consts:[["itemMenu","matMenu"],[1,"order-card",3,"click","ngClass"],[1,"order-header"],[1,"order-number"],[1,"order-time"],[1,"material-symbols-outlined"],[1,"order-info"],[1,"order-customer"],[1,"table-badge"],[1,"status-badge",3,"ngClass"],[1,"progress-container"],[1,"progress-bar"],[1,"order-items"],["class","item",3,"ngClass",4,"ngFor","ngForOf","ngForTrackBy"],["class","order-notes",4,"ngIf"],[1,"card-footer"],[1,"timer",3,"ngClass"],[1,"timer-indicator"],[1,"footer-actions"],["matTooltip","Print Order",1,"action-button","print-button",3,"click"],[1,"action-spacer"],["class","action-button primary-action",3,"click",4,"ngIf"],["class","action-button ready-action",3,"click",4,"ngIf"],["class","action-button deliver-action",3,"click",4,"ngIf"],["class","action-button complete-action",3,"click",4,"ngIf"],[1,"item",3,"ngClass"],[1,"item-header"],[1,"item-main"],[1,"item-quantity"],[1,"item-name"],[1,"item-actions"],[1,"item-status-indicator",3,"ngClass"],["class","material-symbols-outlined",4,"ngIf"],["mat-icon-button","",1,"item-menu-button",3,"matMenuTriggerFor"],["mat-menu-item","",3,"click",4,"ngIf"],["class","item-details",4,"ngIf"],["mat-menu-item","",3,"click"],[1,"item-details"],["class","addons",4,"ngIf"],["class","special-instructions",4,"ngIf"],[1,"addons"],["class","addon",4,"ngFor","ngForOf"],[1,"addon"],[1,"addon-name"],[1,"addon-value"],[1,"special-instructions"],[1,"material-symbols-outlined","warning-icon"],[1,"instruction-text"],[1,"order-notes"],[1,"note-header"],[1,"note-text"],[1,"action-button","primary-action",3,"click"],[1,"action-button","ready-action",3,"click"],[1,"action-button","deliver-action",3,"click"],[1,"action-button","complete-action",3,"click"]],template:function(t,o){t&1&&(i(0,"div",1),_("click",function(m){return m.stopPropagation()}),i(1,"div",2)(2,"div",3),a(3),r(),i(4,"div",4)(5,"mat-icon",5),a(6,"schedule"),r(),a(7),r()(),i(8,"div",6)(9,"div",7)(10,"div",8)(11,"mat-icon",5),a(12,"table_restaurant"),r(),i(13,"span"),a(14),r()(),i(15,"div",9),a(16),r()(),i(17,"div",10),M(18,"div",11),r()(),i(19,"div",12),p(20,Le,22,13,"div",13),r(),p(21,Ue,8,1,"div",14),i(22,"div",15)(23,"div",16),M(24,"span",17),i(25,"span"),a(26),r()(),i(27,"div",18)(28,"button",19),_("click",function(){return o.printOrderTicket()}),i(29,"mat-icon",5),a(30,"print"),r()(),M(31,"div",20),p(32,Ye,5,0,"button",21)(33,qe,5,0,"button",22)(34,He,5,0,"button",23)(35,We,5,0,"button",24),r()()()),t&2&&(c("ngClass","status-"+o.order.status),s(3),v("Order #",o.getOrderNumber(),""),s(4),v(" ",o.getTimeSince(o.order.createdAt)," "),s(7),v("Table ",o.order.table.tableNumber,""),s(),c("ngClass","status-"+o.order.status),s(),v(" ",o.getStatusLabel(o.order.status)," "),s(2),zt("width",o.getStatusProgress(o.order.status)),s(2),c("ngForOf",o.order.items)("ngForTrackBy",o.trackByItemId),s(),c("ngIf",o.order.specialInstructions),s(2),c("ngClass",o.getTimerClass(o.order.createdAt)),s(3),Ft("",o.getFullTimeString(o.order.createdAt)," ",o.getWaitingTime(o.order.createdAt),""),s(6),c("ngIf",o.order.status==="placed"),s(),c("ngIf",o.order.status==="preparing"),s(),c("ngIf",o.order.status==="ready"),s(),c("ngIf",o.order.status==="delivered"))},dependencies:[k,Rt,w,S,$,P,dt,I,E,Y,R,L,lt,q,ge,me,le,pe],styles:['[_nghost-%COMP%]{--primary-color: #009c4c;--primary-light: #00b359;--primary-dark: #00783a;--accent-color: #ff7979;--card-bg: #ffffff;--text-color: #333333;--text-light: #666666;--urgent-color: #e74c3c;--warning-color: #f39c12;--success-color: #27ae60;--timing-function: cubic-bezier(.34, 1.56, .64, 1)}.order-card[_ngcontent-%COMP%]{position:relative;border-radius:16px;background-color:var(--card-bg);overflow:hidden;box-shadow:0 10px 30px #00000014;transition:all .3s var(--timing-function);height:100%;display:flex;flex-direction:column;cursor:pointer}.order-card.status-placed[_ngcontent-%COMP%]{border-top:5px solid var(--urgent-color)}.order-card.status-preparing[_ngcontent-%COMP%]{border-top:5px solid var(--warning-color)}.order-card.status-ready[_ngcontent-%COMP%]{border-top:5px solid var(--success-color)}.order-card.status-delivered[_ngcontent-%COMP%]{border-top:5px solid var(--primary-color)}.order-header[_ngcontent-%COMP%]{padding:16px 20px;display:flex;justify-content:space-between;align-items:center;background-color:#fafafa}.order-number[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:var(--text-color)}.order-time[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;color:var(--text-light);font-size:14px;font-weight:500}.order-time[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.order-info[_ngcontent-%COMP%]{padding:16px 20px}.order-customer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:14px}.table-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;background-color:#0000000f;color:var(--text-color);padding:6px 12px;border-radius:20px;font-weight:500}.table-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px}.status-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:600;padding:4px 10px;border-radius:20px;color:#fff;letter-spacing:.5px;text-transform:uppercase}.status-badge.status-placed[_ngcontent-%COMP%]{background-color:var(--urgent-color)}.status-badge.status-preparing[_ngcontent-%COMP%]{background-color:var(--warning-color)}.status-badge.status-ready[_ngcontent-%COMP%]{background-color:var(--success-color)}.status-badge.status-delivered[_ngcontent-%COMP%]{background-color:var(--primary-color)}.progress-container[_ngcontent-%COMP%]{width:100%;height:5px;background-color:#0000000d;border-radius:3px;overflow:hidden}.progress-bar[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,var(--primary-color),var(--primary-light));border-radius:3px;transition:width .5s ease;position:relative}.progress-bar[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.5),transparent);animation:_ngcontent-%COMP%_progress-animation 2s infinite linear}@keyframes _ngcontent-%COMP%_progress-animation{0%{transform:translate(-100%)}to{transform:translate(100%)}}.status-placed[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--urgent-color),#ff6b6b)}.status-preparing[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--warning-color),#ffc171)}.status-ready[_ngcontent-%COMP%]   .progress-bar[_ngcontent-%COMP%]{background:linear-gradient(90deg,var(--success-color),#2ecc71)}.order-items[_ngcontent-%COMP%]{padding:16px 20px;flex:1;overflow-y:auto;background-color:#f7f7f7;display:flex;flex-direction:column;gap:12px}.item[_ngcontent-%COMP%]{background-color:#fff;border-radius:10px;padding:14px;box-shadow:0 2px 10px #0000000a;transition:all .2s ease;border-left:4px solid rgba(0,0,0,.1)}.item.item-ordered[_ngcontent-%COMP%]{border-left-color:#bdbdbd}.item.item-preparing[_ngcontent-%COMP%]{border-left-color:var(--warning-color)}.item.item-ready[_ngcontent-%COMP%]{border-left-color:var(--success-color)}.item.item-delivered[_ngcontent-%COMP%]{border-left-color:var(--primary-color);opacity:.7}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:6px}.item-main[_ngcontent-%COMP%]{display:flex;align-items:center}.item-quantity[_ngcontent-%COMP%]{font-size:16px;font-weight:700;margin-right:8px;color:var(--text-color)}.item-name[_ngcontent-%COMP%]{font-size:15px;font-weight:500;color:var(--text-color)}.item-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.item-status-indicator[_ngcontent-%COMP%]{width:26px;height:26px;display:flex;align-items:center;justify-content:center;border-radius:50%}.item-status-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;height:16px;width:16px}.status-indicator-ordered[_ngcontent-%COMP%]{background-color:#bdbdbd33;color:#757575}.status-indicator-preparing[_ngcontent-%COMP%]{background-color:#f39c1233;color:var(--warning-color)}.status-indicator-ready[_ngcontent-%COMP%]{background-color:#27ae6033;color:var(--success-color)}.status-indicator-delivered[_ngcontent-%COMP%]{background-color:#009c4c33;color:var(--primary-color)}.item-details[_ngcontent-%COMP%]{margin-top:8px}.addons[_ngcontent-%COMP%]{margin-bottom:8px}.addon[_ngcontent-%COMP%]{font-size:13px;color:var(--text-light);margin-bottom:4px;padding-left:10px;position:relative}.addon[_ngcontent-%COMP%]:before{content:"";position:absolute;left:0;top:8px;width:4px;height:4px;background-color:#bdbdbd;border-radius:50%}.addon-name[_ngcontent-%COMP%]{font-weight:500;margin-right:4px}.special-instructions[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;background-color:#f39c121a;padding:8px 10px;border-radius:6px;font-size:13px}.special-instructions[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{color:var(--warning-color);font-size:16px;height:16px;width:16px}.order-notes[_ngcontent-%COMP%]{margin:0 20px 16px;background-color:#3498db1a;border-radius:10px;padding:14px}.note-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-bottom:8px;color:#3498db;font-weight:500;font-size:14px}.note-text[_ngcontent-%COMP%]{font-size:13px;color:var(--text-color);line-height:1.5}.card-footer[_ngcontent-%COMP%]{padding:16px 20px;background-color:#f5f5f5;border-top:1px solid rgba(0,0,0,.06);display:flex;justify-content:space-between;align-items:center}.timer[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:13px;color:var(--text-light)}.timer-indicator[_ngcontent-%COMP%]{display:inline-block;width:8px;height:8px;border-radius:50%;margin-right:8px}.timer.on-time[_ngcontent-%COMP%]   .timer-indicator[_ngcontent-%COMP%]{background-color:var(--success-color);box-shadow:0 0 8px var(--success-color);animation:_ngcontent-%COMP%_pulse 2s infinite}.timer.warning[_ngcontent-%COMP%]   .timer-indicator[_ngcontent-%COMP%]{background-color:var(--warning-color);box-shadow:0 0 8px var(--warning-color);animation:_ngcontent-%COMP%_pulse 1.5s infinite}.timer.urgent[_ngcontent-%COMP%]   .timer-indicator[_ngcontent-%COMP%]{background-color:var(--urgent-color);box-shadow:0 0 8px var(--urgent-color);animation:_ngcontent-%COMP%_pulse 1s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.2)}to{opacity:1;transform:scale(1)}}.footer-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:10px}.action-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;border:none;background:none;padding:6px 12px;border-radius:6px;cursor:pointer;font-weight:500;font-size:14px;transition:all .2s ease}.action-button.print-button[_ngcontent-%COMP%]{color:var(--text-light)}.action-button.print-button[_ngcontent-%COMP%]:hover{background-color:#0000000d;color:var(--text-color)}.action-spacer[_ngcontent-%COMP%]{flex:1}.action-button.primary-action[_ngcontent-%COMP%]{background-color:var(--primary-color);color:#fff}.action-button.primary-action[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:translateY(-2px);box-shadow:0 4px 8px #009c4c4d}.action-button.ready-action[_ngcontent-%COMP%]{background-color:var(--success-color);color:#fff}.action-button.ready-action[_ngcontent-%COMP%]:hover{background-color:#219653;transform:translateY(-2px);box-shadow:0 4px 8px #27ae604d}.action-button.deliver-action[_ngcontent-%COMP%]{background-color:#3498db;color:#fff}.action-button.deliver-action[_ngcontent-%COMP%]:hover{background-color:#2980b9;transform:translateY(-2px);box-shadow:0 4px 8px #3498db4d}.action-button.complete-action[_ngcontent-%COMP%]{background-color:#9b59b6;color:#fff}.action-button.complete-action[_ngcontent-%COMP%]:hover{background-color:#8e44ad;transform:translateY(-2px);box-shadow:0 4px 8px #9b59b64d}@media (max-width: 480px){.order-customer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.footer-actions[_ngcontent-%COMP%]{flex-wrap:wrap}.action-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}.action-button[_ngcontent-%COMP%]{padding:8px}}']})};var W=class n{notificationsSubject=new it([]);notifications$=this.notificationsSubject.asObservable();soundEnabled=!0;addNotification(e){let t=this.notificationsSubject.value;t.some(o=>o._id===e._id)||(this.notificationsSubject.next([...t,e]),this.soundEnabled&&this.playNotificationSound())}removeNotification(e){let t=this.notificationsSubject.value;this.notificationsSubject.next(t.filter(o=>o._id!==e))}clearAllNotifications(){this.notificationsSubject.next([])}playNotificationSound(){try{let e=new(window.AudioContext||window.webkitAudioContext),t=e.createOscillator(),o=e.createGain();t.connect(o),o.connect(e.destination),t.type="sine",t.frequency.value=800,o.gain.value=.3,t.start(),setTimeout(()=>{t.stop()},300)}catch(e){console.error("Failed to play notification sound:",e)}}toggleSound(e){this.soundEnabled=e}isSoundEnabled(){return this.soundEnabled}static \u0275fac=function(t){return new(t||n)};static \u0275prov=z({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ze=n=>["/payments/order",n];function Je(n,e){if(n&1&&(i(0,"div",6)(1,"h2",7),a(2),r(),i(3,"div",8)(4,"mat-chip",9),a(5),Q(6,"titlecase"),r()()()),n&2){let t=l();c("@fadeIn",void 0),s(2),v("Order #",t.getOrderNumber(),""),s(2),c("color",t.getStatusColor(t.order.status)),s(),v(" ",tt(6,4,t.order.status)," ")}}function Qe(n,e){if(n&1&&(i(0,"div",12)(1,"h3",21),a(2,"Customer Info"),r(),i(3,"div",13)(4,"span",14),a(5,"Name:"),r(),i(6,"span",17),a(7),r()(),i(8,"div",13)(9,"span",14),a(10,"Phone:"),r(),i(11,"span",17),a(12),r()()()),n&2){let t=l(2);s(7),x(t.getCustomerName()),s(5),x(t.getCustomerPhone())}}function tn(n,e){if(n&1&&(i(0,"div",46)(1,"span",47),a(2),r(),i(3,"span",48),a(4),r(),i(5,"span",49),a(6),Q(7,"currency"),r()()),n&2){let t=e.$implicit;s(2),v("",t.addon.name,":"),s(2),x(t.subAddon.name),s(2),v("(+",tt(7,3,t.subAddon.price),")")}}function en(n,e){if(n&1&&(i(0,"div",44),p(1,tn,8,5,"div",45),r()),n&2){let t=l().$implicit;s(),c("ngForOf",t.selectedAddons)}}function nn(n,e){if(n&1&&(i(0,"div",50)(1,"mat-icon",51),a(2,"priority_high"),r(),i(3,"span"),a(4),r()()),n&2){let t=l().$implicit;s(4),x(t.specialInstructions)}}function rn(n,e){if(n&1){let t=b();i(0,"div",30)(1,"div",31)(2,"div",32)(3,"span",33),a(4),r(),i(5,"span",34),a(6),r()(),i(7,"div",35)(8,"span",14),a(9,"Status:"),r(),i(10,"mat-select",36),J("ngModelChange",function(d){let m=g(t).$implicit;return Z(m.status,d)||(m.status=d),u(d)}),_("selectionChange",function(){let d=g(t).$implicit,m=l(2);return u(m.updateItemStatus(d._id,d.status))}),i(11,"mat-option",37),a(12,"Ordered"),r(),i(13,"mat-option",38),a(14,"Preparing"),r(),i(15,"mat-option",39),a(16,"Ready"),r(),i(17,"mat-option",40),a(18,"Delivered"),r()()()(),p(19,en,2,1,"div",41)(20,nn,5,1,"div",42),i(21,"div",43)(22,"span"),a(23),Q(24,"currency"),r()()()}if(n&2){let t=e.$implicit,o=l(2);c("@fadeIn",void 0),s(4),v("",t.quantity,"\xD7"),s(2),x(o.getItemName(t)),s(4),X("ngModel",t.status),c("disabled",o.isUpdating),s(9),c("ngIf",t.selectedAddons&&t.selectedAddons.length),s(),c("ngIf",t.specialInstructions),s(3),x(tt(24,8,t.price*t.quantity))}}function on(n,e){if(n&1&&(i(0,"div",52)(1,"h3",21),a(2,"Special Instructions"),r(),i(3,"div",53)(4,"mat-icon",51),a(5,"info"),r(),i(6,"span"),a(7),r()()()),n&2){let t=l(2);s(7),x(t.order.specialInstructions)}}function an(n,e){if(n&1){let t=b();i(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"span",14),a(5,"Table:"),r(),i(6,"span",15)(7,"mat-icon",16),a(8,"table_restaurant"),r(),a(9),r()(),i(10,"div",13)(11,"span",14),a(12,"Time:"),r(),i(13,"span",17),a(14),r()()(),p(15,Qe,13,2,"div",18),r(),M(16,"mat-divider",19),i(17,"div",20)(18,"h3",21),a(19,"Order Items"),r(),p(20,rn,25,10,"div",22),r(),M(21,"mat-divider",19),p(22,on,8,1,"div",23),i(23,"div",24)(24,"div",25)(25,"span",14),a(26,"Total Amount:"),r(),i(27,"span",17),a(28),Q(29,"currency"),r()()(),M(30,"mat-divider",19),i(31,"div",26)(32,"h3",21),a(33,"Payment Options"),r(),i(34,"div",27)(35,"button",28),_("click",function(){g(t);let d=l();return u(d.recordCashPayment())}),i(36,"mat-icon",16),a(37,"payments"),r(),a(38," Record Cash Payment "),r(),i(39,"a",29),_("click",function(){g(t);let d=l();return u(d.dialogRef.close())}),i(40,"mat-icon",16),a(41,"receipt_long"),r(),a(42," View Payments "),r()()()()}if(n&2){let t=l();c("@slideUp",void 0),s(9),v(" ",t.order.table.tableNumber," "),s(5),x(t.formatDateTime(t.order.createdAt)),s(),c("ngIf",t.isCustomerObject()),s(5),c("ngForOf",t.order.items),s(2),c("ngIf",t.order.specialInstructions),s(6),x(tt(29,9,t.order.totalAmount)),s(7),c("disabled",t.isProcessing),s(4),c("routerLink",$t(11,Ze,t.order._id))}}function sn(n,e){n&1&&(i(0,"div",54)(1,"mat-icon",55),a(2,"hourglass_top"),r(),i(3,"p"),a(4,"Loading order details..."),r()())}function dn(n,e){if(n&1){let t=b();i(0,"button",56),_("click",function(){g(t);let d=l();return u(d.updateOrderStatus())}),a(1),r()}if(n&2){let t=l();c("disabled",t.isUpdating||!t.canUpdateStatus()),s(),v(" ",t.getNextStatusButtonText()," ")}}var G=class n{constructor(e,t){this.dialogRef=e;this.data=t}kdsService=f(D);paymentService=f(we);snackBar=f(j);dialog=f(U);order=null;isLoading=!0;isUpdating=!1;isProcessing=!1;ngOnInit(){this.data.orderId&&this.loadOrderDetails(this.data.orderId)}getOrderNumber(){return this.order?this.order._id.slice(-6).toUpperCase():""}loadOrderDetails(e){this.isLoading=!0,this.kdsService.getOrderById(e).subscribe({next:t=>{this.order=t.data.order,this.isLoading=!1},error:t=>{this.snackBar.open(t.error?.message||"Failed to load order details","Close",{duration:5e3}),this.isLoading=!1,this.dialogRef.close()}})}formatDateTime(e){return new Date(e).toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}getStatusColor(e){switch(e){case"placed":return"warn";case"preparing":return"accent";case"ready":return"primary";default:return""}}getItemName(e){return e.product&&e.product.name?e.product.name:`Menu Item (\u20B9${e.price})`}updateItemStatus(e,t){this.order&&(this.isUpdating=!0,this.kdsService.updateOrderItemStatus(this.order._id,e,{status:t}).subscribe({next:()=>{this.snackBar.open(`Item status updated to ${t}`,"Close",{duration:3e3}),this.isUpdating=!1},error:o=>{this.snackBar.open(o.error?.message||"Failed to update item status","Close",{duration:5e3}),this.isUpdating=!1,this.loadOrderDetails(this.order._id)}}))}canUpdateStatus(){return this.order?this.order.status!=="completed":!1}getNextStatus(){if(!this.order)return"";switch(this.order.status){case"placed":return"preparing";case"preparing":return"ready";case"ready":return"delivered";case"delivered":return"completed";default:return""}}getNextStatusButtonText(){if(!this.order)return"";switch(this.order.status){case"placed":return"Start Preparing";case"preparing":return"Mark as Ready";case"ready":return"Mark as Delivered";case"delivered":return"Complete Order";default:return""}}isCustomerObject(){return!!(this.order?.customer&&typeof this.order.customer!="string")}getCustomerName(){return this.isCustomerObject()?this.order.customer.name:"N/A"}getCustomerPhone(){return this.isCustomerObject()?this.order.customer.phoneNumber:"N/A"}updateOrderStatus(){if(!this.order)return;let e=this.getNextStatus();e&&(this.isUpdating=!0,this.kdsService.updateOrderStatus(this.order._id,{status:e}).subscribe({next:t=>{this.order=t.data.order,this.snackBar.open(`Order status updated to ${e}`,"Close",{duration:3e3}),this.isUpdating=!1,e==="completed"&&this.dialogRef.close(!0)},error:t=>{this.snackBar.open(t.error?.message||"Failed to update order status","Close",{duration:5e3}),this.isUpdating=!1}}))}recordCashPayment(){this.order&&(this.isProcessing=!0,this.paymentService.recordCashPayment(this.order._id).subscribe({next:()=>{this.snackBar.open("Cash payment recorded successfully","Close",{duration:3e3,panelClass:["success-snackbar"]}),this.isProcessing=!1},error:e=>{this.snackBar.open(e.error?.message||"Failed to record payment","Close",{duration:5e3,panelClass:["error-snackbar"]}),this.isProcessing=!1}}))}static \u0275fac=function(t){return new(t||n)(_t(ue),_t(fe))};static \u0275cmp=y({type:n,selectors:[["app-kds-order-detail-dialog"]],decls:7,vars:4,consts:[["class","dialog-header",4,"ngIf"],["mat-dialog-content","",4,"ngIf"],["class","loading-content",4,"ngIf"],["mat-dialog-actions","","align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-actions"],["selected","",3,"color"],["mat-dialog-content",""],[1,"order-meta"],[1,"meta-section"],[1,"meta-item"],[1,"label"],[1,"value","table-value"],[1,"material-symbols-outlined"],[1,"value"],["class","meta-section",4,"ngIf"],[1,"section-divider"],[1,"order-items"],[1,"section-title"],["class","item-card",4,"ngFor","ngForOf"],["class","order-notes",4,"ngIf"],[1,"order-summary"],[1,"total-amount"],[1,"payment-actions"],[1,"action-buttons"],["mat-raised-button","","color","primary",1,"payment-button",3,"click","disabled"],["mat-stroked-button","","color","primary",1,"payment-button",3,"click","routerLink"],[1,"item-card"],[1,"item-header"],[1,"item-title"],[1,"quantity"],[1,"name"],[1,"item-status"],[1,"status-select",3,"ngModelChange","selectionChange","ngModel","disabled"],["value","ordered"],["value","preparing"],["value","ready"],["value","delivered"],["class","item-addons",4,"ngIf"],["class","item-instructions",4,"ngIf"],[1,"item-price"],[1,"item-addons"],["class","addon",4,"ngFor","ngForOf"],[1,"addon"],[1,"addon-name"],[1,"addon-value"],[1,"addon-price"],[1,"item-instructions"],["color","warn",1,"material-symbols-outlined"],[1,"order-notes"],[1,"note-box"],[1,"loading-content"],[1,"material-symbols-outlined","spinning"],["mat-raised-button","","color","primary",3,"click","disabled"]],template:function(t,o){t&1&&(p(0,Je,7,6,"div",0)(1,an,43,13,"div",1)(2,sn,5,0,"div",2),i(3,"div",3)(4,"button",4),_("click",function(){return o.dialogRef.close()}),a(5,"Close"),r(),p(6,dn,2,2,"button",5),r()),t&2&&(c("ngIf",o.order),s(),c("ngIf",o.order),s(),c("ngIf",o.isLoading&&!o.order),s(4),c("ngIf",o.order))},dependencies:[k,w,S,Lt,Ut,ve,_e,be,xe,P,ae,ct,I,E,R,ce,Y,he,gt,pt,mt,st,ot,at,qt],styles:['[_nghost-%COMP%]{--primary-color: #009c4c;--primary-light: #00b359;--primary-dark: #00783a;--accent-color: #ff7979;--card-bg: #ffffff;--text-color: #333333;--text-light: #666666;--urgent-color: #e74c3c;--warning-color: #f39c12;--success-color: #27ae60;--timing-function: cubic-bezier(.34, 1.56, .64, 1)}.dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:0 24px;margin-bottom:8px}h2.mat-dialog-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:700;color:var(--text-color)}.order-meta[_ngcontent-%COMP%]{display:flex;gap:32px;margin-bottom:24px}.meta-section[_ngcontent-%COMP%]{flex:1}.section-title[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:var(--text-color);margin-bottom:16px;margin-top:0;position:relative;display:inline-block}.section-title[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-6px;left:0;width:40px;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--primary-light));border-radius:3px}.meta-item[_ngcontent-%COMP%]{margin-bottom:12px;display:flex;align-items:center}.label[_ngcontent-%COMP%]{font-weight:500;margin-right:8px;min-width:80px;color:var(--text-light)}.value[_ngcontent-%COMP%]{font-weight:500;color:var(--text-color)}.table-value[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.table-value[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;height:18px;width:18px;color:var(--primary-color)}.section-divider[_ngcontent-%COMP%]{margin:24px 0}.item-card[_ngcontent-%COMP%]{background-color:#f8f8f8;border-radius:10px;padding:16px;margin-bottom:16px;box-shadow:0 2px 8px #0000000d;transition:all .3s ease}.item-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000014}.item-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:12px}.item-title[_ngcontent-%COMP%]{display:flex;align-items:center}.quantity[_ngcontent-%COMP%]{font-weight:700;margin-right:8px;color:var(--primary-color)}.name[_ngcontent-%COMP%]{font-weight:600}.item-status[_ngcontent-%COMP%]{display:flex;align-items:center}.status-select[_ngcontent-%COMP%]{min-width:140px}.item-addons[_ngcontent-%COMP%]{margin:10px 0;padding-left:16px}.addon[_ngcontent-%COMP%]{margin-bottom:4px;font-size:14px;color:var(--text-light)}.addon-name[_ngcontent-%COMP%]{font-weight:600;margin-right:4px}.addon-price[_ngcontent-%COMP%]{color:var(--text-light);margin-left:4px}.item-instructions[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px;background-color:#f39c121a;padding:10px 12px;border-radius:6px;margin-top:10px;font-size:14px}.item-instructions[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--warning-color);font-size:18px;height:18px;width:18px}.item-price[_ngcontent-%COMP%]{text-align:right;margin-top:10px;font-weight:600;color:var(--text-color)}.note-box[_ngcontent-%COMP%]{background-color:#f39c121a;padding:16px;border-radius:10px;display:flex;align-items:flex-start;gap:12px}.note-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--warning-color);font-size:20px;height:20px;width:20px}.order-summary[_ngcontent-%COMP%]{margin:24px 0;text-align:right}.total-amount[_ngcontent-%COMP%]{font-size:20px}.total-amount[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-weight:700;color:var(--primary-color)}.payment-actions[_ngcontent-%COMP%]{margin-top:16px;margin-bottom:8px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:16px}.payment-button[_ngcontent-%COMP%]{transition:all .3s ease}.payment-button[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #0000001a}.loading-content[_ngcontent-%COMP%]{padding:40px 24px;text-align:center;color:var(--text-light);display:flex;flex-direction:column;align-items:center;gap:16px}.spinning[_ngcontent-%COMP%]{font-size:40px;height:40px;width:40px;animation:_ngcontent-%COMP%_spin 1.5s infinite linear}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 600px){.order-meta[_ngcontent-%COMP%]{flex-direction:column;gap:16px}.item-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:10px}.action-buttons[_ngcontent-%COMP%]{flex-direction:column}}'],data:{animation:[V("fadeIn",[K(":enter",[O({opacity:0}),B("300ms ease-out",O({opacity:1}))])]),V("slideUp",[K(":enter",[O({transform:"translateY(20px)",opacity:0}),B("300ms ease-out",O({transform:"translateY(0)",opacity:1}))])])]}})};function cn(n,e){if(n&1&&(i(0,"span"),a(1),r()),n&2){let t=e.$implicit,o=e.last;s(),Vt(" ",t.quantity,"\xD7 ",t.product.name,"",o?"":", "," ")}}function ln(n,e){if(n&1){let t=b();i(0,"div",6)(1,"div",7)(2,"div",8)(3,"mat-icon",3),a(4,"notifications_active"),r(),i(5,"div",9),a(6),r()(),i(7,"div",10),a(8),r()(),i(9,"div",11)(10,"div",12),p(11,cn,2,3,"span",13),r()(),i(12,"div",14)(13,"button",15),_("click",function(){let d=g(t).$implicit,m=l(2);return u(m.printOrder(d))}),i(14,"mat-icon",3),a(15,"print"),r()(),i(16,"button",16),_("click",function(){let d=g(t).$implicit,m=l(2);return u(m.viewOrderDetails(d))}),i(17,"mat-icon",3),a(18,"visibility"),r()(),i(19,"button",17),_("click",function(){let d=g(t).$implicit,m=l(2);return u(m.dismissNotification(d._id))}),i(20,"mat-icon",3),a(21,"close"),r()()()()}if(n&2){let t=e.$implicit,o=l(2);c("@slideIn",void 0),s(6),v(" New Order: Table ",t.table.tableNumber," "),s(2),v(" ",o.formatTime(t.createdAt)," "),s(3),c("ngForOf",t.items)}}function mn(n,e){if(n&1&&(i(0,"div",4),p(1,ln,22,4,"div",5),r()),n&2){let t=l();s(),c("ngForOf",t.notifications)}}var ft=class n{notificationService=f(W);printService=f(H);dialog=f(U);notifications=[];soundEnabled=!0;subscription=new nt;ngOnInit(){this.soundEnabled=this.notificationService.isSoundEnabled(),this.subscription.add(this.notificationService.notifications$.subscribe(e=>{this.notifications=e}))}ngOnDestroy(){this.subscription.unsubscribe()}dismissNotification(e){this.notificationService.removeNotification(e)}formatTime(e){return new Date(e).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}printOrder(e){this.printService.printOrderTicket(e)}viewOrderDetails(e){this.dialog.open(G,{data:{orderId:e._id},width:"800px",panelClass:"order-detail-dialog"}),this.dismissNotification(e._id)}toggleSound(){this.soundEnabled=!this.soundEnabled,this.notificationService.toggleSound(this.soundEnabled)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-kds-notification-overlay"]],decls:5,vars:5,consts:[["class","notifications-container",4,"ngIf"],["matBadgeColor","warn","matBadgeOverlap","true",1,"sound-toggle",3,"matBadge","matBadgeHidden"],["mat-fab","","color","primary","matTooltip","Toggle Notification Sound",3,"click"],[1,"material-symbols-outlined"],[1,"notifications-container"],["class","notification-card",4,"ngFor","ngForOf"],[1,"notification-card"],[1,"notification-header"],[1,"notification-title"],[1,"title-text"],[1,"notification-time"],[1,"notification-content"],[1,"items-summary"],[4,"ngFor","ngForOf"],[1,"notification-actions"],["mat-icon-button","","matTooltip","Print Ticket",3,"click"],["mat-icon-button","","matTooltip","View Details",3,"click"],["mat-icon-button","","matTooltip","Dismiss",3,"click"]],template:function(t,o){t&1&&(p(0,mn,2,1,"div",0),i(1,"div",1)(2,"button",2),_("click",function(){return o.toggleSound()}),i(3,"mat-icon",3),a(4),r()()()),t&2&&(c("ngIf",o.notifications.length>0),s(),c("matBadge",o.notifications.length)("matBadgeHidden",o.notifications.length===0)("@fadeIn",void 0),s(3),v(" ",o.soundEnabled?"volume_up":"volume_off"," "))},dependencies:[k,w,S,$,P,dt,se,I,E,q,ke,L,lt],styles:["[_nghost-%COMP%]{--primary-color: #009c4c;--primary-light: #00b359;--primary-dark: #00783a;--accent-color: #ff7979;--card-bg: #ffffff;--text-color: #333333;--text-light: #666666;--urgent-color: #e74c3c;--warning-color: #f39c12;--success-color: #27ae60;--timing-function: cubic-bezier(.34, 1.56, .64, 1)}.notifications-container[_ngcontent-%COMP%]{position:fixed;top:24px;right:24px;z-index:1000;display:flex;flex-direction:column;gap:12px;max-width:360px;pointer-events:none}.notification-card[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:12px;box-shadow:0 8px 24px #00000026;overflow:hidden;border-left:4px solid var(--urgent-color);pointer-events:auto}.notification-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:14px 16px;background-color:#fff8f8}.notification-title[_ngcontent-%COMP%]{display:flex;align-items:center}.notification-title[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--urgent-color);margin-right:10px}.notification-title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{font-weight:600;color:var(--urgent-color)}.notification-time[_ngcontent-%COMP%]{font-size:12px;color:var(--text-light)}.notification-content[_ngcontent-%COMP%]{padding:16px}.items-summary[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;color:var(--text-color)}.notification-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:8px;padding:10px 16px;background-color:#fafafa;border-top:1px solid #f0f0f0}.notification-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f4f4f4}.notification-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#00000014}.notification-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--text-color)}.sound-toggle[_ngcontent-%COMP%]{position:fixed;bottom:32px;right:32px;z-index:1000}.sound-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:var(--primary-color);box-shadow:0 6px 16px #0003;transition:all .3s var(--timing-function)}.sound-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);transform:scale(1.1);box-shadow:0 8px 20px #009c4c4d}.sound-toggle[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px;height:24px;width:24px}@media (max-width: 480px){.notifications-container[_ngcontent-%COMP%]{max-width:calc(100vw - 48px)}}"],data:{animation:[V("slideIn",[K(":enter",[O({transform:"translateX(110%)"}),B("400ms cubic-bezier(0.34, 1.56, 0.64, 1)",O({transform:"translateX(0)"}))]),K(":leave",[B("300ms cubic-bezier(0.34, 0.01, 0.64, 1)",O({transform:"translateX(110%)"}))])]),V("fadeIn",[K(":enter",[O({opacity:0}),B("200ms ease-out",O({opacity:1}))])])]}})};function pn(n,e){if(n&1&&(i(0,"div",32),a(1," All Orders "),i(2,"div",33),a(3),r()()),n&2){let t=l();s(3),x(t.filteredOrders.length)}}function gn(n,e){if(n&1){let t=b();A(0),i(1,"app-kds-order-card",35),_("statusChanged",function(){g(t);let d=l(2);return u(d.refreshOrders())})("click",function(){let d=g(t).$implicit,m=l(2);return u(m.viewOrderDetails(d._id))}),r(),F()}if(n&2){let t=e.$implicit;s(),c("order",t)}}function un(n,e){if(n&1&&(A(0),p(1,gn,2,1,"ng-container",34),F()),n&2){let t=l();s(),c("ngForOf",t.filteredOrders)("ngForTrackBy",t.trackById)}}function fn(n,e){n&1&&(i(0,"div",36)(1,"mat-icon",8),a(2,"restaurant"),r(),i(3,"p"),a(4,"No active orders at the moment"),r()())}function _n(n,e){if(n&1&&(i(0,"div",32),a(1," Placed "),i(2,"div",37),a(3),r()()),n&2){let t=l();s(3),x(t.getOrdersByStatus("placed").length)}}function xn(n,e){if(n&1){let t=b();i(0,"app-kds-order-card",35),_("statusChanged",function(){g(t);let d=l(2);return u(d.refreshOrders())})("click",function(){let d=g(t).$implicit,m=l(2);return u(m.viewOrderDetails(d._id))}),r()}if(n&2){let t=e.$implicit;c("order",t)}}function bn(n,e){if(n&1&&(A(0),p(1,xn,1,1,"app-kds-order-card",38),F()),n&2){let t=l();s(),c("ngForOf",t.getOrdersByStatus("placed"))("ngForTrackBy",t.trackById)}}function vn(n,e){n&1&&(i(0,"div",36)(1,"mat-icon",8),a(2,"check_circle"),r(),i(3,"p"),a(4,"No new orders waiting to be prepared"),r()())}function hn(n,e){if(n&1&&(i(0,"div",32),a(1," Preparing "),i(2,"div",39),a(3),r()()),n&2){let t=l();s(3),x(t.getOrdersByStatus("preparing").length)}}function Cn(n,e){if(n&1){let t=b();i(0,"app-kds-order-card",35),_("statusChanged",function(){g(t);let d=l(2);return u(d.refreshOrders())})("click",function(){let d=g(t).$implicit,m=l(2);return u(m.viewOrderDetails(d._id))}),r()}if(n&2){let t=e.$implicit;c("order",t)}}function On(n,e){if(n&1&&(A(0),p(1,Cn,1,1,"app-kds-order-card",38),F()),n&2){let t=l();s(),c("ngForOf",t.getOrdersByStatus("preparing"))("ngForTrackBy",t.trackById)}}function yn(n,e){n&1&&(i(0,"div",36)(1,"mat-icon",8),a(2,"restaurant"),r(),i(3,"p"),a(4,"No orders currently being prepared"),r()())}function Mn(n,e){if(n&1&&(i(0,"div",32),a(1," Ready "),i(2,"div",40),a(3),r()()),n&2){let t=l();s(3),x(t.getOrdersByStatus("ready").length)}}function wn(n,e){if(n&1){let t=b();i(0,"app-kds-order-card",35),_("statusChanged",function(){g(t);let d=l(2);return u(d.refreshOrders())})("click",function(){let d=g(t).$implicit,m=l(2);return u(m.viewOrderDetails(d._id))}),r()}if(n&2){let t=e.$implicit;c("order",t)}}function Sn(n,e){if(n&1&&(A(0),p(1,wn,1,1,"app-kds-order-card",38),F()),n&2){let t=l();s(),c("ngForOf",t.getOrdersByStatus("ready"))("ngForTrackBy",t.trackById)}}function kn(n,e){n&1&&(i(0,"div",36)(1,"mat-icon",8),a(2,"local_shipping"),r(),i(3,"p"),a(4,"No orders ready for delivery"),r()())}var Pe=class n{kdsService=f(D);snackBar=f(j);notificationService=f(W);dialog=f(U);lastOrderCount=0;orders=[];filteredOrders=[];sortBy="time";searchText="";subscription=new nt;ngOnInit(){this.subscription.add(this.kdsService.activeOrders$.subscribe(e=>{if(this.lastOrderCount>0&&e.length>this.lastOrderCount){let t=this.orders;e.filter(d=>!t.some(m=>m._id===d._id)&&d.status==="placed").forEach(d=>{this.notificationService.addNotification(d)})}this.lastOrderCount=e.length,this.orders=e,this.applyFilters()})),this.kdsService.startPolling()}ngOnDestroy(){this.subscription.unsubscribe(),this.kdsService.stopPolling()}refreshOrders(){this.kdsService.refreshOrders(),this.snackBar.open("Orders refreshed","Close",{duration:3e3,panelClass:["success-snackbar"]})}viewOrderDetails(e){this.dialog.open(G,{data:{orderId:e},width:"800px",panelClass:"order-detail-dialog"}).afterClosed().subscribe(t=>{t&&this.refreshOrders()})}applyFilters(){let e=[...this.orders];if(this.searchText){let t=this.searchText.toLowerCase();e=e.filter(o=>o._id.toLowerCase().includes(t)||o.table.tableNumber.toLowerCase().includes(t)||o.items.some(d=>d.product.name.toLowerCase().includes(t)))}switch(this.sortBy){case"time":e=e.sort((t,o)=>new Date(t.createdAt).getTime()-new Date(o.createdAt).getTime());break;case"time-desc":e=e.sort((t,o)=>new Date(o.createdAt).getTime()-new Date(t.createdAt).getTime());break;case"table":e=e.sort((t,o)=>t.table.tableNumber.localeCompare(o.table.tableNumber));break}this.filteredOrders=e}getOrdersByStatus(e){return this.filteredOrders.filter(t=>t.status===e)}trackById(e,t){return t._id}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=y({type:n,selectors:[["app-kds-dashboard"]],decls:91,vars:14,consts:[["noOrders",""],["noPlacedOrders",""],["noPreparingOrders",""],["noReadyOrders",""],[1,"kds-container"],[1,"kds-header"],[1,"kitchen-title"],[1,"kitchen-logo"],[1,"material-symbols-outlined"],[1,"header-actions"],[1,"search-box"],[1,"search-icon","material-symbols-outlined"],["type","text","placeholder","Search orders, tables or items...",3,"ngModelChange","input","ngModel"],["appearance","outline",1,"sort-select"],[3,"ngModelChange","selectionChange","ngModel"],["value","time"],["value","time-desc"],["value","table"],["mat-raised-button","","color","primary",1,"refresh-button",3,"click"],[1,"kitchen-stats"],[1,"stat-card"],[1,"stat-title"],[1,"stat-value"],[1,"stat-icon"],[1,"stat-icon","placed"],[1,"stat-icon","preparing"],[1,"stat-icon","ready"],[1,"orders-tab-container"],["mat-stretch-tabs","false","animationDuration","200ms",1,"order-tabs"],["mat-tab-label",""],[1,"orders-grid"],[4,"ngIf","ngIfElse"],[1,"tab-label"],[1,"badge"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"order-item",3,"statusChanged","click","order"],[1,"no-orders"],[1,"badge","urgent"],["class","order-item",3,"order","statusChanged","click",4,"ngFor","ngForOf","ngForTrackBy"],[1,"badge","warning"],[1,"badge","success"]],template:function(t,o){if(t&1){let d=b();i(0,"div",4)(1,"div",5)(2,"div",6)(3,"div",7)(4,"mat-icon",8),a(5,"restaurant"),r()(),i(6,"h1"),a(7,"Kitchen Display System"),r()(),i(8,"div",9)(9,"div",10)(10,"mat-icon",11),a(11,"search"),r(),i(12,"input",12),J("ngModelChange",function(h){return g(d),Z(o.searchText,h)||(o.searchText=h),u(h)}),_("input",function(){return g(d),u(o.applyFilters())}),r()(),i(13,"mat-form-field",13)(14,"mat-label"),a(15,"Sort By"),r(),i(16,"mat-select",14),J("ngModelChange",function(h){return g(d),Z(o.sortBy,h)||(o.sortBy=h),u(h)}),_("selectionChange",function(){return g(d),u(o.applyFilters())}),i(17,"mat-option",15),a(18,"Time (Oldest First)"),r(),i(19,"mat-option",16),a(20,"Time (Newest First)"),r(),i(21,"mat-option",17),a(22,"Table Number"),r()()(),i(23,"button",18),_("click",function(){return g(d),u(o.refreshOrders())}),i(24,"mat-icon",8),a(25,"refresh"),r(),a(26," Refresh "),r()()(),i(27,"div",19)(28,"div",20)(29,"div",21),a(30,"Active Orders"),r(),i(31,"div",22)(32,"div",23)(33,"mat-icon",8),a(34,"receipt_long"),r()(),i(35,"span"),a(36),r()()(),i(37,"div",20)(38,"div",21),a(39,"New Orders"),r(),i(40,"div",22)(41,"div",24)(42,"mat-icon",8),a(43,"new_releases"),r()(),i(44,"span"),a(45),r()()(),i(46,"div",20)(47,"div",21),a(48,"Preparing"),r(),i(49,"div",22)(50,"div",25)(51,"mat-icon",8),a(52,"restaurant"),r()(),i(53,"span"),a(54),r()()(),i(55,"div",20)(56,"div",21),a(57,"Ready"),r(),i(58,"div",22)(59,"div",26)(60,"mat-icon",8),a(61,"check_circle"),r()(),i(62,"span"),a(63),r()()()(),i(64,"div",27)(65,"mat-tab-group",28)(66,"mat-tab"),p(67,pn,4,1,"ng-template",29),i(68,"div",30),p(69,un,2,2,"ng-container",31)(70,fn,5,0,"ng-template",null,0,et),r()(),i(72,"mat-tab"),p(73,_n,4,1,"ng-template",29),i(74,"div",30),p(75,bn,2,2,"ng-container",31)(76,vn,5,0,"ng-template",null,1,et),r()(),i(78,"mat-tab"),p(79,hn,4,1,"ng-template",29),i(80,"div",30),p(81,On,2,2,"ng-container",31)(82,yn,5,0,"ng-template",null,2,et),r()(),i(84,"mat-tab"),p(85,Mn,4,1,"ng-template",29),i(86,"div",30),p(87,Sn,2,2,"ng-container",31)(88,kn,5,0,"ng-template",null,3,et),r()()()(),M(90,"app-kds-notification-overlay"),r()}if(t&2){let d=T(71),m=T(77),h=T(83),C=T(89);s(12),X("ngModel",o.searchText),s(4),X("ngModel",o.sortBy),s(20),x(o.orders.length),s(9),x(o.getOrdersByStatus("placed").length),s(9),x(o.getOrdersByStatus("preparing").length),s(9),x(o.getOrdersByStatus("ready").length),s(6),c("ngIf",o.filteredOrders.length>0)("ngIfElse",d),s(6),c("ngIf",o.getOrdersByStatus("placed").length>0)("ngIfElse",m),s(6),c("ngIf",o.getOrdersByStatus("preparing").length>0)("ngIfElse",h),s(6),c("ngIf",o.getOrdersByStatus("ready").length>0)("ngIfElse",C)}},dependencies:[k,w,S,st,te,ot,at,ee,$,P,ct,I,E,Y,Me,Ce,Oe,ye,q,L,de,gt,ie,ne,pt,mt,re,oe,R,ut,ft],styles:[`[_nghost-%COMP%]{--primary-color: #009c4c;--primary-light: #00b359;--primary-dark: #00783a;--accent-color: #ff7979;--background-color: #fff8eb;--card-bg: #ffffff;--text-color: #333333;--text-light: #666666;--urgent-color: #e74c3c;--warning-color: #f39c12;--success-color: #27ae60;--timing-function: cubic-bezier(.34, 1.56, .64, 1)}.kds-container[_ngcontent-%COMP%]{width:100%;max-width:1800px;margin:0 auto;padding:24px;background-color:var(--background-color);min-height:100vh;background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="0 0 100 100"><rect width="100" height="100" fill="%23fff8eb"/><circle cx="10" cy="10" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="50" cy="10" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="90" cy="10" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="10" cy="50" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="50" cy="50" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="90" cy="50" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="10" cy="90" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="50" cy="90" r="2" fill="%23009c4c" opacity="0.2"/><circle cx="90" cy="90" r="2" fill="%23009c4c" opacity="0.2"/></svg>');background-attachment:fixed}.kds-header[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:16px;padding:20px 24px;margin-bottom:24px;box-shadow:0 10px 30px #00000014;display:flex;justify-content:space-between;align-items:center;animation:_ngcontent-%COMP%_slideDown .5s var(--timing-function)}@keyframes _ngcontent-%COMP%_slideDown{0%{transform:translateY(-20px);opacity:0}to{transform:translateY(0);opacity:1}}.kitchen-title[_ngcontent-%COMP%]{display:flex;align-items:center}.kitchen-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:var(--text-color);margin:0;font-weight:700;position:relative}.kitchen-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:after{content:"";position:absolute;bottom:-5px;left:0;width:60px;height:3px;background:linear-gradient(90deg,var(--primary-color),var(--primary-light));border-radius:10px;transition:width .3s ease}.kitchen-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]:hover:after{width:100%}.kitchen-logo[_ngcontent-%COMP%]{width:48px;height:48px;background-color:var(--primary-color);border-radius:50%;display:flex;justify-content:center;align-items:center;margin-right:16px;box-shadow:0 5px 15px #009c4c33;position:relative;overflow:hidden}.kitchen-logo[_ngcontent-%COMP%]:before{content:"";position:absolute;width:100%;height:100%;background:linear-gradient(45deg,transparent,rgba(255,255,255,.2),transparent);top:0;left:-100%;animation:_ngcontent-%COMP%_shimmer 3s infinite linear}@keyframes _ngcontent-%COMP%_shimmer{0%{transform:translate(0) rotate(0)}to{transform:translate(200%) rotate(0)}}.kitchen-logo[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;height:28px;width:28px}.header-actions[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.sort-select[_ngcontent-%COMP%]{width:200px;margin-bottom:-1.25em}.refresh-button[_ngcontent-%COMP%]{height:42px;background-color:var(--primary-color);transition:all .3s ease}.refresh-button[_ngcontent-%COMP%]:hover{background-color:var(--primary-dark);box-shadow:0 5px 15px #009c4c4d;transform:translateY(-2px)}.search-box[_ngcontent-%COMP%]{position:relative;width:300px}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;height:42px;padding:0 16px 0 42px;border:1px solid #e0e0e0;border-radius:8px;font-size:14px;transition:all .3s ease;box-shadow:0 2px 5px #0000000d}.search-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--primary-color);box-shadow:0 5px 15px #009c4c1a}.search-icon[_ngcontent-%COMP%]{position:absolute;left:12px;top:50%;transform:translateY(-50%);color:#9e9e9e}.kitchen-stats[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:24px;margin-bottom:24px;animation:_ngcontent-%COMP%_fadeIn .8s ease-out .2s backwards}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.stat-card[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:16px;padding:20px;box-shadow:0 10px 30px #00000014;transition:all .3s ease;position:relative;overflow:hidden}.stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 15px 35px #0000001f}.stat-card[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0;left:0;width:5px;height:100%;background:linear-gradient(to bottom,var(--primary-color),var(--primary-light));border-radius:5px 0 0 5px;transition:width .3s ease}.stat-card[_ngcontent-%COMP%]:hover:before{width:7px}.stat-title[_ngcontent-%COMP%]{font-size:16px;color:var(--text-light);margin-bottom:15px;font-weight:500}.stat-value[_ngcontent-%COMP%]{font-size:32px;font-weight:700;color:var(--text-color);display:flex;align-items:center}.stat-icon[_ngcontent-%COMP%]{width:48px;height:48px;background-color:#009c4c1a;border-radius:12px;display:flex;justify-content:center;align-items:center;margin-right:16px;transition:all .3s ease}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon[_ngcontent-%COMP%]{background-color:var(--primary-color)}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.stat-icon[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;height:28px;width:28px;color:var(--primary-color);transition:all .3s ease}.stat-icon.placed[_ngcontent-%COMP%]{background-color:#e74c3c1a}.stat-icon.placed[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--urgent-color)}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon.placed[_ngcontent-%COMP%]{background-color:var(--urgent-color)}.stat-icon.preparing[_ngcontent-%COMP%]{background-color:#f39c121a}.stat-icon.preparing[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--warning-color)}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon.preparing[_ngcontent-%COMP%]{background-color:var(--warning-color)}.stat-icon.ready[_ngcontent-%COMP%]{background-color:#27ae601a}.stat-icon.ready[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:var(--success-color)}.stat-card[_ngcontent-%COMP%]:hover   .stat-icon.ready[_ngcontent-%COMP%]{background-color:var(--success-color)}.orders-tab-container[_ngcontent-%COMP%]{background-color:var(--card-bg);border-radius:16px;box-shadow:0 10px 30px #00000014;overflow:hidden;animation:_ngcontent-%COMP%_fadeIn .8s ease-out .4s backwards}.order-tabs[_ngcontent-%COMP%]{min-height:500px}  .mat-mdc-tab-header{border-bottom:1px solid #eee}.tab-label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:24px;height:24px;padding:0 8px;border-radius:12px;background-color:#5c6bc0;color:#fff;font-size:12px;font-weight:500}.badge.urgent[_ngcontent-%COMP%]{background-color:var(--urgent-color)}.badge.warning[_ngcontent-%COMP%]{background-color:var(--warning-color)}.badge.success[_ngcontent-%COMP%]{background-color:var(--success-color)}.orders-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(360px,1fr));gap:24px;padding:24px;min-height:400px}.order-item[_ngcontent-%COMP%]{cursor:pointer;transition:transform .3s var(--timing-function),box-shadow .3s ease}.order-item[_ngcontent-%COMP%]:hover{transform:translateY(-5px) scale(1.02);box-shadow:0 15px 35px #0000001f}.no-orders[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 0;color:#9e9e9e}.no-orders[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;height:64px;width:64px;margin-bottom:24px;opacity:.5}.no-orders[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px;margin:0}@media (max-width: 1200px){.kitchen-stats[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media (max-width: 900px){.kds-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:20px}.header-actions[_ngcontent-%COMP%]{width:100%;flex-wrap:wrap}.search-box[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.kitchen-stats[_ngcontent-%COMP%], .orders-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}`]})};export{Pe as KdsDashboardComponent};
