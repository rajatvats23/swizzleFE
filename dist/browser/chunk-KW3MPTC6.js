import{a as K}from"./chunk-4YPPJSVZ.js";import{a as J}from"./chunk-7NFB522G.js";import{c as q}from"./chunk-EFAJY4UT.js";import"./chunk-TDINK5PU.js";import{a as z,b as H}from"./chunk-L2OVOT2R.js";import{g as G}from"./chunk-54ULQ5WC.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as B,b as T,c as L,f as F,h as N}from"./chunk-QTDDUBQI.js";import{a as V,b as U}from"./chunk-SWI6467K.js";import"./chunk-PTRNPYW6.js";import{a as $}from"./chunk-URY737FD.js";import"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as k}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{q as R,u as j}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as O,c as w,d as P}from"./chunk-VSTSZJ55.js";import{Bc as y,Cc as S,Db as C,Fb as h,Gb as p,Gc as I,Jc as E,Kc as D,Rb as n,Sb as l,Ta as d,Ub as b,ac as M,cb as _,cc as u,dc as A,ec as g,hb as s,ja as c,ob as r,qa as x,ra as v,xb as o,yb as t,zb as m}from"./chunk-KAD4X6AH.js";var X=i=>["/dashboard/addons/edit",i];function Y(i,a){if(i&1&&(o(0,"button",14)(1,"mat-icon",7),n(2,"edit"),t(),n(3," Edit "),t()),i&2){let e=p(2);r("routerLink",M(1,X,e.addon._id))}}function Z(i,a){if(i&1){let e=C();o(0,"button",15),h("click",function(){x(e);let W=p(2);return v(W.confirmDelete())}),o(1,"mat-icon",7),n(2,"delete"),t(),n(3," Delete "),t()}}function ee(i,a){if(i&1&&(o(0,"div",18)(1,"div",19),n(2),t(),o(3,"div",20),n(4),u(5,"currency"),t()()),i&2){let e=a.$implicit;d(2),l(e.name),d(2),l(A(5,2,e.price))}}function te(i,a){if(i&1&&(o(0,"div",16),s(1,ee,6,4,"div",17),t()),i&2){let e=p(2);d(),r("ngForOf",e.addon.subAddons)}}function ne(i,a){i&1&&(o(0,"p"),n(1,"No options available"),t())}function ie(i,a){if(i&1&&(o(0,"div",2)(1,"div",3)(2,"span",4),n(3),t(),o(4,"div",5)(5,"button",6)(6,"mat-icon",7),n(7,"arrow_back"),t(),n(8," Back to List "),t(),s(9,Y,4,3,"button",8)(10,Z,4,0,"button",9),t()(),o(11,"mat-card")(12,"mat-card-header")(13,"mat-card-title"),n(14,"Addon Details"),t()(),o(15,"mat-card-content")(16,"div",10)(17,"h3"),n(18,"Selection Type"),t(),o(19,"p"),n(20),t(),o(21,"span",11),n(22),t()(),m(23,"mat-divider"),o(24,"div",10)(25,"h3"),n(26,"Options"),t(),s(27,te,2,1,"div",12)(28,ne,2,0,"p",13),t(),m(29,"mat-divider"),o(30,"div",10)(31,"h3"),n(32,"Created By"),t(),o(33,"p"),n(34),t()(),m(35,"mat-divider"),o(36,"div",10)(37,"h3"),n(38,"Created At"),t(),o(39,"p"),n(40),u(41,"date"),t()(),m(42,"mat-divider"),o(43,"div",10)(44,"h3"),n(45,"Updated At"),t(),o(46,"p"),n(47),u(48,"date"),t()()()()()),i&2){let e=p();d(3),l(e.addon.name),d(6),r("ngIf",e.canManageAddons()),d(),r("ngIf",e.canManageAddons()),d(10),l(e.addon.isMultiSelect?"Multiple Selection":"Single Selection"),d(2),l(e.addon.isMultiSelect?"Customers can select multiple options":"Customers can select only one option"),d(5),r("ngIf",e.addon.subAddons==null?null:e.addon.subAddons.length),d(),r("ngIf",!(e.addon.subAddons!=null&&e.addon.subAddons.length)),d(6),b("",e.addon.createdBy==null?null:e.addon.createdBy.firstName," ",e.addon.createdBy==null?null:e.addon.createdBy.lastName,""),d(6),l(g(41,11,e.addon.createdAt,"medium")),d(7),l(g(48,14,e.addon.updatedAt,"medium"))}}function oe(i,a){i&1&&(o(0,"div",21)(1,"p"),n(2,"Loading addon details..."),t()())}var Q=class i{route=c(O);router=c(w);addonService=c(K);authService=c(k);snackBar=c($);dialog=c(q);addon=null;isLoading=!0;addonId="";ngOnInit(){this.addonId=this.route.snapshot.params.id,this.addonId?this.loadAddon():this.router.navigate(["/dashboard/addons"])}loadAddon(){this.isLoading=!0,this.addonService.getAddonById(this.addonId).subscribe({next:a=>{this.addon=a.data.addon,this.isLoading=!1},error:a=>{this.snackBar.open(a.error?.message||"Failed to load addon","Close",{duration:5e3}),this.isLoading=!1,this.router.navigate(["/dashboard/addons"])}})}confirmDelete(){if(!this.addon)return;this.dialog.open(J,{data:{title:"Delete Addon",message:`Are you sure you want to delete "${this.addon.name}"?`,confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().subscribe(e=>{e&&this.deleteAddon()})}deleteAddon(){this.addon&&this.addonService.deleteAddon(this.addon._id).subscribe({next:()=>{this.snackBar.open("Addon deleted successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/addons"])},error:a=>{this.snackBar.open(a.error?.message||"Error deleting addon","Close",{duration:5e3})}})}canManageAddons(){return this.authService.getCurrentUser()?.role==="manager"}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=_({type:i,selectors:[["app-addon-detail"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"container"],[1,"header-actions"],[1,"top-label"],[1,"action-buttons"],["mat-button","","color","primary","routerLink","/dashboard/addons"],[1,"material-symbols-outlined"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"info-row"],[1,"info-hint"],["class","options-container",4,"ngIf"],[4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"],[1,"options-container"],["class","option-item",4,"ngFor","ngForOf"],[1,"option-item"],[1,"option-name"],[1,"option-price"],[1,"loading-container"]],template:function(e,f){e&1&&s(0,ie,49,17,"div",0)(1,oe,3,0,"div",1),e&2&&(r("ngIf",f.addon),d(),r("ngIf",f.isLoading))},dependencies:[D,y,S,E,I,P,N,B,L,F,T,j,R,U,V,G,H,z],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.info-row[_ngcontent-%COMP%]{padding:16px 0}.info-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500;color:#666}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.info-hint[_ngcontent-%COMP%]{display:block;font-size:12px;color:#666;margin-top:4px}.options-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:12px}.option-item[_ngcontent-%COMP%]{display:flex;justify-content:space-between;padding:8px 12px;background-color:#f5f5f5;border-radius:4px}.option-name[_ngcontent-%COMP%]{font-weight:500}.option-price[_ngcontent-%COMP%]{color:#009c4c;font-weight:500}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}@media (max-width: 767px){.header-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.action-buttons[_ngcontent-%COMP%]{margin-top:10px;flex-wrap:wrap}}"]})};export{Q as AddonDetailComponent};
