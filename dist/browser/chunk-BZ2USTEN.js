import{a as Z}from"./chunk-MRIKSRXR.js";import{d as W,h as X,i as Y}from"./chunk-PXLRJANG.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as F,c as T,h as x}from"./chunk-QTDDUBQI.js";import{a as J,b as K}from"./chunk-SWI6467K.js";import{a as P,c as j,d as U}from"./chunk-2D2I2PDG.js";import{b as R,c as V,i as L}from"./chunk-PTRNPYW6.js";import{a as Q}from"./chunk-URY737FD.js";import{b as I,d as u,g as N,h as O,m as k,n as B,p as w,s as D,u as q,w as A,y as G}from"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import"./chunk-4MJ6IACY.js";import{q as z,u as H}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as S,c as M,d as E}from"./chunk-VSTSZJ55.js";import{Cc as C,Fb as _,Gb as h,Kc as y,Rb as a,Ta as m,Tb as b,cb as g,hb as p,ja as s,ob as l,xb as t,yb as e,zb as d}from"./chunk-KAD4X6AH.js";function ee(r,n){r&1&&(t(0,"mat-error"),a(1,"Table number is required"),e())}function te(r,n){r&1&&(t(0,"mat-error"),a(1,"Capacity is required"),e())}function ae(r,n){r&1&&(t(0,"mat-error"),a(1,"Capacity must be at least 1"),e())}function ie(r,n){r&1&&(t(0,"mat-form-field",6)(1,"mat-label"),a(2,"Status"),e(),t(3,"mat-select",14)(4,"mat-option",15),a(5,"Available"),e(),t(6,"mat-option",16),a(7,"Reserved"),e(),t(8,"mat-option",17),a(9,"Occupied"),e(),t(10,"mat-option",18),a(11,"Cleaning"),e(),t(12,"mat-option",19),a(13,"Out of Service"),e()()())}function re(r,n){r&1&&(t(0,"mat-error"),a(1,"Occupancy cannot be negative"),e())}function ne(r,n){if(r&1&&(t(0,"mat-form-field",6)(1,"mat-label"),a(2,"Current Occupancy"),e(),d(3,"input",20),p(4,re,2,0,"mat-error",8),e()),r&2){let i,o=h();m(4),l("ngIf",(i=o.tableForm.get("currentOccupancy"))==null?null:i.hasError("min"))}}var $=class r{fb=s(A);route=s(S);router=s(M);tableService=s(Z);snackBar=s(Q);tableForm;isEditMode=!1;isSubmitting=!1;tableId="";ngOnInit(){alert(),this.initForm(),this.tableId=this.route.snapshot.params.id,this.isEditMode=!!this.tableId,this.isEditMode&&this.loadTableData()}initForm(){this.tableForm=this.fb.group({tableNumber:["",u.required],capacity:[1,[u.required,u.min(1)]],status:["Available"],currentOccupancy:[0,u.min(0)]})}loadTableData(){this.tableService.getTableById(this.tableId).subscribe({next:n=>{let i=n.data.table;this.tableForm.patchValue({tableNumber:i.tableNumber,capacity:i.capacity,status:i.status,currentOccupancy:i.currentOccupancy})},error:n=>{this.snackBar.open(n.error?.message||"Failed to load table","Close",{duration:5e3}),this.router.navigate(["/tables"])}})}onSubmit(){if(this.tableForm.invalid)return;this.isSubmitting=!0;let n=this.tableForm.value;this.isEditMode?this.tableService.updateTable(this.tableId,n).subscribe({next:()=>{this.snackBar.open("Table updated successfully","Close",{duration:3e3}),this.router.navigate(["/tables"])},error:i=>{this.isSubmitting=!1,this.snackBar.open(i.error?.message||"Failed to update table","Close",{duration:5e3})}}):this.tableService.createTable(n).subscribe({next:()=>{this.snackBar.open("Table created successfully","Close",{duration:3e3}),this.router.navigate(["/tables"])},error:i=>{this.isSubmitting=!1,this.snackBar.open(i.error?.message||"Failed to create table","Close",{duration:5e3})}})}static \u0275fac=function(i){return new(i||r)};static \u0275cmp=g({type:r,selectors:[["app-table-form"]],decls:29,vars:9,consts:[[1,"container"],[1,"header-actions"],[1,"top-label"],["mat-button","","color","primary","routerLink","/tables"],[1,"material-symbols-outlined"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"full-width"],["matInput","","formControlName","tableNumber","placeholder","Enter table number"],[4,"ngIf"],["matInput","","formControlName","capacity","type","number","min","1","placeholder","Enter capacity"],["appearance","outline","class","full-width",4,"ngIf"],[1,"form-actions"],["mat-button","","type","button","routerLink","/tables"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["formControlName","status"],["value","Available"],["value","Reserved"],["value","Occupied"],["value","Cleaning"],["value","Out of Service"],["matInput","","formControlName","currentOccupancy","type","number","min","0"]],template:function(i,o){if(i&1&&(t(0,"div",0)(1,"div",1)(2,"span",2),a(3),e(),t(4,"button",3)(5,"mat-icon",4),a(6,"arrow_back"),e(),a(7," Back to List "),e()(),t(8,"mat-card")(9,"mat-card-content")(10,"form",5),_("ngSubmit",function(){return o.onSubmit()}),t(11,"mat-form-field",6)(12,"mat-label"),a(13,"Table Number"),e(),d(14,"input",7),p(15,ee,2,0,"mat-error",8),e(),t(16,"mat-form-field",6)(17,"mat-label"),a(18,"Capacity"),e(),d(19,"input",9),p(20,te,2,0,"mat-error",8)(21,ae,2,0,"mat-error",8),e(),p(22,ie,14,0,"mat-form-field",10)(23,ne,5,1,"mat-form-field",10),t(24,"div",11)(25,"button",12),a(26,"Cancel"),e(),t(27,"button",13),a(28),e()()()()()()),i&2){let c,f,v;m(3),b("",o.isEditMode?"Edit":"Create"," Table"),m(7),l("formGroup",o.tableForm),m(5),l("ngIf",(c=o.tableForm.get("tableNumber"))==null?null:c.hasError("required")),m(5),l("ngIf",(f=o.tableForm.get("capacity"))==null?null:f.hasError("required")),m(),l("ngIf",(v=o.tableForm.get("capacity"))==null?null:v.hasError("min")),m(),l("ngIf",o.isEditMode),m(),l("ngIf",o.isEditMode),m(4),l("disabled",o.tableForm.invalid||o.isSubmitting),m(),b(" ",o.isSubmitting?"Saving...":o.isEditMode?"Update":"Create"," ")}},dependencies:[y,C,G,k,I,B,N,O,q,w,D,E,P,L,R,V,U,j,H,z,Y,X,W,x,F,T,K,J],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end}"]})};export{$ as TableFormComponent};
