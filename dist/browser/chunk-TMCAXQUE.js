import{a as U}from"./chunk-DXQHYOCY.js";import"./chunk-TDINK5PU.js";import{a as j,b as F}from"./chunk-L2OVOT2R.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as B,c as L,h as O}from"./chunk-QTDDUBQI.js";import{a as A,b as N}from"./chunk-SWI6467K.js";import{a as R}from"./chunk-URY737FD.js";import"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as w}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{q as P,u as T}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as E,c as D,d as k}from"./chunk-VSTSZJ55.js";import{Cc as b,Db as M,Fb as h,Gb as s,Gc as y,Kc as S,Rb as i,Sb as l,Ta as r,Ub as C,ac as I,cb as x,cc as f,ec as v,hb as c,ja as d,ob as m,qa as g,ra as _,xb as a,yb as t,zb as u}from"./chunk-KAD4X6AH.js";var q=n=>["/dashboard/menus/edit",n];function z(n,o){if(n&1&&(a(0,"button",13)(1,"mat-icon",7),i(2,"edit"),t(),i(3," Edit "),t()),n&2){let e=s(2);m("routerLink",I(1,q,e.menu._id))}}function G(n,o){if(n&1){let e=M();a(0,"button",14),h("click",function(){g(e);let $=s(2);return _($.confirmDelete())}),a(1,"mat-icon",7),i(2,"delete"),t(),i(3," Delete "),t()}}function H(n,o){if(n&1&&(a(0,"div",12)(1,"h3"),i(2,"Description"),t(),a(3,"p"),i(4),t()()),n&2){let e=s(2);r(4),l(e.menu.description)}}function J(n,o){n&1&&u(0,"mat-divider")}function K(n,o){if(n&1&&(a(0,"div",2)(1,"div",3)(2,"span",4),i(3),t(),a(4,"div",5)(5,"button",6)(6,"mat-icon",7),i(7,"arrow_back"),t(),i(8," Back to List "),t(),c(9,z,4,3,"button",8)(10,G,4,0,"button",9),t()(),a(11,"mat-card")(12,"mat-card-content"),c(13,H,5,1,"div",10)(14,J,1,0,"mat-divider",11),a(15,"div",12)(16,"h3"),i(17,"Restaurant"),t(),a(18,"p"),i(19),t()(),u(20,"mat-divider"),a(21,"div",12)(22,"h3"),i(23,"Created By"),t(),a(24,"p"),i(25),t()(),u(26,"mat-divider"),a(27,"div",12)(28,"h3"),i(29,"Created At"),t(),a(30,"p"),i(31),f(32,"date"),t()(),u(33,"mat-divider"),a(34,"div",12)(35,"h3"),i(36,"Updated At"),t(),a(37,"p"),i(38),f(39,"date"),t()()()()()),n&2){let e=s();r(3),l(e.menu.name),r(6),m("ngIf",e.canManageMenu()),r(),m("ngIf",e.canManageMenu()),r(3),m("ngIf",e.menu.description),r(),m("ngIf",e.menu.description),r(5),l((e.menu.restaurantId==null?null:e.menu.restaurantId.name)||"Unknown"),r(6),C("",e.menu.createdBy==null?null:e.menu.createdBy.firstName," ",e.menu.createdBy==null?null:e.menu.createdBy.lastName,""),r(6),l(v(32,10,e.menu.createdAt,"medium")),r(7),l(v(39,13,e.menu.updatedAt,"medium"))}}function Q(n,o){n&1&&(a(0,"div",15)(1,"p"),i(2,"Loading menu details..."),t()())}var V=class n{route=d(E);router=d(D);menuService=d(U);authService=d(w);snackBar=d(R);menu=null;isLoading=!0;menuId="";ngOnInit(){this.menuId=this.route.snapshot.params.id,this.menuId?this.loadMenu():this.router.navigate(["/dashboard/menus"])}loadMenu(){this.isLoading=!0,this.menuService.getMenuById(this.menuId).subscribe({next:o=>{this.menu=o.data.menu,this.isLoading=!1},error:o=>{this.snackBar.open(o.error?.message||"Failed to load menu","Close",{duration:5e3}),this.isLoading=!1,this.router.navigate(["/dashboard/menus"])}})}canManageMenu(){if(!this.menu)return!1;let o=this.authService.getCurrentUser();return!o||o.role!=="manager"?!1:o.restaurantId===this.menu.restaurantId._id}confirmDelete(){confirm(`Are you sure you want to delete "${this.menu?.name}"?`)&&this.deleteMenu()}deleteMenu(){this.menuService.deleteMenu(this.menuId).subscribe({next:()=>{this.snackBar.open("Menu deleted successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/menus"])},error:o=>{this.snackBar.open(o.error?.message||"Error deleting menu","Close",{duration:5e3})}})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=x({type:n,selectors:[["app-menu-detail"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"container"],[1,"header-actions"],[1,"top-label"],[1,"action-buttons"],["mat-button","","color","primary","routerLink","/dashboard/menus"],[1,"material-symbols-outlined"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","info-row",4,"ngIf"],[4,"ngIf"],[1,"info-row"],["mat-raised-button","","color","accent",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"],[1,"loading-container"]],template:function(e,p){e&1&&c(0,K,40,16,"div",0)(1,Q,3,0,"div",1),e&2&&(m("ngIf",p.menu),r(),m("ngIf",p.isLoading))},dependencies:[S,b,y,k,O,B,L,T,P,N,A,F,j],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.info-row[_ngcontent-%COMP%]{padding:16px 0}.info-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500;color:#666}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}"]})};export{V as MenuDetailComponent};
