import{b as ce,c as fe,d as ge}from"./chunk-EFQTXQPC.js";import{a as pe}from"./chunk-PVMEQWGV.js";import{a as de,b as ue}from"./chunk-QTPJ4F3S.js";import{b as le,g as se}from"./chunk-Q73V3MFL.js";import{b as oe}from"./chunk-T763PW3Z.js";import{i as me}from"./chunk-KUJCRXF6.js";import"./chunk-MPZJ55NE.js";import"./chunk-4NNSIX2F.js";import{a as T,b as q,c as B,d as G,f as H,g as k,h as L}from"./chunk-X4H6S6WA.js";import{a as re,b as ne}from"./chunk-FNZWV5VH.js";import{a as Z,c as $,d as ee}from"./chunk-SG7MWKE6.js";import{b as K,c as Q,i as X}from"./chunk-TFWZGPIA.js";import{a as ie}from"./chunk-MXW2SQ2E.js";import{b as V,d as c,g as D,h as A,m as z,p as j,q as W,s as Y,x as U,z as J}from"./chunk-CG6HKZKU.js";import"./chunk-YE4XPGXQ.js";import"./chunk-4MJ6IACY.js";import{q as te,u as ae}from"./chunk-QRFS6CQK.js";import"./chunk-24M76UXH.js";import{c as O}from"./chunk-A2KXSCJD.js";import{Cc as P,Db as M,Fb as v,Fc as N,Gb as g,Kc as R,Rb as a,Sb as I,Ta as l,Tb as h,cb as E,cc as F,dc as w,hb as d,ja as f,ob as s,qa as b,ra as _,xb as t,yb as e,zb as r}from"./chunk-Q5RHU532.js";function be(o,n){o&1&&(t(0,"mat-card",45)(1,"mat-card-header")(2,"mat-icon",46),a(3,"warning"),e(),t(4,"mat-card-title"),a(5,"Complete Your Restaurant Setup"),e(),t(6,"mat-card-subtitle"),a(7,"Please complete the basic information to make your restaurant visible"),e()(),t(8,"mat-card-content")(9,"p"),a(10,"Your restaurant profile is incomplete. Fill in all required fields to increase your completion percentage."),e()()())}function _e(o,n){o&1&&(t(0,"mat-error"),a(1,"Name is required"),e())}function ve(o,n){o&1&&(t(0,"mat-error"),a(1,"Email is required"),e())}function xe(o,n){o&1&&(t(0,"mat-error"),a(1,"Enter a valid email"),e())}function ye(o,n){o&1&&(t(0,"mat-error"),a(1,"Phone is required"),e())}function Ce(o,n){o&1&&(t(0,"mat-error"),a(1,"Address is required"),e())}function Se(o,n){o&1&&(t(0,"mat-error"),a(1,"City is required"),e())}function Ee(o,n){o&1&&(t(0,"mat-error"),a(1,"Country is required"),e())}function Me(o,n){if(o&1){let m=M();t(0,"div",2)(1,"div",3)(2,"span",4),a(3,"My Restaurant"),e(),t(4,"div",5),r(5,"mat-progress-bar",6),t(6,"div",7)(7,"span"),a(8),e(),t(9,"mat-chip",8),a(10),F(11,"titlecase"),e()()()(),d(12,be,11,0,"mat-card",9),t(13,"mat-card")(14,"mat-card-content")(15,"mat-tab-group")(16,"mat-tab",10)(17,"form",11),v("ngSubmit",function(){b(m);let p=g();return _(p.onSubmitBasicInfo())}),t(18,"div",12)(19,"mat-form-field",13)(20,"mat-label"),a(21,"Restaurant Name"),e(),r(22,"input",14),d(23,_e,2,0,"mat-error",15),e()(),t(24,"div",16)(25,"mat-form-field",17)(26,"mat-label"),a(27,"Email"),e(),r(28,"input",18),d(29,ve,2,0,"mat-error",15)(30,xe,2,0,"mat-error",15),e(),t(31,"mat-form-field",17)(32,"mat-label"),a(33,"Phone"),e(),r(34,"input",19),d(35,ye,2,0,"mat-error",15),e()(),t(36,"div",12)(37,"mat-form-field",13)(38,"mat-label"),a(39,"Description"),e(),r(40,"textarea",20),e()(),t(41,"div",16)(42,"mat-form-field",17)(43,"mat-label"),a(44,"Cuisine Type"),e(),r(45,"input",21),e(),t(46,"mat-form-field",17)(47,"mat-label"),a(48,"Website"),e(),r(49,"input",22),e()(),t(50,"div",23)(51,"button",24),a(52),e()()()(),t(53,"mat-tab",25)(54,"form",11),v("ngSubmit",function(){b(m);let p=g();return _(p.onSubmitLocation())}),t(55,"div",12)(56,"mat-form-field",13)(57,"mat-label"),a(58,"Address"),e(),r(59,"input",26),d(60,Ce,2,0,"mat-error",15),e()(),t(61,"div",16)(62,"mat-form-field",17)(63,"mat-label"),a(64,"City"),e(),r(65,"input",27),d(66,Se,2,0,"mat-error",15),e(),t(67,"mat-form-field",17)(68,"mat-label"),a(69,"State/Province"),e(),r(70,"input",28),e()(),t(71,"div",16)(72,"mat-form-field",17)(73,"mat-label"),a(74,"Postal Code"),e(),r(75,"input",29),e(),t(76,"mat-form-field",17)(77,"mat-label"),a(78,"Country"),e(),r(79,"input",30),d(80,Ee,2,0,"mat-error",15),e()(),t(81,"div",23)(82,"button",24),a(83),e()()()(),t(84,"mat-tab",31)(85,"form",11),v("ngSubmit",function(){b(m);let p=g();return _(p.onSubmitHours())}),t(86,"div",32)(87,"div",33)(88,"h3"),a(89,"Monday"),e(),t(90,"div",34)(91,"mat-form-field",17)(92,"mat-label"),a(93,"Open"),e(),r(94,"input",35),e(),t(95,"mat-form-field",17)(96,"mat-label"),a(97,"Close"),e(),r(98,"input",36),e()()(),t(99,"div",37)(100,"h3"),a(101,"Tuesday"),e(),t(102,"div",34)(103,"mat-form-field",17)(104,"mat-label"),a(105,"Open"),e(),r(106,"input",35),e(),t(107,"mat-form-field",17)(108,"mat-label"),a(109,"Close"),e(),r(110,"input",36),e()()(),t(111,"div",38)(112,"h3"),a(113,"Wednesday"),e(),t(114,"div",34)(115,"mat-form-field",17)(116,"mat-label"),a(117,"Open"),e(),r(118,"input",35),e(),t(119,"mat-form-field",17)(120,"mat-label"),a(121,"Close"),e(),r(122,"input",36),e()()(),t(123,"div",39)(124,"h3"),a(125,"Thursday"),e(),t(126,"div",34)(127,"mat-form-field",17)(128,"mat-label"),a(129,"Open"),e(),r(130,"input",35),e(),t(131,"mat-form-field",17)(132,"mat-label"),a(133,"Close"),e(),r(134,"input",36),e()()(),t(135,"div",40)(136,"h3"),a(137,"Friday"),e(),t(138,"div",34)(139,"mat-form-field",17)(140,"mat-label"),a(141,"Open"),e(),r(142,"input",35),e(),t(143,"mat-form-field",17)(144,"mat-label"),a(145,"Close"),e(),r(146,"input",36),e()()(),t(147,"div",41)(148,"h3"),a(149,"Saturday"),e(),t(150,"div",34)(151,"mat-form-field",17)(152,"mat-label"),a(153,"Open"),e(),r(154,"input",42),e(),t(155,"mat-form-field",17)(156,"mat-label"),a(157,"Close"),e(),r(158,"input",43),e()()(),t(159,"div",44)(160,"h3"),a(161,"Sunday"),e(),t(162,"div",34)(163,"mat-form-field",17)(164,"mat-label"),a(165,"Open"),e(),r(166,"input",42),e(),t(167,"mat-form-field",17)(168,"mat-label"),a(169,"Close"),e(),r(170,"input",43),e()()()(),t(171,"div",23)(172,"button",24),a(173),e()()()()()()()()}if(o&2){let m,u,p,x,y,C,S,i=g();l(5),s("value",i.restaurant.completionPercentage)("color",i.getProgressColor(i.restaurant.completionPercentage)),l(3),h("Profile Completion: ",i.restaurant.completionPercentage,"%"),l(),s("color",i.getStatusColor(i.restaurant.status)),l(),I(w(11,22,i.restaurant.status)),l(2),s("ngIf",!i.restaurant.isBasicSetupComplete),l(5),s("formGroup",i.basicInfoForm),l(6),s("ngIf",(m=i.basicInfoForm.get("name"))==null?null:m.hasError("required")),l(6),s("ngIf",(u=i.basicInfoForm.get("email"))==null?null:u.hasError("required")),l(),s("ngIf",(p=i.basicInfoForm.get("email"))==null?null:p.hasError("email")),l(5),s("ngIf",(x=i.basicInfoForm.get("phone"))==null?null:x.hasError("required")),l(16),s("disabled",i.basicInfoForm.invalid||i.isSubmitting),l(),h(" ",i.isSubmitting?"Saving...":"Save Changes"," "),l(2),s("formGroup",i.locationForm),l(6),s("ngIf",(y=i.locationForm.get("address"))==null?null:y.hasError("required")),l(6),s("ngIf",(C=i.locationForm.get("city"))==null?null:C.hasError("required")),l(14),s("ngIf",(S=i.locationForm.get("country"))==null?null:S.hasError("required")),l(2),s("disabled",i.locationForm.invalid||i.isSubmitting),l(),h(" ",i.isSubmitting?"Saving...":"Save Changes"," "),l(2),s("formGroup",i.hoursForm),l(87),s("disabled",i.isSubmitting),l(),h(" ",i.isSubmitting?"Saving...":"Save Hours"," ")}}function Ie(o,n){o&1&&(t(0,"div",47)(1,"p"),a(2,"Loading restaurant details..."),e()())}var he=class o{fb=f(U);restaurantService=f(pe);snackBar=f(ie);router=f(O);restaurant=null;isLoading=!0;isSubmitting=!1;basicInfoForm;locationForm;hoursForm;ngOnInit(){this.initForms(),this.loadRestaurant()}initForms(){this.basicInfoForm=this.fb.group({name:["",c.required],email:["",[c.required,c.email]],phone:["",c.required],description:[""],cuisineType:[""],website:[""]}),this.locationForm=this.fb.group({address:["",c.required],city:["",c.required],state:[""],zipCode:[""],country:["",c.required]}),this.hoursForm=this.fb.group({monday:this.fb.group({open:[""],close:[""]}),tuesday:this.fb.group({open:[""],close:[""]}),wednesday:this.fb.group({open:[""],close:[""]}),thursday:this.fb.group({open:[""],close:[""]}),friday:this.fb.group({open:[""],close:[""]}),saturday:this.fb.group({open:[""],close:[""]}),sunday:this.fb.group({open:[""],close:[""]})})}loadRestaurant(){this.isLoading=!0,this.restaurantService.getManagerRestaurant().subscribe({next:n=>{this.restaurant=n.data.restaurant,this.populateForms(),this.isLoading=!1},error:n=>{this.snackBar.open(n.error?.message||"Failed to load restaurant","Close",{duration:5e3}),this.isLoading=!1}})}populateForms(){this.restaurant&&(this.basicInfoForm.patchValue({name:this.restaurant.name,email:this.restaurant.email,phone:this.restaurant.phone,description:this.restaurant.description||"",cuisineType:this.restaurant.cuisineType||"",website:this.restaurant.website||""}),this.locationForm.patchValue({address:this.restaurant.address,city:this.restaurant.city,state:this.restaurant.state||"",zipCode:this.restaurant.zipCode||"",country:this.restaurant.country}),this.restaurant.operatingHours&&this.hoursForm.patchValue({monday:this.restaurant.operatingHours.monday||{open:"",close:""},tuesday:this.restaurant.operatingHours.tuesday||{open:"",close:""},wednesday:this.restaurant.operatingHours.wednesday||{open:"",close:""},thursday:this.restaurant.operatingHours.thursday||{open:"",close:""},friday:this.restaurant.operatingHours.friday||{open:"",close:""},saturday:this.restaurant.operatingHours.saturday||{open:"",close:""},sunday:this.restaurant.operatingHours.sunday||{open:"",close:""}}))}onSubmitBasicInfo(){if(this.basicInfoForm.invalid||!this.restaurant)return;this.isSubmitting=!0;let n=this.basicInfoForm.value;this.restaurantService.updateRestaurant(this.restaurant._id,n).subscribe({next:m=>{this.restaurant=m.data.restaurant,this.snackBar.open("Restaurant information updated successfully","Close",{duration:3e3}),this.isSubmitting=!1},error:m=>{this.snackBar.open(m.error?.message||"Failed to update restaurant","Close",{duration:5e3}),this.isSubmitting=!1}})}onSubmitLocation(){if(this.locationForm.invalid||!this.restaurant)return;this.isSubmitting=!0;let n=this.locationForm.value;this.restaurantService.updateRestaurant(this.restaurant._id,n).subscribe({next:m=>{this.restaurant=m.data.restaurant,this.snackBar.open("Location information updated successfully","Close",{duration:3e3}),this.isSubmitting=!1},error:m=>{this.snackBar.open(m.error?.message||"Failed to update location","Close",{duration:5e3}),this.isSubmitting=!1}})}onSubmitHours(){if(!this.restaurant)return;this.isSubmitting=!0;let n=this.hoursForm.value;this.restaurantService.updateRestaurant(this.restaurant._id,{operatingHours:n}).subscribe({next:m=>{this.restaurant=m.data.restaurant,this.snackBar.open("Operating hours updated successfully","Close",{duration:3e3}),this.isSubmitting=!1},error:m=>{this.snackBar.open(m.error?.message||"Failed to update operating hours","Close",{duration:5e3}),this.isSubmitting=!1}})}getStatusColor(n){switch(n){case"active":return"primary";case"inactive":return"warn";default:return"accent"}}getProgressColor(n){return n<30?"warn":n<70?"accent":"primary"}static \u0275fac=function(m){return new(m||o)};static \u0275cmp=E({type:o,selectors:[["app-manager-restaurant"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"container"],[1,"header-section"],[1,"top-label"],[1,"status-container"],[3,"value","color"],[1,"status-info"],["selected","",3,"color"],["class","alert-card",4,"ngIf"],["label","Basic Information"],[1,"tab-content",3,"ngSubmit","formGroup"],[1,"form-row"],["appearance","outline",1,"full-width"],["matInput","","formControlName","name","placeholder","Enter restaurant name"],[4,"ngIf"],[1,"form-row","two-col"],["appearance","outline"],["matInput","","formControlName","email","type","email","placeholder","Enter email"],["matInput","","formControlName","phone","placeholder","Enter phone number"],["matInput","","formControlName","description","rows","3","placeholder","Enter a description of your restaurant"],["matInput","","formControlName","cuisineType","placeholder","E.g., Italian, Indian, etc."],["matInput","","formControlName","website","placeholder","Enter website URL"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["label","Location"],["matInput","","formControlName","address","placeholder","Enter street address"],["matInput","","formControlName","city","placeholder","Enter city"],["matInput","","formControlName","state","placeholder","Enter state or province"],["matInput","","formControlName","zipCode","placeholder","Enter postal code"],["matInput","","formControlName","country","placeholder","Enter country"],["label","Operating Hours"],[1,"hours-grid"],["formGroupName","monday",1,"day-hours"],[1,"hours-row"],["matInput","","formControlName","open","placeholder","e.g., 9:00 AM"],["matInput","","formControlName","close","placeholder","e.g., 5:00 PM"],["formGroupName","tuesday",1,"day-hours"],["formGroupName","wednesday",1,"day-hours"],["formGroupName","thursday",1,"day-hours"],["formGroupName","friday",1,"day-hours"],["formGroupName","saturday",1,"day-hours"],["matInput","","formControlName","open","placeholder","e.g., 10:00 AM"],["matInput","","formControlName","close","placeholder","e.g., 3:00 PM"],["formGroupName","sunday",1,"day-hours"],[1,"alert-card"],["mat-card-avatar",""],[1,"loading-container"]],template:function(m,u){m&1&&d(0,Me,174,24,"div",0)(1,Ie,3,0,"div",1),m&2&&(s("ngIf",u.restaurant),l(),s("ngIf",u.isLoading))},dependencies:[R,P,N,J,z,V,D,A,j,Y,W,L,T,k,B,H,G,q,ae,te,ne,re,se,le,ue,de,Z,X,K,Q,ee,$,me,oe,ge,ce,fe],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-section[_ngcontent-%COMP%]{margin-bottom:20px}.status-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:4px;padding:16px;margin-top:20px;box-shadow:0 2px 4px #0000001a}.status-info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:10px}.alert-card[_ngcontent-%COMP%]{margin-bottom:20px;background-color:#fff8e1}.tab-content[_ngcontent-%COMP%]{padding:20px 0}.form-row[_ngcontent-%COMP%]{margin-bottom:20px}.two-col[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{display:flex;gap:20px}.full-width[_ngcontent-%COMP%]{width:100%}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;margin-top:20px}.hours-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.day-hours[_ngcontent-%COMP%]{margin-bottom:20px}.hours-row[_ngcontent-%COMP%]{display:flex;gap:10px}.hours-row[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}h3[_ngcontent-%COMP%]{margin-top:0;margin-bottom:10px;font-size:16px;font-weight:500}@media (max-width: 600px){.two-col[_ngcontent-%COMP%], .hours-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}"]})};export{he as ManagerRestaurantComponent};
