import{a as he}from"./chunk-VR5R2KS7.js";import{a as E}from"./chunk-36JF3GAO.js";import{a as re,b as oe,c as me,d as le,e as de}from"./chunk-23EO6ODS.js";import{a as pe,b as se,c as ce,d as ue,e as fe,f as ye,g as Me,h as _e,i as ge,j as Ce,l as ve}from"./chunk-66KDBNKL.js";import"./chunk-MRNGONWI.js";import{d as ie,h as ne,i as ae}from"./chunk-KUJCRXF6.js";import"./chunk-MPZJ55NE.js";import"./chunk-4NNSIX2F.js";import{a as W,b as F,c as V,f as H,h as L}from"./chunk-X4H6S6WA.js";import{b as ee}from"./chunk-FNZWV5VH.js";import{a as Q,c as X,d as Y}from"./chunk-SG7MWKE6.js";import{b as q,f as J,i as K}from"./chunk-TFWZGPIA.js";import{a as te}from"./chunk-MXW2SQ2E.js";import{b as A,g as j,l as z,y as U,z as G}from"./chunk-CG6HKZKU.js";import"./chunk-YE4XPGXQ.js";import"./chunk-4MJ6IACY.js";import{q as Z,u as $}from"./chunk-QRFS6CQK.js";import"./chunk-24M76UXH.js";import{$b as P,Ab as C,Bb as v,Cc as T,Db as I,Fb as b,Gb as k,Gc as B,Jc as O,Kc as N,Qb as w,Rb as i,Sb as d,Ta as r,Wb as h,Xb as x,Yb as D,cb as R,cc as s,ec as c,hb as y,ja as S,ob as p,qa as M,ra as _,xb as t,yb as e,zb as g}from"./chunk-Q5RHU532.js";var xe=()=>["date","amount","count"];function Se(n,o){n&1&&(t(0,"th",32),i(1,"Date"),e())}function we(n,o){if(n&1&&(t(0,"td",33),i(1),s(2,"date"),e()),n&2){let a=o.$implicit;r(),d(c(2,1,a.date,"mediumDate"))}}function Pe(n,o){n&1&&(t(0,"th",32),i(1,"Amount"),e())}function Ee(n,o){if(n&1&&(t(0,"td",33),i(1),s(2,"currency"),e()),n&2){let a=o.$implicit;r(),d(c(2,1,a.amount,"INR"))}}function Re(n,o){n&1&&(t(0,"th",32),i(1,"Payment Count"),e())}function Ie(n,o){if(n&1&&(t(0,"td",33),i(1),e()),n&2){let a=o.$implicit;r(),d(a.count)}}function be(n,o){n&1&&g(0,"tr",34)}function ke(n,o){n&1&&g(0,"tr",35)}function Te(n,o){if(n&1&&(t(0,"div",18)(1,"mat-card",19)(2,"mat-card-header")(3,"mat-card-title"),i(4,"Payment Summary"),e()(),t(5,"mat-card-content")(6,"div",20)(7,"div",21)(8,"div",22),i(9,"Total Amount"),e(),t(10,"div",23),i(11),s(12,"currency"),e()(),t(13,"div",21)(14,"div",22),i(15,"Payment Count"),e(),t(16,"div",23),i(17),e()(),t(18,"div",21)(19,"div",22),i(20,"Cash Payments"),e(),t(21,"div",23),i(22),s(23,"currency"),e()(),t(24,"div",21)(25,"div",22),i(26,"Card Payments"),e(),t(27,"div",23),i(28),s(29,"currency"),e()(),t(30,"div",21)(31,"div",22),i(32,"UPI Payments"),e(),t(33,"div",23),i(34),s(35,"currency"),e()(),t(36,"div",21)(37,"div",22),i(38,"Wallet Payments"),e(),t(39,"div",23),i(40),s(41,"currency"),e()()()()(),t(42,"mat-card")(43,"mat-card-header")(44,"mat-card-title"),i(45,"Daily Totals"),e()(),t(46,"mat-card-content")(47,"table",24),C(48,25),y(49,Se,2,0,"th",26)(50,we,3,4,"td",27),v(),C(51,28),y(52,Pe,2,0,"th",26)(53,Ee,3,4,"td",27),v(),C(54,29),y(55,Re,2,0,"th",26)(56,Ie,2,1,"td",27),v(),y(57,be,1,0,"tr",30)(58,ke,1,0,"tr",31),e()()()()),n&2){let a=k();r(11),d(c(12,9,a.report.summary.totalAmount,"INR")),r(6),d(a.report.summary.paymentCount),r(5),d(c(23,12,a.report.summary.methodBreakdown.cash,"INR")),r(6),d(c(29,15,a.report.summary.methodBreakdown.card,"INR")),r(6),d(c(35,18,a.report.summary.methodBreakdown.upi,"INR")),r(6),d(c(41,21,a.report.summary.methodBreakdown.wallet,"INR")),r(7),p("dataSource",a.report.dailyTotals),r(10),p("matHeaderRowDef",P(24,xe)),r(),p("matRowDefColumns",P(25,xe))}}var De=class n{paymentService=S(he);snackBar=S(te);startDate=new Date;endDate=new Date;paymentMethod="";isLoading=!1;report=null;ngOnInit(){this.startDate=new Date,this.startDate.setDate(this.startDate.getDate()-30),this.endDate=new Date}generateReport(){this.isLoading=!0;let o=E(this.startDate,"yyyy-MM-dd"),a=E(this.endDate,"yyyy-MM-dd");this.paymentService.getPaymentReports(o,a,this.paymentMethod).subscribe({next:m=>{this.report=m.data,this.isLoading=!1},error:m=>{this.snackBar.open(m.error?.message||"Failed to generate report","Close",{duration:5e3}),this.isLoading=!1}})}static \u0275fac=function(a){return new(a||n)};static \u0275cmp=R({type:n,selectors:[["app-payment-reports"]],decls:38,vars:8,consts:[["startPicker",""],["endPicker",""],[1,"container"],[1,"header-actions"],[1,"header-title"],[1,"filter-card"],[1,"filter-row"],["appearance","outline"],["matInput","",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],[3,"ngModelChange","ngModel"],[3,"value"],["value","cash"],["value","card"],["value","upi"],["value","wallet"],["mat-raised-button","","color","primary",3,"click"],["class","report-container",4,"ngIf"],[1,"report-container"],[1,"summary-card"],[1,"summary-grid"],[1,"summary-item"],[1,"summary-label"],[1,"summary-value"],["mat-table","",1,"daily-table",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","amount"],["matColumnDef","count"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(a,m){if(a&1){let u=I();t(0,"div",2)(1,"div",3)(2,"span",4),i(3,"Payment Reports"),e()(),t(4,"mat-card",5)(5,"mat-card-content")(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),i(9,"Start Date"),e(),t(10,"input",8),D("ngModelChange",function(l){return M(u),x(m.startDate,l)||(m.startDate=l),_(l)}),e(),g(11,"mat-datepicker-toggle",9)(12,"mat-datepicker",null,0),e(),t(14,"mat-form-field",7)(15,"mat-label"),i(16,"End Date"),e(),t(17,"input",8),D("ngModelChange",function(l){return M(u),x(m.endDate,l)||(m.endDate=l),_(l)}),e(),g(18,"mat-datepicker-toggle",9)(19,"mat-datepicker",null,1),e(),t(21,"mat-form-field",7)(22,"mat-label"),i(23,"Payment Method"),e(),t(24,"mat-select",10),D("ngModelChange",function(l){return M(u),x(m.paymentMethod,l)||(m.paymentMethod=l),_(l)}),t(25,"mat-option",11),i(26,"All Methods"),e(),t(27,"mat-option",12),i(28,"Cash"),e(),t(29,"mat-option",13),i(30,"Card"),e(),t(31,"mat-option",14),i(32,"UPI"),e(),t(33,"mat-option",15),i(34,"Wallet"),e()()(),t(35,"button",16),b("click",function(){return M(u),_(m.generateReport())}),i(36," Generate Report "),e()()()(),y(37,Te,59,26,"div",17),e()}if(a&2){let u=w(13),f=w(20);r(10),p("matDatepicker",u),h("ngModel",m.startDate),r(),p("for",u),r(6),p("matDatepicker",f),h("ngModel",m.endDate),r(),p("for",f),r(6),h("ngModel",m.paymentMethod),r(13),p("ngIf",m.report)}},dependencies:[N,T,O,B,U,A,j,z,G,L,W,V,H,F,$,Z,ee,le,re,oe,me,de,Q,K,q,J,Y,X,ae,ne,ie,ve,pe,ce,Me,ue,se,_e,fe,ye,ge,Ce],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.filter-card[_ngcontent-%COMP%]{margin-bottom:20px}.filter-row[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center;flex-wrap:wrap}.summary-card[_ngcontent-%COMP%]{margin-bottom:20px}.summary-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}.summary-item[_ngcontent-%COMP%]{background-color:#f5f5f5;padding:16px;border-radius:4px}.summary-label[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:8px}.summary-value[_ngcontent-%COMP%]{font-size:24px;font-weight:500}.daily-table[_ngcontent-%COMP%]{width:100%}@media (max-width: 768px){.filter-row[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}}"]})};export{De as PaymentReportsComponent};
