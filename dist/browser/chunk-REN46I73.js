import{a as V,b as A}from"./chunk-FNZWV5VH.js";import{a as B,c as O,d as G}from"./chunk-SG7MWKE6.js";import{b as k,c as N,f as q,i as T}from"./chunk-TFWZGPIA.js";import{a as j,b as J}from"./chunk-MXW2SQ2E.js";import{b as w,d,g as I,h as y,i as x,k as g,m as E,p as F,s as L,z as P}from"./chunk-CG6HKZKU.js";import"./chunk-YE4XPGXQ.js";import{a as C}from"./chunk-DAAD4K4P.js";import"./chunk-4MJ6IACY.js";import{n as D,q as R,u as z}from"./chunk-QRFS6CQK.js";import"./chunk-24M76UXH.js";import{c as S,d as v}from"./chunk-A2KXSCJD.js";import{Cc as b,Fb as u,Kc as M,P as c,Rb as r,Sb as h,Ta as a,cb as _,hb as p,ja as l,ob as m,xb as t,yb as e,zb as f}from"./chunk-Q5RHU532.js";function H(o,n){o&1&&(t(0,"mat-error"),r(1,"Email is required"),e())}function K(o,n){o&1&&(t(0,"mat-error"),r(1,"Please enter a valid email"),e())}function Q(o,n){o&1&&(t(0,"mat-error"),r(1,"Password is required"),e())}function U(o,n){o&1&&(t(0,"span"),r(1,"Signing in..."),e())}function X(o,n){o&1&&(t(0,"span"),r(1,"Sign in"),e())}var W=class o{authService=l(C);router=l(S);snackBar=l(j);signInForm=new x({email:new g("",[d.required,d.email]),password:new g("",[d.required])});hidePassword=!0;isLoading=!1;onSubmit(){this.signInForm.valid&&(this.isLoading=!0,this.authService.login({email:this.signInForm.value.email||"",password:this.signInForm.value.password||""}).pipe(c(()=>this.isLoading=!1)).subscribe({next:n=>{n.data.requireMfa?this.router.navigate(["/auth/mfa-verify"],{state:{setupMode:n.data.mfaSetupRequired}}):this.router.navigate(["/analytics"])},error:n=>{let s="Login failed";n.error?.message&&(s=n.error.message),this.snackBar.open(s,"Close",{duration:5e3})}}))}static \u0275fac=function(s){return new(s||o)};static \u0275cmp=_({type:o,selectors:[["app-login"]],decls:26,vars:9,consts:[[1,"auth-content"],[1,"top-label"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","email","type","email"],[4,"ngIf"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"material-symbols-outlined"],[1,"forgot-password"],["routerLink","/auth/forgot-password",1,"forgot-link"],["mat-flat-button","","type","submit",1,"sign-in-button",3,"disabled"]],template:function(s,i){s&1&&(t(0,"div",0)(1,"span",1),r(2,"Welcome!"),e(),t(3,"h2"),r(4,"Sign in to Get Started"),e(),t(5,"form",2),u("ngSubmit",function(){return i.onSubmit()}),t(6,"mat-form-field",3)(7,"mat-label"),r(8,"Enter Your Email"),e(),f(9,"input",4),p(10,H,2,0,"mat-error",5)(11,K,2,0,"mat-error",5),e(),t(12,"mat-form-field",3)(13,"mat-label"),r(14,"Password"),e(),f(15,"input",6),t(16,"button",7),u("click",function(){return i.hidePassword=!i.hidePassword}),t(17,"mat-icon",8),r(18),e()(),p(19,Q,2,0,"mat-error",5),e(),t(20,"div",9)(21,"a",10),r(22,"Forgot Password"),e()(),t(23,"button",11),p(24,U,2,0,"span",5)(25,X,2,0,"span",5),e()()()),s&2&&(a(5),m("formGroup",i.signInForm),a(5),m("ngIf",i.signInForm.controls.email.hasError("required")),a(),m("ngIf",i.signInForm.controls.email.hasError("email")),a(4),m("type",i.hidePassword?"password":"text"),a(3),h(i.hidePassword?"visibility_off":"visibility"),a(),m("ngIf",i.signInForm.controls.password.hasError("required")),a(4),m("disabled",i.isLoading||i.signInForm.invalid),a(),m("ngIf",i.isLoading),a(),m("ngIf",!i.isLoading))},dependencies:[M,b,P,E,w,I,y,F,L,v,B,T,k,N,q,G,O,z,R,D,A,V,J],styles:[".auth-content[_ngcontent-%COMP%]{font-family:Josephin,sans-serif!important;display:flex;flex-direction:column;text-align:left}h1[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500}h2[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px;font-weight:400;font-size:16px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-bottom:24px}.forgot-link[_ngcontent-%COMP%]{color:#ff5252;text-decoration:none;font-size:14px}.sign-in-button[_ngcontent-%COMP%]{width:100%;background-color:#009c4c;color:#fff;padding:12px;border-radius:4px}"]})};export{W as LoginComponent};
