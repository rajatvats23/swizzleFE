import{a as Z}from"./chunk-3LM7EGWX.js";import{c as K,h as Q}from"./chunk-EFAJY4UT.js";import{b as W,d as X,g as Y}from"./chunk-54ULQ5WC.js";import{a as B,b as F,c as H,d as P,e as U,f as A,g as V,h as j,i as q,j as z,k as G,l as J}from"./chunk-UAFRLOKJ.js";import"./chunk-3Z3MOL6J.js";import{a as E,c as w,h as T}from"./chunk-QTDDUBQI.js";import{a as O,b as N}from"./chunk-SWI6467K.js";import"./chunk-PTRNPYW6.js";import{a as $}from"./chunk-URY737FD.js";import"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as D}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{n as I,q as k,u as R}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{d as L}from"./chunk-VSTSZJ55.js";import{Ab as s,Bb as d,Bc as M,Cc as v,Db as x,Fb as b,Gb as u,Kc as S,Rb as a,Sb as C,Ta as r,ac as f,cb as h,hb as m,ja as p,ob as l,qa as _,ra as y,xb as o,yb as n,zb as g}from"./chunk-KAD4X6AH.js";var nt=t=>["/dashboard/categories",t],ot=t=>["/dashboard/categories/edit",t];function at(t,e){t&1&&(o(0,"button",15)(1,"mat-icon",16),a(2,"add"),n(),a(3," Create Category "),n())}function rt(t,e){t&1&&(o(0,"th",17),a(1,"Name"),n())}function mt(t,e){if(t&1&&(o(0,"td",18),a(1),n()),t&2){let i=e.$implicit;r(),C(i.name)}}function lt(t,e){t&1&&(o(0,"th",17),a(1,"Description"),n())}function ct(t,e){if(t&1&&(o(0,"td",18),a(1),n()),t&2){let i=e.$implicit;r(),C(i.description||"N/A")}}function st(t,e){t&1&&(o(0,"th",17),a(1,"Menus"),n())}function dt(t,e){if(t&1&&(o(0,"mat-chip"),a(1),n()),t&2){let i=e.$implicit;r(),C(i.name)}}function pt(t,e){t&1&&(o(0,"span"),a(1,"No menus assigned"),n())}function ut(t,e){if(t&1&&(o(0,"td",18)(1,"div",19)(2,"mat-chip-set"),m(3,dt,2,1,"mat-chip",20),n(),m(4,pt,2,0,"span",21),n()()),t&2){let i=e.$implicit;r(3),l("ngForOf",i.menus),r(),l("ngIf",!i.menus||i.menus.length===0)}}function Ct(t,e){t&1&&(o(0,"th",17),a(1,"Order"),n())}function gt(t,e){if(t&1&&(o(0,"td",18),a(1),n()),t&2){let i=e.$implicit;r(),C(i.order)}}function ft(t,e){t&1&&(o(0,"th",17),a(1,"Actions"),n())}function _t(t,e){if(t&1&&(o(0,"button",25)(1,"mat-icon",16),a(2,"edit"),n()()),t&2){let i=u().$implicit;l("routerLink",f(1,ot,i._id))}}function yt(t,e){if(t&1){let i=x();o(0,"button",26),b("click",function(){_(i);let et=u().$implicit,it=u();return y(it.confirmDelete(et))}),o(1,"mat-icon",16),a(2,"delete"),n()()}}function ht(t,e){if(t&1&&(o(0,"td",18)(1,"button",22)(2,"mat-icon",16),a(3,"visibility"),n()(),m(4,_t,3,3,"button",23)(5,yt,3,0,"button",24),n()),t&2){let i=e.$implicit,c=u();r(),l("routerLink",f(3,nt,i._id)),r(3),l("ngIf",c.canUpdate()),r(),l("ngIf",c.canDelete())}}function xt(t,e){t&1&&g(0,"tr",27)}function bt(t,e){t&1&&g(0,"tr",28)}function Mt(t,e){t&1&&(o(0,"tr",29)(1,"td",30),a(2," No categories found "),n()())}var tt=class t{categoryService=p(Z);authService=p(D);snackBar=p($);dialog=p(K);categories=[];displayedColumns=["name","description","menus","order","actions"];isLoading=!1;ngOnInit(){this.loadCategories()}loadCategories(){this.isLoading=!0,this.categoryService.getCategories().subscribe({next:e=>{this.categories=e.data.categories,this.isLoading=!1},error:e=>{console.error("Error loading categories:",e),this.snackBar.open(e.error?.message||"Failed to load categories","Close",{duration:5e3}),this.isLoading=!1}})}canCreate(){return this.authService.getCurrentUser()?.role==="manager"}canUpdate(){let e=this.authService.getCurrentUser();return e?.role==="manager"||e?.role==="staff"}canDelete(){return this.authService.getCurrentUser()?.role==="manager"}confirmDelete(e){confirm(`Are you sure you want to delete "${e.name}"?`)&&this.deleteCategory(e._id)}deleteCategory(e){this.categoryService.deleteCategory(e).subscribe({next:()=>{this.snackBar.open("Category deleted successfully","Close",{duration:3e3}),this.loadCategories()},error:i=>{this.snackBar.open(i.error?.message||"Error deleting category","Close",{duration:5e3})}})}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=h({type:t,selectors:[["app-category-list"]],decls:26,vars:4,consts:[[1,"category-container"],[1,"header-actions"],[1,"header-title"],["mat-raised-button","","color","primary","routerLink","/dashboard/categories/create",4,"ngIf"],["mat-table","",1,"category-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","menus"],["matColumnDef","order"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-raised-button","","color","primary","routerLink","/dashboard/categories/create"],[1,"material-symbols-outlined"],["mat-header-cell",""],["mat-cell",""],[1,"menu-chips"],[4,"ngFor","ngForOf"],[4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","5",1,"mat-cell",2,"text-align","center","padding","16px"]],template:function(i,c){i&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),a(3,"Category Management"),n(),m(4,at,4,0,"button",3),n(),o(5,"mat-card")(6,"mat-card-content")(7,"table",4),s(8,5),m(9,rt,2,0,"th",6)(10,mt,2,1,"td",7),d(),s(11,8),m(12,lt,2,0,"th",6)(13,ct,2,1,"td",7),d(),s(14,9),m(15,st,2,0,"th",6)(16,ut,5,2,"td",7),d(),s(17,10),m(18,Ct,2,0,"th",6)(19,gt,2,1,"td",7),d(),s(20,11),m(21,ft,2,0,"th",6)(22,ht,6,5,"td",7),d(),m(23,xt,1,0,"tr",12)(24,bt,1,0,"tr",13)(25,Mt,3,0,"tr",14),n()()()()),i&2&&(r(4),l("ngIf",c.canCreate()),r(3),l("dataSource",c.categories),r(16),l("matHeaderRowDef",c.displayedColumns),r(),l("matRowDefColumns",c.displayedColumns))},dependencies:[S,M,v,L,J,B,H,V,P,F,j,U,A,q,z,G,R,k,I,N,O,T,E,w,Q,Y,W,X],styles:[".category-container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.category-table[_ngcontent-%COMP%]{width:100%}.menu-chips[_ngcontent-%COMP%]{max-width:300px;overflow:hidden}"]})};export{tt as CategoryListComponent};
