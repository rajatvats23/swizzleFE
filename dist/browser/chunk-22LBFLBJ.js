import{a as j,b as z}from"./chunk-SWI6467K.js";import{a as O,c as D,d as G}from"./chunk-2D2I2PDG.js";import{b as R,c as B,f as T,i as L}from"./chunk-PTRNPYW6.js";import{a as Y}from"./chunk-URY737FD.js";import{b as S,d as p,g as y,h as F,i as E,k as w,m as I,p as k,s as x,y as N}from"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as M}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{n as q,q as A,u as V}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as _,c as C}from"./chunk-VSTSZJ55.js";import{Cc as b,Fb as l,Kc as v,Rb as i,Sb as c,Ta as o,Tb as g,cb as h,hb as u,ja as d,ob as m,xb as t,yb as r,zb as f}from"./chunk-KAD4X6AH.js";function J(a,s){a&1&&(t(0,"mat-error"),i(1,"Password is required"),r())}function K(a,s){a&1&&(t(0,"mat-error"),i(1,"Password must be at least 8 characters"),r())}function Q(a,s){a&1&&(t(0,"mat-error"),i(1,"Passwords do not match"),r())}var H=class a{route=d(_);router=d(C);authService=d(M);snackBar=d(Y);token="";isLoading=!1;resetPasswordForm=new E({password:new w("",[p.required,p.minLength(8)]),confirmPassword:new w("",[p.required])});hidePassword=!0;hideConfirmPassword=!0;ngOnInit(){this.token=this.route.snapshot.params.token,this.token||this.router.navigate(["/auth/login"])}onSubmit(){if(this.resetPasswordForm.valid){let s=this.resetPasswordForm.value.password||"",n=this.resetPasswordForm.value.confirmPassword||"";if(s!==n){this.snackBar.open("Passwords do not match","Close",{duration:3e3});return}this.isLoading=!0,this.authService.resetPassword(this.token,s).subscribe({next:()=>{this.snackBar.open("Password reset successful","Close",{duration:3e3}),this.router.navigate(["/auth/login"])},error:e=>{this.isLoading=!1,this.snackBar.open(e.error?.message||"Password reset failed","Close",{duration:5e3})}})}}passwordMatchError(){let s=this.resetPasswordForm.get("password")?.value,n=this.resetPasswordForm.get("confirmPassword")?.value;return s!==n&&this.resetPasswordForm.get("confirmPassword")?.touched}static \u0275fac=function(n){return new(n||a)};static \u0275cmp=h({type:a,selectors:[["app-reset-password"]],decls:25,vars:10,consts:[[1,"auth-content"],[1,"top-label"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"form-field"],["matInput","","formControlName","password",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"material-symbols-outlined"],[4,"ngIf"],["matInput","","formControlName","confirmPassword",3,"type"],["mat-flat-button","","type","submit",1,"reset-button",3,"disabled"]],template:function(n,e){n&1&&(t(0,"div",0)(1,"span",1),i(2,"Set New Password"),r(),t(3,"p"),i(4,"Type Your New Password here"),r(),t(5,"form",2),l("ngSubmit",function(){return e.onSubmit()}),t(6,"mat-form-field",3)(7,"mat-label"),i(8,"New Password"),r(),f(9,"input",4),t(10,"button",5),l("click",function(){return e.hidePassword=!e.hidePassword}),t(11,"mat-icon",6),i(12),r()(),u(13,J,2,0,"mat-error",7)(14,K,2,0,"mat-error",7),r(),t(15,"mat-form-field",3)(16,"mat-label"),i(17,"Confirm Password"),r(),f(18,"input",8),t(19,"button",5),l("click",function(){return e.hideConfirmPassword=!e.hideConfirmPassword}),t(20,"mat-icon",6),i(21),r()(),u(22,Q,2,0,"mat-error",7),r(),t(23,"button",9),i(24),r()()()),n&2&&(o(5),m("formGroup",e.resetPasswordForm),o(4),m("type",e.hidePassword?"password":"text"),o(3),c(e.hidePassword?"visibility_off":"visibility"),o(),m("ngIf",e.resetPasswordForm.controls.password.hasError("required")),o(),m("ngIf",e.resetPasswordForm.controls.password.hasError("minlength")),o(4),m("type",e.hideConfirmPassword?"password":"text"),o(3),c(e.hideConfirmPassword?"visibility_off":"visibility"),o(),m("ngIf",e.passwordMatchError()),o(),m("disabled",e.resetPasswordForm.invalid||e.isLoading),o(),g(" ",e.isLoading?"Processing...":"Reset Password"," "))},dependencies:[v,b,N,I,S,y,F,k,x,O,L,R,B,T,G,D,V,A,q,z,j],styles:[".auth-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left}h1[_ngcontent-%COMP%]{margin-bottom:8px;font-weight:500}p[_ngcontent-%COMP%]{margin-top:0;margin-bottom:24px;font-size:14px}.form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.reset-button[_ngcontent-%COMP%]{width:100%;background-color:#009c4c;color:#fff;padding:12px;border-radius:4px}"]})};export{H as ResetPasswordComponent};
