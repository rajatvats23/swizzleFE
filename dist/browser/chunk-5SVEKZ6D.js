import{a as dt}from"./chunk-4YPPJSVZ.js";import{a as at}from"./chunk-7NFB522G.js";import{c as tt,h as et}from"./chunk-EFAJY4UT.js";import{b as nt,d as it,g as ot}from"./chunk-54ULQ5WC.js";import{a as j,b as z,c as U,d as q,e as G,f as J,g as K,h as Q,i as W,j as X,k as Y,l as Z}from"./chunk-UAFRLOKJ.js";import"./chunk-3Z3MOL6J.js";import{h as R}from"./chunk-QTDDUBQI.js";import{a as $,b as H}from"./chunk-SWI6467K.js";import"./chunk-PTRNPYW6.js";import{a as V}from"./chunk-URY737FD.js";import"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as O}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{n as P,o as F,q as B,u as N}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{d as k}from"./chunk-VSTSZJ55.js";import{Ab as p,Bb as u,Bc as w,Cc as E,Db as A,Fb as S,Gb as c,Jc as T,Kc as I,Rb as d,Sb as v,Ta as a,Tb as C,Ub as y,ac as g,cb as b,cc as L,dc as D,hb as m,ja as s,nb as M,ob as r,qa as x,qb as f,ra as h,xb as o,yb as i,zb as _}from"./chunk-KAD4X6AH.js";var ct=t=>["/dashboard/addons",t],st=t=>["/dashboard/addons/edit",t];function pt(t,e){t&1&&(o(0,"button",14)(1,"mat-icon",15),d(2,"add"),i(),d(3," Create Addon "),i())}function ut(t,e){t&1&&(o(0,"th",16),d(1,"Name"),i())}function ft(t,e){if(t&1&&(o(0,"td",17),d(1),i()),t&2){let n=e.$implicit;a(),v(n.name)}}function _t(t,e){t&1&&(o(0,"th",16),d(1,"Selection Type"),i())}function Ct(t,e){if(t&1&&(o(0,"td",17)(1,"div",18)(2,"mat-icon",19),d(3),i(),o(4,"span",20),d(5),i()()()),t&2){let n=e.$implicit;a(2),f("multi-select",n.isMultiSelect),a(),C(" ",n.isMultiSelect?"check_box":"radio_button_checked"," "),a(),f("multi-select",n.isMultiSelect),a(),C(" ",n.isMultiSelect?"Multiple":"Single"," ")}}function gt(t,e){t&1&&(o(0,"th",16),d(1,"Options"),i())}function xt(t,e){if(t&1&&(o(0,"mat-chip"),d(1),L(2,"currency"),i()),t&2){let n=e.$implicit;a(),y(" ",n.name," (",D(2,2,n.price),") ")}}function ht(t,e){if(t&1&&(o(0,"mat-chip-set"),m(1,xt,3,4,"mat-chip",22),i()),t&2){let n=c().$implicit;a(),r("ngForOf",n.subAddons)}}function bt(t,e){t&1&&(o(0,"span"),d(1,"No options"),i())}function Mt(t,e){if(t&1&&(o(0,"td",17),m(1,ht,2,1,"mat-chip-set",21)(2,bt,2,0,"span",21),i()),t&2){let n=e.$implicit;a(),r("ngIf",n.subAddons==null?null:n.subAddons.length),a(),r("ngIf",!(n.subAddons!=null&&n.subAddons.length))}}function At(t,e){t&1&&(o(0,"th",16),d(1,"Actions"),i())}function St(t,e){if(t&1&&(o(0,"a",26)(1,"mat-icon",15),d(2,"edit"),i()()),t&2){let n=c().$implicit;r("routerLink",g(1,st,n._id))}}function vt(t,e){if(t&1){let n=A();o(0,"button",27),S("click",function(){x(n);let lt=c().$implicit,mt=c();return h(mt.confirmDelete(lt))}),o(1,"mat-icon",15),d(2,"delete"),i()()}}function yt(t,e){if(t&1&&(o(0,"td",17)(1,"a",23)(2,"mat-icon",15),d(3,"visibility"),i()(),m(4,St,3,3,"a",24)(5,vt,3,0,"button",25),i()),t&2){let n=e.$implicit,l=c();a(),r("routerLink",g(3,ct,n._id)),a(3),r("ngIf",l.canManageAddons()),a(),r("ngIf",l.canManageAddons())}}function Lt(t,e){t&1&&_(0,"tr",28)}function Dt(t,e){t&1&&_(0,"tr",29)}function wt(t,e){if(t&1&&(o(0,"tr",30)(1,"td",31),d(2," No addons found "),i()()),t&2){let n=c();a(),M("colspan",n.displayedColumns.length)}}var rt=class t{addonService=s(dt);authService=s(O);snackBar=s(V);dialog=s(tt);addons=[];displayedColumns=["name","type","options","actions"];isLoading=!1;ngOnInit(){this.loadAddons()}loadAddons(){this.isLoading=!0,this.addonService.getAddons().subscribe({next:e=>{this.addons=e.data.addons,this.isLoading=!1},error:e=>{console.error("Error loading addons:",e),this.snackBar.open(e.error?.message||"Failed to load addons","Close",{duration:5e3}),this.isLoading=!1}})}confirmDelete(e){this.dialog.open(at,{data:{title:"Delete Addon",message:`Are you sure you want to delete "${e.name}"?`,confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().subscribe(l=>{l&&this.deleteAddon(e._id)})}deleteAddon(e){this.addonService.deleteAddon(e).subscribe({next:()=>{this.snackBar.open("Addon deleted successfully","Close",{duration:3e3}),this.loadAddons()},error:n=>{this.snackBar.open(n.error?.message||"Error deleting addon","Close",{duration:5e3})}})}canManageAddons(){return this.authService.getCurrentUser()?.role==="manager"}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=b({type:t,selectors:[["app-addon-list"]],decls:21,vars:4,consts:[[1,"addon-container"],[1,"header-actions"],[1,"header-title"],["mat-raised-button","","color","primary","routerLink","/dashboard/addons/create",4,"ngIf"],["mat-table","",1,"addon-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","type"],["matColumnDef","options"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-raised-button","","color","primary","routerLink","/dashboard/addons/create"],[1,"material-symbols-outlined"],["mat-header-cell",""],["mat-cell",""],[1,"selection-type-container"],[1,"material-symbols-outlined","selection-icon"],[1,"selection-badge"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],[1,"mat-cell",2,"text-align","center","padding","16px"]],template:function(n,l){n&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),d(3,"Addon Management"),i(),m(4,pt,4,0,"button",3),i(),o(5,"table",4),p(6,5),m(7,ut,2,0,"th",6)(8,ft,2,1,"td",7),u(),p(9,8),m(10,_t,2,0,"th",6)(11,Ct,6,6,"td",7),u(),p(12,9),m(13,gt,2,0,"th",6)(14,Mt,3,2,"td",7),u(),p(15,10),m(16,At,2,0,"th",6)(17,yt,6,5,"td",7),u(),m(18,Lt,1,0,"tr",11)(19,Dt,1,0,"tr",12)(20,wt,3,1,"tr",13),i()()),n&2&&(a(4),r("ngIf",l.canManageAddons()),a(),r("dataSource",l.addons),a(13),r("matHeaderRowDef",l.displayedColumns),a(),r("matRowDefColumns",l.displayedColumns))},dependencies:[I,w,E,T,k,Z,j,U,K,q,z,Q,G,J,W,X,Y,N,B,F,P,H,$,R,et,ot,nt,it],styles:[".addon-container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.addon-table[_ngcontent-%COMP%]{width:100%}.selection-type-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.selection-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#4caf50}.selection-icon.multi-select[_ngcontent-%COMP%]{color:#4caf50}.selection-badge[_ngcontent-%COMP%]{padding:4px 12px;border-radius:16px;font-size:12px;font-weight:500;background-color:#4caf50;color:#fff;border:1px solid #FFF8EB}.selection-badge.multi-select[_ngcontent-%COMP%]{background-color:#d5a242;color:#fff;border-color:#fff8eb}"]})};export{rt as AddonListComponent};
