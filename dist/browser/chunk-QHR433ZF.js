import{a as Y}from"./chunk-GSDETIKM.js";import{c as W,h as X}from"./chunk-IEN5B5W2.js";import{a as O,b as A,c as F,d as P,e as U,f as j,g as q,h as z,i as G,j as J,k as K,l as Q}from"./chunk-66KDBNKL.js";import"./chunk-4NNSIX2F.js";import{a as T,c as I,h as k}from"./chunk-X4H6S6WA.js";import{a as H,b as V}from"./chunk-FNZWV5VH.js";import{a as $}from"./chunk-MXW2SQ2E.js";import"./chunk-YE4XPGXQ.js";import{a as E}from"./chunk-DAAD4K4P.js";import"./chunk-4MJ6IACY.js";import{n as R,q as B,u as N}from"./chunk-QRFS6CQK.js";import"./chunk-24M76UXH.js";import{c as L,d as y}from"./chunk-A2KXSCJD.js";import{Ab as d,Bb as p,Cc as S,Db as g,Fb as x,Gb as c,Kc as D,Rb as a,Sb as h,Ta as m,Tb as w,ac as b,cb as v,hb as u,ja as s,ob as l,qa as _,ra as M,xb as o,yb as i,zb as C}from"./chunk-Q5RHU532.js";var te=e=>["/menus",e],ne=e=>["/menus/edit",e];function ie(e,t){if(e&1){let n=g();o(0,"button",14),x("click",function(){_(n);let f=c();return M(f.createMenu())}),o(1,"mat-icon",15),a(2,"add"),i(),a(3," Create Menu "),i()}}function oe(e,t){e&1&&(o(0,"th",16),a(1,"Name"),i())}function ae(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;m(),h(n.name)}}function re(e,t){e&1&&(o(0,"th",16),a(1,"Description"),i())}function me(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;m(),h(n.description||"N/A")}}function le(e,t){e&1&&(o(0,"th",16),a(1,"Restaurant"),i())}function ue(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;m(),w(" ",(n.restaurantId==null?null:n.restaurantId.name)||"Unknown"," ")}}function se(e,t){e&1&&(o(0,"th",16),a(1,"Actions"),i())}function ce(e,t){if(e&1&&(o(0,"button",21)(1,"mat-icon",15),a(2,"edit"),i()()),e&2){let n=c().$implicit;l("routerLink",b(1,ne,n._id))}}function de(e,t){if(e&1){let n=g();o(0,"button",22),x("click",function(){_(n);let f=c().$implicit,ee=c();return M(ee.confirmDelete(f))}),o(1,"mat-icon",15),a(2,"delete"),i()()}}function pe(e,t){if(e&1&&(o(0,"td",17)(1,"button",18)(2,"mat-icon",15),a(3,"visibility"),i()(),u(4,ce,3,3,"button",19)(5,de,3,0,"button",20),i()),e&2){let n=t.$implicit,r=c();m(),l("routerLink",b(3,te,n._id)),m(3),l("ngIf",r.isManager()&&r.canManageMenu(n)),m(),l("ngIf",r.isManager()&&r.canManageMenu(n))}}function fe(e,t){e&1&&C(0,"tr",23)}function _e(e,t){e&1&&C(0,"tr",24)}function Me(e,t){e&1&&(o(0,"tr",25)(1,"td",26),a(2," No menus found "),i()())}var Z=class e{menuService=s(Y);authService=s(E);snackBar=s($);dialog=s(W);router=s(L);menus=[];displayedColumns=["name","description","restaurant","actions"];isLoading=!1;ngOnInit(){this.loadMenus()}loadMenus(){this.isLoading=!0,this.menuService.getMenus().subscribe({next:t=>{this.menus=t.data.menus,this.isLoading=!1},error:t=>{console.error("Error loading menus:",t),this.snackBar.open(t.error?.message||"Failed to load menus","Close",{duration:5e3}),this.isLoading=!1}})}isManager(){return this.authService.getCurrentUser()?.role==="manager"}canManageMenu(t){return this.authService.getCurrentUser()?.restaurantId===t.restaurantId._id}confirmDelete(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&this.deleteMenu(t._id)}createMenu(){this.router.navigateByUrl("menus/create")}deleteMenu(t){this.menuService.deleteMenu(t).subscribe({next:()=>{this.snackBar.open("Menu deleted successfully","Close",{duration:3e3}),this.loadMenus()},error:n=>{this.snackBar.open(n.error?.message||"Error deleting menu","Close",{duration:5e3})}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=v({type:e,selectors:[["app-menu-list"]],decls:23,vars:4,consts:[[1,"menu-container"],[1,"header-actions"],[1,"header-title"],["mat-raised-button","","color","primary",3,"click",4,"ngIf"],["mat-table","",1,"menu-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","restaurant"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-raised-button","","color","primary",3,"click"],[1,"material-symbols-outlined"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell",2,"text-align","center","padding","16px"]],template:function(n,r){n&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),a(3,"Menu Management"),i(),u(4,ie,4,0,"button",3),i(),o(5,"mat-card")(6,"mat-card-content")(7,"table",4),d(8,5),u(9,oe,2,0,"th",6)(10,ae,2,1,"td",7),p(),d(11,8),u(12,re,2,0,"th",6)(13,me,2,1,"td",7),p(),d(14,9),u(15,le,2,0,"th",6)(16,ue,2,1,"td",7),p(),d(17,10),u(18,se,2,0,"th",6)(19,pe,6,5,"td",7),p(),u(20,fe,1,0,"tr",11)(21,_e,1,0,"tr",12)(22,Me,3,0,"tr",13),i()()()()),n&2&&(m(4),l("ngIf",r.isManager()),m(3),l("dataSource",r.menus),m(13),l("matHeaderRowDef",r.displayedColumns),m(),l("matRowDefColumns",r.displayedColumns))},dependencies:[D,S,y,Q,O,F,q,P,A,z,U,j,G,J,K,N,B,R,V,H,k,T,I,X],styles:[".menu-container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.menu-table[_ngcontent-%COMP%]{width:100%}"]})};export{Z as MenuListComponent};
