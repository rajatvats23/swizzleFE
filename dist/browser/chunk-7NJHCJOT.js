import{a as W}from"./chunk-DXQHYOCY.js";import{c as K,h as Q}from"./chunk-EFAJY4UT.js";import{a as $,b as O,c as A,d as F,e as P,f as V,g as U,h as j,i as q,j as z,k as G,l as J}from"./chunk-UAFRLOKJ.js";import"./chunk-3Z3MOL6J.js";import{a as y,c as E,h as T}from"./chunk-QTDDUBQI.js";import{a as B,b as N}from"./chunk-SWI6467K.js";import{a as H}from"./chunk-URY737FD.js";import"./chunk-75BXHIVP.js";import{a as D}from"./chunk-NQCP3IVX.js";import"./chunk-LK7ZGARP.js";import{n as I,q as k,u as R}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{d as w}from"./chunk-VSTSZJ55.js";import{Ab as c,Bb as d,Cc as L,Db as b,Fb as x,Gb as p,Kc as S,Rb as a,Sb as M,Ta as r,Tb as v,ac as _,cb as h,hb as s,ja as u,ob as l,qa as C,ra as g,xb as o,yb as i,zb as f}from"./chunk-KAD4X6AH.js";var ee=e=>["/dashboard/menus",e],te=e=>["/dashboard/menus/edit",e];function ne(e,t){e&1&&(o(0,"button",14)(1,"mat-icon",15),a(2,"add"),i(),a(3," Create Menu "),i())}function ie(e,t){e&1&&(o(0,"th",16),a(1,"Name"),i())}function oe(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;r(),M(n.name)}}function ae(e,t){e&1&&(o(0,"th",16),a(1,"Description"),i())}function re(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;r(),M(n.description||"N/A")}}function me(e,t){e&1&&(o(0,"th",16),a(1,"Restaurant"),i())}function le(e,t){if(e&1&&(o(0,"td",17),a(1),i()),e&2){let n=t.$implicit;r(),v(" ",(n.restaurantId==null?null:n.restaurantId.name)||"Unknown"," ")}}function se(e,t){e&1&&(o(0,"th",16),a(1,"Actions"),i())}function ue(e,t){if(e&1&&(o(0,"button",21)(1,"mat-icon",15),a(2,"edit"),i()()),e&2){let n=p().$implicit;l("routerLink",_(1,te,n._id))}}function ce(e,t){if(e&1){let n=b();o(0,"button",22),x("click",function(){C(n);let Y=p().$implicit,Z=p();return g(Z.confirmDelete(Y))}),o(1,"mat-icon",15),a(2,"delete"),i()()}}function de(e,t){if(e&1&&(o(0,"td",17)(1,"button",18)(2,"mat-icon",15),a(3,"visibility"),i()(),s(4,ue,3,3,"button",19)(5,ce,3,0,"button",20),i()),e&2){let n=t.$implicit,m=p();r(),l("routerLink",_(3,ee,n._id)),r(3),l("ngIf",m.isManager()&&m.canManageMenu(n)),r(),l("ngIf",m.isManager()&&m.canManageMenu(n))}}function pe(e,t){e&1&&f(0,"tr",23)}function fe(e,t){e&1&&f(0,"tr",24)}function Me(e,t){e&1&&(o(0,"tr",25)(1,"td",26),a(2," No menus found "),i()())}var X=class e{menuService=u(W);authService=u(D);snackBar=u(H);dialog=u(K);menus=[];displayedColumns=["name","description","restaurant","actions"];isLoading=!1;ngOnInit(){this.loadMenus()}loadMenus(){this.isLoading=!0,this.menuService.getMenus().subscribe({next:t=>{this.menus=t.data.menus,this.isLoading=!1},error:t=>{console.error("Error loading menus:",t),this.snackBar.open(t.error?.message||"Failed to load menus","Close",{duration:5e3}),this.isLoading=!1}})}isManager(){return this.authService.getCurrentUser()?.role==="manager"}canManageMenu(t){return this.authService.getCurrentUser()?.restaurantId===t.restaurantId._id}confirmDelete(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&this.deleteMenu(t._id)}deleteMenu(t){this.menuService.deleteMenu(t).subscribe({next:()=>{this.snackBar.open("Menu deleted successfully","Close",{duration:3e3}),this.loadMenus()},error:n=>{this.snackBar.open(n.error?.message||"Error deleting menu","Close",{duration:5e3})}})}static \u0275fac=function(n){return new(n||e)};static \u0275cmp=h({type:e,selectors:[["app-menu-list"]],decls:23,vars:4,consts:[[1,"menu-container"],[1,"header-actions"],[1,"header-title"],["mat-raised-button","","color","primary","routerLink","/dashboard/menus/create",4,"ngIf"],["mat-table","",1,"menu-table",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","restaurant"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-raised-button","","color","primary","routerLink","/dashboard/menus/create"],[1,"material-symbols-outlined"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-icon-button","","color","warn","matTooltip","Delete",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","4",1,"mat-cell",2,"text-align","center","padding","16px"]],template:function(n,m){n&1&&(o(0,"div",0)(1,"div",1)(2,"span",2),a(3,"Menu Management"),i(),s(4,ne,4,0,"button",3),i(),o(5,"mat-card")(6,"mat-card-content")(7,"table",4),c(8,5),s(9,ie,2,0,"th",6)(10,oe,2,1,"td",7),d(),c(11,8),s(12,ae,2,0,"th",6)(13,re,2,1,"td",7),d(),c(14,9),s(15,me,2,0,"th",6)(16,le,2,1,"td",7),d(),c(17,10),s(18,se,2,0,"th",6)(19,de,6,5,"td",7),d(),s(20,pe,1,0,"tr",11)(21,fe,1,0,"tr",12)(22,Me,3,0,"tr",13),i()()()()),n&2&&(r(4),l("ngIf",m.isManager()),r(3),l("dataSource",m.menus),r(13),l("matHeaderRowDef",m.displayedColumns),r(),l("matRowDefColumns",m.displayedColumns))},dependencies:[S,L,w,J,$,A,U,F,O,j,P,V,q,z,G,R,k,I,N,B,T,y,E,Q],styles:[".menu-container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.menu-table[_ngcontent-%COMP%]{width:100%}"]})};export{X as MenuListComponent};
