import{a as de}from"./chunk-L7GHXEMQ.js";import{a as me,b as se,c as le,d as pe,e as ue}from"./chunk-P2NHJYHP.js";import"./chunk-2OJIEFOL.js";import{d as ae,h as ne,i as oe}from"./chunk-PXLRJANG.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as k,c as T,h as P}from"./chunk-QTDDUBQI.js";import{a as te,b as re}from"./chunk-SWI6467K.js";import{a as W,c as X,d as Y}from"./chunk-2D2I2PDG.js";import{b as U,c as J,f as K,i as Q}from"./chunk-PTRNPYW6.js";import{a as ie}from"./chunk-URY737FD.js";import{b as O,d as u,g as B,h as z,m as V,n as G,p as L,s as j,u as A,w as H,y as $}from"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import"./chunk-LK7ZGARP.js";import{q as Z,u as ee}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as D,c as q,d as w}from"./chunk-VSTSZJ55.js";import{Cc as R,Db as y,Fb as F,Kc as N,Qb as I,Rb as i,Ta as m,Tb as v,cb as x,hb as l,ja as f,ob as s,qa as E,ra as M,xb as r,yb as e,zb as p}from"./chunk-KAD4X6AH.js";function fe(o,t){o&1&&(r(0,"mat-error"),i(1," Customer name is required "),e())}function ve(o,t){o&1&&(r(0,"mat-error"),i(1," Phone number is required "),e())}function ge(o,t){o&1&&(r(0,"mat-error"),i(1," Please enter a valid email address "),e())}function he(o,t){o&1&&(r(0,"mat-error"),i(1," Date is required "),e())}function Se(o,t){o&1&&(r(0,"mat-error"),i(1," Time is required "),e())}function _e(o,t){o&1&&(r(0,"mat-error"),i(1," Party size is required "),e())}function be(o,t){o&1&&(r(0,"mat-error"),i(1," Party size must be at least 1 "),e())}function Ce(o,t){o&1&&(r(0,"mat-form-field",8)(1,"mat-label"),i(2,"Status"),e(),r(3,"mat-select",24)(4,"mat-option",25),i(5,"Pending"),e(),r(6,"mat-option",26),i(7,"Confirmed"),e(),r(8,"mat-option",27),i(9,"Seated"),e(),r(10,"mat-option",28),i(11,"Completed"),e(),r(12,"mat-option",29),i(13,"Cancelled"),e(),r(14,"mat-option",30),i(15,"No-show"),e()()())}var ce=class o{fb=f(H);route=f(D);router=f(q);reservationService=f(de);snackBar=f(ie);reservationForm;isEditMode=!1;isSubmitting=!1;reservationId="";ngOnInit(){this.initForm(),this.reservationId=this.route.snapshot.params.id,this.isEditMode=!!this.reservationId,this.isEditMode&&this.loadReservationData()}initForm(){this.reservationForm=this.fb.group({customerName:["",u.required],phoneNumber:["",u.required],email:["",u.email],reservationDate:[new Date,u.required],reservationTime:["18:00",u.required],partySize:[2,[u.required,u.min(1)]],specialRequests:[""],status:["pending"]})}loadReservationData(){this.reservationService.getReservationById(this.reservationId).subscribe({next:t=>{let a=t.data.reservation,n=new Date(a.reservationDate);this.reservationForm.patchValue({customerName:a.customer.name,phoneNumber:a.customer.phoneNumber,email:a.customer.email||"",reservationDate:n,reservationTime:this.formatTimeForInput(n),partySize:a.partySize,specialRequests:a.specialRequests||"",status:a.status})},error:t=>{this.snackBar.open(t.error?.message||"Failed to load reservation","Close",{duration:5e3}),this.router.navigate(["/reservations"])}})}onSubmit(){if(this.reservationForm.invalid)return;this.isSubmitting=!0;let t=this.reservationForm.value,a=new Date(t.reservationDate),[n,d]=t.reservationTime.split(":");a.setHours(parseInt(n),parseInt(d));let c={customerName:t.customerName,phoneNumber:t.phoneNumber,email:t.email||void 0,partySize:t.partySize,reservationDate:a.toISOString(),specialRequests:t.specialRequests||void 0,status:t.status};this.isEditMode?this.updateReservation(c):this.createReservation(c)}createReservation(t){this.reservationService.createReservation(t).subscribe({next:a=>{this.snackBar.open("Reservation created successfully","Close",{duration:3e3}),this.router.navigate(["/reservations"])},error:a=>{this.isSubmitting=!1,this.snackBar.open(a.error?.message||"Failed to create reservation","Close",{duration:5e3})}})}updateReservation(t){this.reservationService.updateReservation(this.reservationId,t).subscribe({next:a=>{this.snackBar.open("Reservation updated successfully","Close",{duration:3e3}),this.router.navigate(["/reservations"])},error:a=>{this.isSubmitting=!1,this.snackBar.open(a.error?.message||"Failed to update reservation","Close",{duration:5e3})}})}formatTimeForInput(t){let a=t.getHours().toString().padStart(2,"0"),n=t.getMinutes().toString().padStart(2,"0");return`${a}:${n}`}static \u0275fac=function(a){return new(a||o)};static \u0275cmp=x({type:o,selectors:[["app-reservation-form"]],decls:62,vars:14,consts:[["picker",""],[1,"container"],[1,"header-actions"],[1,"top-label"],["mat-button","","color","primary","routerLink","/reservations"],[1,"material-symbols-outlined"],[3,"ngSubmit","formGroup"],[1,"form-section"],["appearance","outline",1,"full-width"],["matInput","","formControlName","customerName","placeholder","Enter customer name"],[4,"ngIf"],["matInput","","formControlName","phoneNumber","placeholder","Enter phone number"],["matInput","","formControlName","email","placeholder","Enter email address"],[1,"form-row"],["appearance","outline"],["matInput","","formControlName","reservationDate",3,"matDatepicker"],["matIconSuffix","",3,"for"],["matInput","","type","time","formControlName","reservationTime"],["matInput","","type","number","min","1","formControlName","partySize"],["appearance","outline","class","full-width",4,"ngIf"],["matInput","","formControlName","specialRequests","rows","3","placeholder","Enter any special requests or notes"],[1,"form-actions"],["mat-button","","type","button","routerLink","/reservations"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["formControlName","status"],["value","pending"],["value","confirmed"],["value","seated"],["value","completed"],["value","cancelled"],["value","no-show"]],template:function(a,n){if(a&1){let d=y();r(0,"div",1)(1,"div",2)(2,"span",3),i(3),e(),r(4,"button",4)(5,"mat-icon",5),i(6,"arrow_back"),e(),i(7," Back to List "),e()(),r(8,"mat-card")(9,"mat-card-content")(10,"form",6),F("ngSubmit",function(){return E(d),M(n.onSubmit())}),r(11,"div",7)(12,"h3"),i(13,"Customer Information"),e(),r(14,"mat-form-field",8)(15,"mat-label"),i(16,"Customer Name"),e(),p(17,"input",9),l(18,fe,2,0,"mat-error",10),e(),r(19,"mat-form-field",8)(20,"mat-label"),i(21,"Phone Number"),e(),p(22,"input",11),l(23,ve,2,0,"mat-error",10),e(),r(24,"mat-form-field",8)(25,"mat-label"),i(26,"Email (Optional)"),e(),p(27,"input",12),l(28,ge,2,0,"mat-error",10),e()(),r(29,"div",7)(30,"h3"),i(31,"Reservation Details"),e(),r(32,"div",13)(33,"mat-form-field",14)(34,"mat-label"),i(35,"Date"),e(),p(36,"input",15)(37,"mat-datepicker-toggle",16)(38,"mat-datepicker",null,0),l(40,he,2,0,"mat-error",10),e(),r(41,"mat-form-field",14)(42,"mat-label"),i(43,"Time"),e(),p(44,"input",17),l(45,Se,2,0,"mat-error",10),e()(),r(46,"mat-form-field",8)(47,"mat-label"),i(48,"Party Size"),e(),p(49,"input",18),l(50,_e,2,0,"mat-error",10)(51,be,2,0,"mat-error",10),e(),l(52,Ce,16,0,"mat-form-field",19),r(53,"mat-form-field",8)(54,"mat-label"),i(55,"Special Requests (Optional)"),e(),p(56,"textarea",20),e()(),r(57,"div",21)(58,"button",22),i(59,"Cancel"),e(),r(60,"button",23),i(61),e()()()()()()}if(a&2){let d,c,g,h,S,_,b,C=I(39);m(3),v("",n.isEditMode?"Edit":"Create"," Reservation"),m(7),s("formGroup",n.reservationForm),m(8),s("ngIf",(d=n.reservationForm.get("customerName"))==null?null:d.hasError("required")),m(5),s("ngIf",(c=n.reservationForm.get("phoneNumber"))==null?null:c.hasError("required")),m(5),s("ngIf",(g=n.reservationForm.get("email"))==null?null:g.hasError("email")),m(8),s("matDatepicker",C),m(),s("for",C),m(3),s("ngIf",(h=n.reservationForm.get("reservationDate"))==null?null:h.hasError("required")),m(5),s("ngIf",(S=n.reservationForm.get("reservationTime"))==null?null:S.hasError("required")),m(5),s("ngIf",(_=n.reservationForm.get("partySize"))==null?null:_.hasError("required")),m(),s("ngIf",(b=n.reservationForm.get("partySize"))==null?null:b.hasError("min")),m(),s("ngIf",n.isEditMode),m(8),s("disabled",n.reservationForm.invalid||n.isSubmitting),m(),v(" ",n.isSubmitting?"Saving...":n.isEditMode?"Update":"Create"," ")}},dependencies:[N,R,$,V,O,G,B,z,A,L,j,w,W,Q,U,J,K,Y,X,ee,Z,oe,ne,ae,pe,me,se,le,ue,P,k,T,re,te],styles:[".container[_ngcontent-%COMP%]{width:100%;max-width:800px;margin:0 auto}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.form-section[_ngcontent-%COMP%]{margin-bottom:24px}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:16px;color:#555}.form-row[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:16px}.form-row[_ngcontent-%COMP%] > mat-form-field[_ngcontent-%COMP%]{flex:1}.full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.form-actions[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:flex-end;margin-top:20px}@media (max-width: 599px){.form-row[_ngcontent-%COMP%]{flex-direction:column;gap:0}}"]})};export{ce as ReservationFormComponent};
