import{a as it}from"./chunk-RXN36UBV.js";import{a as W,b as X}from"./chunk-6MZA557P.js";import{a as et}from"./chunk-AFSGQ5UB.js";import{c as Q}from"./chunk-IEN5B5W2.js";import"./chunk-XOSWA2SM.js";import{b as Y,d as Z,g as tt}from"./chunk-Q73V3MFL.js";import{a as J,b as K}from"./chunk-T763PW3Z.js";import"./chunk-MRNGONWI.js";import"./chunk-MPZJ55NE.js";import"./chunk-4NNSIX2F.js";import{a as N,b as j,c as U,f as R,h as V}from"./chunk-X4H6S6WA.js";import{a as z,b as H}from"./chunk-FNZWV5VH.js";import"./chunk-TFWZGPIA.js";import{a as G}from"./chunk-MXW2SQ2E.js";import"./chunk-CG6HKZKU.js";import"./chunk-YE4XPGXQ.js";import{a as F}from"./chunk-DAAD4K4P.js";import"./chunk-4MJ6IACY.js";import{q,u as $}from"./chunk-QRFS6CQK.js";import"./chunk-24M76UXH.js";import{a as B,c as A,d as L}from"./chunk-A2KXSCJD.js";import{Bc as D,Cc as O,Db as x,Fb as h,Gb as l,Gc as w,Jb as b,Jc as T,Kc as k,Ra as P,Rb as r,Sb as p,Ta as a,Tb as M,Ub as I,ac as S,cb as y,cc as g,dc as E,ec as C,hb as c,ja as s,ob as d,qa as _,ra as v,xb as n,yb as i,zb as m}from"./chunk-Q5RHU532.js";var rt=e=>["/dashboard/products/edit",e];function at(e,o){if(e&1&&(n(0,"button",23)(1,"mat-icon",7),r(2,"edit"),i(),r(3," Edit "),i()),e&2){let t=l(2);d("routerLink",S(1,rt,t.product._id))}}function dt(e,o){if(e&1){let t=x();n(0,"button",24),h("click",function(){_(t);let f=l(2);return v(f.confirmDelete())}),n(1,"mat-icon",7),r(2,"delete"),i(),r(3," Delete "),i()}}function ct(e,o){if(e&1&&m(0,"img",25),e&2){let t=l(2);b("alt",t.product.name),d("src",t.product.imageUrl,P)}}function lt(e,o){e&1&&(n(0,"div",26)(1,"mat-icon",7),r(2,"image_not_supported"),i(),n(3,"p"),r(4,"No image available"),i()())}function pt(e,o){if(e&1&&(n(0,"div",22)(1,"h3"),r(2,"Description"),i(),n(3,"p"),r(4),i()()),e&2){let t=l(2);a(4),p(t.product.description)}}function mt(e,o){e&1&&m(0,"mat-divider")}function st(e,o){if(e&1&&(n(0,"mat-chip"),r(1),i()),e&2){let t=o.$implicit;a(),p(t.name)}}function ut(e,o){if(e&1&&(n(0,"mat-chip-set"),c(1,st,2,1,"mat-chip",27),i()),e&2){let t=l(2);a(),d("ngForOf",t.product.tags)}}function gt(e,o){e&1&&(n(0,"p"),r(1,"No tags"),i())}function ft(e,o){e&1&&(n(0,"div",33),r(1,"Required"),i())}function _t(e,o){if(e&1&&(n(0,"div",30)(1,"div",31),r(2),i(),c(3,ft,2,0,"div",32),i()),e&2){let t=o.$implicit;a(2),p(t.addon.name),a(),d("ngIf",t.required)}}function vt(e,o){if(e&1&&(n(0,"div",22)(1,"h3"),r(2,"Addons"),i(),n(3,"div",28),c(4,_t,4,2,"div",29),i()()),e&2){let t=l(2);a(4),d("ngForOf",t.product.addons)}}function xt(e,o){if(e&1){let t=x();n(0,"div",2)(1,"div",3)(2,"span",4),r(3),i(),n(4,"div",5)(5,"button",6)(6,"mat-icon",7),r(7,"arrow_back"),i(),r(8," Back to List "),i(),c(9,at,4,3,"button",8)(10,dt,4,0,"button",9),i()(),n(11,"div",10)(12,"div",11)(13,"mat-card")(14,"mat-card-content",12),c(15,ct,1,2,"img",13)(16,lt,5,0,"div",14),i()()(),n(17,"div",15)(18,"mat-card")(19,"mat-card-header")(20,"mat-card-title"),r(21,"Product Details"),i()(),n(22,"mat-card-content")(23,"div",16)(24,"div",17),r(25),g(26,"currency"),i(),n(27,"div",18)(28,"mat-slide-toggle",19),h("change",function(f){_(t);let ot=l();return v(ot.toggleAvailability(f.checked))}),r(29),i()()(),m(30,"mat-divider"),c(31,pt,5,1,"div",20)(32,mt,1,0,"mat-divider",21),n(33,"div",22)(34,"h3"),r(35,"Category"),i(),n(36,"p"),r(37),i()(),m(38,"mat-divider"),n(39,"div",22)(40,"h3"),r(41,"Tags"),i(),c(42,ut,2,1,"mat-chip-set",21)(43,gt,2,0,"p",21),i(),m(44,"mat-divider"),n(45,"div",22)(46,"h3"),r(47,"Created By"),i(),n(48,"p"),r(49),i()(),m(50,"mat-divider"),n(51,"div",22)(52,"h3"),r(53,"Created At"),i(),n(54,"p"),r(55),g(56,"date"),i()(),m(57,"mat-divider"),n(58,"div",22)(59,"h3"),r(60,"Updated At"),i(),n(61,"p"),r(62),g(63,"date"),i()(),c(64,vt,5,1,"div",20),i()()()()()}if(e&2){let t=l();a(3),p(t.product.name),a(6),d("ngIf",t.canManageProducts()),a(),d("ngIf",t.canManageProducts()),a(5),d("ngIf",t.product.imageUrl),a(),d("ngIf",!t.product.imageUrl),a(9),p(E(26,19,t.product.price)),a(3),d("checked",t.product.isAvailable)("disabled",!t.canManageProducts()),a(),M(" ",t.product.isAvailable?"Available":"Unavailable"," "),a(2),d("ngIf",t.product.description),a(),d("ngIf",t.product.description),a(5),p((t.product.category==null?null:t.product.category.name)||"Not assigned"),a(5),d("ngIf",t.product.tags==null?null:t.product.tags.length),a(),d("ngIf",!(t.product.tags!=null&&t.product.tags.length)),a(6),I("",t.product.createdBy==null?null:t.product.createdBy.firstName," ",t.product.createdBy==null?null:t.product.createdBy.lastName,""),a(6),p(C(56,21,t.product.createdAt,"medium")),a(7),p(C(63,24,t.product.updatedAt,"medium")),a(2),d("ngIf",t.product.addons==null?null:t.product.addons.length)}}function ht(e,o){e&1&&(n(0,"div",34)(1,"p"),r(2,"Loading product details..."),i()())}var nt=class e{route=s(B);router=s(A);productService=s(it);authService=s(F);snackBar=s(G);dialog=s(Q);product=null;isLoading=!0;productId="";ngOnInit(){this.productId=this.route.snapshot.params.id,this.productId?this.loadProduct():this.router.navigate(["/dashboard/products"])}loadProduct(){this.isLoading=!0,this.productService.getProductById(this.productId).subscribe({next:o=>{this.product=o.data.product,this.isLoading=!1},error:o=>{this.snackBar.open(o.error?.message||"Failed to load product","Close",{duration:5e3}),this.isLoading=!1,this.router.navigate(["/dashboard/products"])}})}toggleAvailability(o){this.product&&this.productService.updateProduct(this.product._id,{isAvailable:o}).subscribe({next:t=>{this.product&&(this.product.isAvailable=o),this.snackBar.open(`Product ${o?"enabled":"disabled"} successfully`,"Close",{duration:3e3})},error:t=>{this.product&&(this.product.isAvailable=!o),this.snackBar.open(t.error?.message||"Failed to update product","Close",{duration:5e3})}})}confirmDelete(){if(!this.product)return;this.dialog.open(et,{data:{title:"Delete Product",message:`Are you sure you want to delete "${this.product.name}"?`,confirmText:"Delete",cancelText:"Cancel"}}).afterClosed().subscribe(t=>{t&&this.deleteProduct()})}deleteProduct(){this.product&&this.productService.deleteProduct(this.product._id).subscribe({next:()=>{this.snackBar.open("Product deleted successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/products"])},error:o=>{this.snackBar.open(o.error?.message||"Error deleting product","Close",{duration:5e3})}})}canManageProducts(){return this.authService.getCurrentUser()?.role==="manager"}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=y({type:e,selectors:[["app-product-detail"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"container"],[1,"header-actions"],[1,"top-label"],[1,"action-buttons"],["mat-button","","color","primary","routerLink","/dashboard/products"],[1,"material-symbols-outlined"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],[1,"product-grid"],[1,"product-image-section"],[1,"product-image-container"],["class","product-image",3,"src","alt",4,"ngIf"],["class","no-image",4,"ngIf"],[1,"product-details-section"],[1,"price-availability"],[1,"price"],[1,"availability"],[3,"change","checked","disabled"],["class","info-row",4,"ngIf"],[4,"ngIf"],[1,"info-row"],["mat-raised-button","","color","accent",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"],[1,"product-image",3,"src","alt"],[1,"no-image"],[4,"ngFor","ngForOf"],[1,"addon-list"],["class","addon-item",4,"ngFor","ngForOf"],[1,"addon-item"],[1,"addon-name"],["class","addon-required",4,"ngIf"],[1,"addon-required"],[1,"loading-container"]],template:function(t,u){t&1&&c(0,xt,65,27,"div",0)(1,ht,3,0,"div",1),t&2&&(d("ngIf",u.product),a(),d("ngIf",u.isLoading))},dependencies:[k,D,O,T,w,L,V,N,U,R,j,$,q,H,z,tt,Y,Z,K,J,X,W],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.product-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 2fr;gap:20px}.product-image-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:300px;padding:16px}.product-image[_ngcontent-%COMP%]{max-width:100%;max-height:400px;object-fit:contain}.no-image[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;color:#999}.no-image[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px}.price-availability[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 0}.price[_ngcontent-%COMP%]{font-size:24px;font-weight:500;color:#009c4c}.info-row[_ngcontent-%COMP%]{padding:16px 0}.info-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500;color:#666}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}@media (max-width: 767px){.product-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.header-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.action-buttons[_ngcontent-%COMP%]{margin-top:10px;flex-wrap:wrap}}"]})};export{nt as ProductDetailComponent};
