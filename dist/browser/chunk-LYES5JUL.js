import{a as Ee}from"./chunk-PPW2AVZW.js";import{b as Re,g as De}from"./chunk-54ULQ5WC.js";import{a as we}from"./chunk-KSLEOCLJ.js";import{a as re,b as me,c as le,d as se,e as de}from"./chunk-P2NHJYHP.js";import"./chunk-2OJIEFOL.js";import{a as ce,b as pe,c as ue,d as fe,e as _e,f as ve,g as Ce,h as ge,i as Me,j as Se,k as he,l as xe}from"./chunk-UAFRLOKJ.js";import{d as ne,h as ae,i as oe}from"./chunk-PXLRJANG.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as O,c as A,h as B}from"./chunk-QTDDUBQI.js";import{a as ee,b as te}from"./chunk-SWI6467K.js";import{a as J,c as K,d as Q}from"./chunk-2D2I2PDG.js";import{b as U,f as q,i as G}from"./chunk-PTRNPYW6.js";import{a as ie}from"./chunk-URY737FD.js";import{b as H,g as W,l as z,x as $,y as j}from"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as P}from"./chunk-5XSEBNVB.js";import"./chunk-4MJ6IACY.js";import{o as X,q as Y,u as Z}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{d as F}from"./chunk-VSTSZJ55.js";import{Ab as c,Bb as p,Cc as k,Db as L,Fb as h,Fc as N,Gb as f,Kc as V,Qb as b,Rb as a,Sb as C,Ta as m,Tb as x,Wb as R,Xb as D,Yb as w,ac as E,cb as y,cc as T,dc as I,hb as l,ja as M,ob as s,qa as _,ra as v,xb as n,yb as i,zb as S}from"./chunk-KAD4X6AH.js";var Le=e=>["/reservations",e],be=e=>["/reservations/edit",e];function Te(e,t){e&1&&(n(0,"button",32)(1,"mat-icon",18),a(2,"add"),i(),a(3," Add Reservation "),i())}function Ie(e,t){e&1&&(n(0,"th",33),a(1,"Customer"),i())}function ke(e,t){if(e&1&&(n(0,"td",34),a(1),i()),e&2){let o=t.$implicit;m(),C(o.customer.name)}}function Ne(e,t){e&1&&(n(0,"th",33),a(1,"Date"),i())}function Ve(e,t){if(e&1&&(n(0,"td",34),a(1),i()),e&2){let o=t.$implicit,r=f();m(),C(r.formatDate(o.reservationDate))}}function Fe(e,t){e&1&&(n(0,"th",33),a(1,"Time"),i())}function Pe(e,t){if(e&1&&(n(0,"td",34),a(1),i()),e&2){let o=t.$implicit,r=f();m(),C(r.formatTime(o.reservationDate))}}function Oe(e,t){e&1&&(n(0,"th",33),a(1,"Party Size"),i())}function Ae(e,t){if(e&1&&(n(0,"td",34),a(1),i()),e&2){let o=t.$implicit;m(),C(o.partySize)}}function Be(e,t){e&1&&(n(0,"th",33),a(1,"Table"),i())}function He(e,t){if(e&1&&(n(0,"td",34),a(1),i()),e&2){let o=t.$implicit,r=f();m(),x(" ",r.getTableInfo(o)," ")}}function We(e,t){e&1&&(n(0,"th",33),a(1,"Status"),i())}function ze(e,t){if(e&1&&(n(0,"td",34)(1,"mat-chip",35),a(2),T(3,"titlecase"),i()()),e&2){let o=t.$implicit,r=f();m(),s("color",r.getStatusColor(o.status)),m(),x(" ",I(3,2,o.status)," ")}}function $e(e,t){e&1&&(n(0,"th",33),a(1,"Actions"),i())}function je(e,t){if(e&1&&(n(0,"a",38)(1,"mat-icon",18),a(2,"edit"),i()()),e&2){let o=f().$implicit;s("routerLink",E(1,be,o._id))}}function Ue(e,t){if(e&1&&(n(0,"td",34)(1,"a",36)(2,"mat-icon",18),a(3,"visibility"),i()(),l(4,je,3,3,"a",37),i()),e&2){let o=t.$implicit,r=f();m(),s("routerLink",E(2,Le,o._id)),m(3),s("ngIf",r.canManageReservations())}}function qe(e,t){e&1&&S(0,"tr",39)}function Ge(e,t){e&1&&S(0,"tr",40)}function Je(e,t){e&1&&(n(0,"tr",41)(1,"td",42),a(2," No reservations found "),i()())}var ye=class e{reservationService=M(Ee);authService=M(P);snackBar=M(ie);reservations=[];displayedColumns=["customerName","date","time","partySize","table","status","actions"];isLoading=!0;selectedDate=new Date;selectedStatus="";ngOnInit(){this.loadReservations()}loadReservations(){this.isLoading=!0;let t=this.selectedDate?we(this.selectedDate,"yyyy-MM-dd"):void 0;this.reservationService.getReservations(t,this.selectedStatus||void 0).subscribe({next:o=>{this.reservations=o.data.reservations,this.isLoading=!1},error:o=>{console.error("Error loading reservations:",o),this.snackBar.open(o.error?.message||"Failed to load reservations","Close",{duration:5e3}),this.isLoading=!1}})}resetFilters(){this.selectedDate=new Date,this.selectedStatus="",this.loadReservations()}formatDate(t){return new Date(t).toLocaleDateString()}formatTime(t){return new Date(t).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}getTableInfo(t){return t.table?typeof t.table=="string"?"Assigned":t.table.tableNumber||"Assigned":"Not assigned"}getStatusColor(t){switch(t){case"confirmed":return"primary";case"seated":return"accent";case"completed":return"";case"pending":return"warn";case"cancelled":return"";case"no-show":return"";default:return""}}canManageReservations(){let t=this.authService.getCurrentUser();return t?.role==="manager"||t?.role==="staff"}static \u0275fac=function(o){return new(o||e)};static \u0275cmp=y({type:e,selectors:[["app-reservation-list"]],decls:62,vars:8,consts:[["picker",""],[1,"container"],[1,"header-actions"],[1,"header-title"],["mat-raised-button","","color","primary","routerLink","/reservations/create",4,"ngIf"],[1,"filter-container"],["appearance","outline"],["matInput","",3,"ngModelChange","dateChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],[3,"ngModelChange","selectionChange","ngModel"],[3,"value"],["value","pending"],["value","confirmed"],["value","seated"],["value","completed"],["value","cancelled"],["value","no-show"],["mat-button","","color","primary",3,"click"],[1,"material-symbols-outlined"],["mat-table","",1,"reservation-table",3,"dataSource"],["matColumnDef","customerName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","date"],["matColumnDef","time"],["matColumnDef","partySize"],["matColumnDef","table"],["matColumnDef","status"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-raised-button","","color","primary","routerLink","/reservations/create"],["mat-header-cell",""],["mat-cell",""],["selected","",3,"color"],["mat-icon-button","","color","primary","matTooltip","View Details",3,"routerLink"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink",4,"ngIf"],["mat-icon-button","","color","accent","matTooltip","Edit",3,"routerLink"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","7",1,"mat-cell",2,"text-align","center","padding","16px"]],template:function(o,r){if(o&1){let d=L();n(0,"div",1)(1,"div",2)(2,"span",3),a(3,"Reservation Management"),i(),l(4,Te,4,0,"button",4),i(),n(5,"mat-card")(6,"mat-card-content")(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),a(10,"Date"),i(),n(11,"input",7),w("ngModelChange",function(u){return _(d),D(r.selectedDate,u)||(r.selectedDate=u),v(u)}),h("dateChange",function(){return _(d),v(r.loadReservations())}),i(),S(12,"mat-datepicker-toggle",8)(13,"mat-datepicker",null,0),i(),n(15,"mat-form-field",6)(16,"mat-label"),a(17,"Status"),i(),n(18,"mat-select",9),w("ngModelChange",function(u){return _(d),D(r.selectedStatus,u)||(r.selectedStatus=u),v(u)}),h("selectionChange",function(){return _(d),v(r.loadReservations())}),n(19,"mat-option",10),a(20,"All"),i(),n(21,"mat-option",11),a(22,"Pending"),i(),n(23,"mat-option",12),a(24,"Confirmed"),i(),n(25,"mat-option",13),a(26,"Seated"),i(),n(27,"mat-option",14),a(28,"Completed"),i(),n(29,"mat-option",15),a(30,"Cancelled"),i(),n(31,"mat-option",16),a(32,"No-show"),i()()(),n(33,"button",17),h("click",function(){return _(d),v(r.resetFilters())}),n(34,"mat-icon",18),a(35,"refresh"),i(),a(36," Reset "),i()(),n(37,"table",19),c(38,20),l(39,Ie,2,0,"th",21)(40,ke,2,1,"td",22),p(),c(41,23),l(42,Ne,2,0,"th",21)(43,Ve,2,1,"td",22),p(),c(44,24),l(45,Fe,2,0,"th",21)(46,Pe,2,1,"td",22),p(),c(47,25),l(48,Oe,2,0,"th",21)(49,Ae,2,1,"td",22),p(),c(50,26),l(51,Be,2,0,"th",21)(52,He,2,1,"td",22),p(),c(53,27),l(54,We,2,0,"th",21)(55,ze,4,4,"td",22),p(),c(56,28),l(57,$e,2,0,"th",21)(58,Ue,5,4,"td",22),p(),l(59,qe,1,0,"tr",29)(60,Ge,1,0,"tr",30)(61,Je,3,0,"tr",31),i()()()()}if(o&2){let d=b(14);m(4),s("ngIf",r.canManageReservations()),m(7),s("matDatepicker",d),R("ngModel",r.selectedDate),m(),s("for",d),m(6),R("ngModel",r.selectedStatus),m(19),s("dataSource",r.reservations),m(22),s("matHeaderRowDef",r.displayedColumns),m(),s("matRowDefColumns",r.displayedColumns)}},dependencies:[V,k,N,F,$,H,W,z,j,xe,ce,ue,Ce,fe,pe,ge,_e,ve,Me,Se,he,Z,Y,X,te,ee,B,O,A,De,Re,se,re,me,le,de,J,G,U,q,Q,K,oe,ae,ne],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.filter-container[_ngcontent-%COMP%]{display:flex;gap:16px;margin-bottom:20px;flex-wrap:wrap;align-items:center}.reservation-table[_ngcontent-%COMP%]{width:100%}.mat-column-actions[_ngcontent-%COMP%]{width:120px}"]})};export{ye as ReservationListComponent};
