import{a as z}from"./chunk-VGCZC7P3.js";import"./chunk-TDINK5PU.js";import{a as j,b as R}from"./chunk-L2OVOT2R.js";import{b as V,d as $,g as q}from"./chunk-54ULQ5WC.js";import"./chunk-H5SIC52C.js";import"./chunk-3Z3MOL6J.js";import{a as B,c as L,h as P}from"./chunk-QTDDUBQI.js";import{a as F,b as N}from"./chunk-SWI6467K.js";import"./chunk-PTRNPYW6.js";import{a as U}from"./chunk-URY737FD.js";import"./chunk-NZ7PJTNX.js";import"./chunk-75BXHIVP.js";import{a as k}from"./chunk-5XSEBNVB.js";import"./chunk-4MJ6IACY.js";import{q as T,u as A}from"./chunk-FE5XWYP3.js";import"./chunk-GTI6TFUP.js";import{a as D,c as w,d as O}from"./chunk-VSTSZJ55.js";import{Bc as b,Cc as M,Db as C,Fb as x,Gb as p,Gc as S,Kc as E,Rb as a,Sb as d,Ta as r,Ub as h,ac as I,cb as _,cc as u,ec as f,hb as m,ja as l,ob as c,qa as y,ra as v,xb as n,yb as i,zb as s}from"./chunk-KAD4X6AH.js";var J=t=>["/dashboard/categories/edit",t];function K(t,o){if(t&1&&(n(0,"button",14)(1,"mat-icon",7),a(2,"edit"),i(),a(3," Edit "),i()),t&2){let e=p(2);c("routerLink",I(1,J,e.category._id))}}function Q(t,o){if(t&1){let e=C();n(0,"button",15),x("click",function(){y(e);let H=p(2);return v(H.confirmDelete())}),n(1,"mat-icon",7),a(2,"delete"),i(),a(3," Delete "),i()}}function W(t,o){if(t&1&&(n(0,"div",12)(1,"h3"),a(2,"Description"),i(),n(3,"p"),a(4),i()()),t&2){let e=p(2);r(4),d(e.category.description)}}function X(t,o){t&1&&s(0,"mat-divider")}function Y(t,o){if(t&1&&(n(0,"mat-chip"),a(1),i()),t&2){let e=o.$implicit;r(),d(e.name)}}function Z(t,o){if(t&1&&(n(0,"div",16)(1,"mat-chip-set"),m(2,Y,2,1,"mat-chip",17),i()()),t&2){let e=p(2);r(2),c("ngForOf",e.category.menus)}}function ee(t,o){t&1&&(n(0,"p"),a(1,"No menus assigned"),i())}function te(t,o){if(t&1&&(n(0,"div",2)(1,"div",3)(2,"span",4),a(3),i(),n(4,"div",5)(5,"button",6)(6,"mat-icon",7),a(7,"arrow_back"),i(),a(8," Back to List "),i(),m(9,K,4,3,"button",8)(10,Q,4,0,"button",9),i()(),n(11,"mat-card")(12,"mat-card-content"),m(13,W,5,1,"div",10)(14,X,1,0,"mat-divider",11),n(15,"div",12)(16,"h3"),a(17,"Order"),i(),n(18,"p"),a(19),i()(),s(20,"mat-divider"),n(21,"div",12)(22,"h3"),a(23,"Menus"),i(),m(24,Z,3,1,"div",13)(25,ee,2,0,"p",11),i(),s(26,"mat-divider"),n(27,"div",12)(28,"h3"),a(29,"Created By"),i(),n(30,"p"),a(31),i()(),s(32,"mat-divider"),n(33,"div",12)(34,"h3"),a(35,"Created At"),i(),n(36,"p"),a(37),u(38,"date"),i()(),s(39,"mat-divider"),n(40,"div",12)(41,"h3"),a(42,"Updated At"),i(),n(43,"p"),a(44),u(45,"date"),i()()()()()),t&2){let e=p();r(3),d(e.category.name),r(6),c("ngIf",e.canUpdate()),r(),c("ngIf",e.canDelete()),r(3),c("ngIf",e.category.description),r(),c("ngIf",e.category.description),r(5),d(e.category.order),r(5),c("ngIf",e.category.menus&&e.category.menus.length>0),r(),c("ngIf",!e.category.menus||e.category.menus.length===0),r(6),h("",e.category.createdBy==null?null:e.category.createdBy.firstName," ",e.category.createdBy==null?null:e.category.createdBy.lastName,""),r(6),d(f(38,12,e.category.createdAt,"medium")),r(7),d(f(45,15,e.category.updatedAt,"medium"))}}function ie(t,o){t&1&&(n(0,"div",18)(1,"p"),a(2,"Loading category details..."),i()())}var G=class t{route=l(D);router=l(w);categoryService=l(z);authService=l(k);snackBar=l(U);category=null;isLoading=!0;categoryId="";ngOnInit(){this.categoryId=this.route.snapshot.params.id,this.categoryId?this.loadCategory():this.router.navigate(["/dashboard/categories"])}loadCategory(){this.isLoading=!0,this.categoryService.getCategoryById(this.categoryId).subscribe({next:o=>{this.category=o.data.category,this.isLoading=!1},error:o=>{this.snackBar.open(o.error?.message||"Failed to load category","Close",{duration:5e3}),this.isLoading=!1,this.router.navigate(["/dashboard/categories"])}})}canUpdate(){let o=this.authService.getCurrentUser();return o?.role==="manager"||o?.role==="staff"}canDelete(){return this.authService.getCurrentUser()?.role==="manager"}confirmDelete(){confirm(`Are you sure you want to delete "${this.category?.name}"?`)&&this.deleteCategory()}deleteCategory(){this.categoryService.deleteCategory(this.categoryId).subscribe({next:()=>{this.snackBar.open("Category deleted successfully","Close",{duration:3e3}),this.router.navigate(["/dashboard/categories"])},error:o=>{this.snackBar.open(o.error?.message||"Error deleting category","Close",{duration:5e3})}})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=_({type:t,selectors:[["app-category-detail"]],decls:2,vars:2,consts:[["class","container",4,"ngIf"],["class","loading-container",4,"ngIf"],[1,"container"],[1,"header-actions"],[1,"top-label"],[1,"action-buttons"],["mat-button","","color","primary","routerLink","/dashboard/categories"],[1,"material-symbols-outlined"],["mat-raised-button","","color","accent",3,"routerLink",4,"ngIf"],["mat-raised-button","","color","warn",3,"click",4,"ngIf"],["class","info-row",4,"ngIf"],[4,"ngIf"],[1,"info-row"],["class","menu-chips",4,"ngIf"],["mat-raised-button","","color","accent",3,"routerLink"],["mat-raised-button","","color","warn",3,"click"],[1,"menu-chips"],[4,"ngFor","ngForOf"],[1,"loading-container"]],template:function(e,g){e&1&&m(0,te,46,18,"div",0)(1,ie,3,0,"div",1),e&2&&(c("ngIf",g.category),r(),c("ngIf",g.isLoading))},dependencies:[E,b,M,S,O,P,B,L,A,T,N,F,R,j,q,V,$],styles:[".container[_ngcontent-%COMP%]{width:100%}.header-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}.action-buttons[_ngcontent-%COMP%]{display:flex;gap:10px}.info-row[_ngcontent-%COMP%]{padding:16px 0}.info-row[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-weight:500;color:#666}.info-row[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}.menu-chips[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:8px}.loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;padding:40px}"]})};export{G as CategoryDetailComponent};
