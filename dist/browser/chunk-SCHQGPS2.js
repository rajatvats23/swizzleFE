import{a as X,c as tt,j as it}from"./chunk-2IC4WW56.js";import{b as nt}from"./chunk-BG7U6ADF.js";import{a as W,b as Z}from"./chunk-EQG5LASX.js";import{j as Y,k as D,l as B,m as $,n as q}from"./chunk-7I5HP2IS.js";import{Ab as J,Ma as T,Oa as u,Qa as O,Ra as V,Va as I,Xa as L,Ya as N,_a as et,ab as R,o as k,ob as G,pb as z,sb as K,wb as A,xb as j,zb as H}from"./chunk-3TWZPHHR.js";import{Cb as E,Db as f,Ga as h,Ib as d,Mb as o,Nb as a,Ob as g,Sb as P,Xb as p,Zb as m,d as b,db as s,fa as w,hc as r,ic as F,jc as v,pa as _,pb as S,qa as C,rb as U,ta as y,tb as M,wb as c}from"./chunk-K3BUIVDM.js";var x=class e{fb=w(et);authService=w(it);router=w(tt);route=w(X);snackBar=w(nt);submitting=h(!1);hidePassword=h(!0);hideConfirmPassword=h(!0);handleError(i,t){let n=i instanceof Error?i.message:t;this.snackBar.open(n,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"})}navigateToLogin(){this.router.navigate(["/auth/login"])}navigateToForgotPassword(){this.router.navigate(["/auth/forgot-password"])}togglePasswordVisibility(){this.hidePassword.update(i=>!i)}toggleConfirmPasswordVisibility(){this.hideConfirmPassword.update(i=>!i)}passwordMatchValidator(i){let t=i.get("password"),n=i.get("confirmPassword");return t&&n&&t.value!==n.value&&!n.hasError("required")?(n.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):null}strongPasswordPattern="^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)[a-zA-Z\\d]{8,}$";static \u0275fac=function(t){return new(t||e)};static \u0275dir=U({type:e})};function lt(e,i){e&1&&r(0," Email is required ")}function dt(e,i){e&1&&r(0," Please enter a valid email address ")}function mt(e,i){if(e&1&&(o(0,"mat-error"),c(1,lt,1,0)(2,dt,1,0),a()),e&2){let t=m();s(),d(t.emailControl.hasError("required")?1:t.emailControl.hasError("email")?2:-1)}}function ct(e,i){e&1&&r(0," Password is required ")}function pt(e,i){e&1&&r(0," Password must be at least 6 characters ")}function ut(e,i){if(e&1&&(o(0,"mat-error"),c(1,ct,1,0)(2,pt,1,0),a()),e&2){let t=m();s(),d(t.passwordControl.hasError("required")?1:t.passwordControl.hasError("minlength")?2:-1)}}function ft(e,i){e&1&&g(0,"mat-spinner",13)}function gt(e,i){e&1&&r(0," Email is required ")}function _t(e,i){e&1&&r(0," Please enter a valid email address ")}function Ct(e,i){if(e&1&&(o(0,"mat-error"),c(1,gt,1,0)(2,_t,1,0),a()),e&2){let t=m(2);s(),d(t.emailControl.hasError("required")?1:t.emailControl.hasError("email")?2:-1)}}function ht(e,i){e&1&&g(0,"mat-spinner",12)}function wt(e,i){if(e&1){let t=P();o(0,"div",2)(1,"h1",3),r(2,"Forgot Password"),a(),o(3,"p",4),r(4," Enter the email address associated with your account "),a()(),o(5,"form",5),p("ngSubmit",function(){_(t);let l=m();return C(l.onSubmit())}),o(6,"div",6)(7,"mat-form-field",7)(8,"mat-label"),r(9,"Email Address"),a(),g(10,"input",8),c(11,Ct,3,1,"mat-error"),a()(),o(12,"div",9)(13,"button",10)(14,"span",11),c(15,ht,1,0,"mat-spinner",12),r(16),a()()()(),o(17,"div",13)(18,"a",14),p("click",function(){_(t);let l=m();return C(l.navigateToLogin())}),r(19,"Back to Login"),a()()}if(e&2){let t=m();s(5),f("formGroup",t.forgotPasswordForm),s(6),d(t.emailControl.invalid&&(t.emailControl.dirty||t.emailControl.touched)?11:-1),s(2),f("disabled",t.forgotPasswordForm.invalid||t.submitting()),s(2),d(t.submitting()?15:-1),s(),v(" ",t.submitting()?"Sending...":"Reset Password"," ")}}function xt(e,i){if(e&1){let t=P();o(0,"div",1)(1,"div",2)(2,"h1",3),r(3,"Check your Email"),a(),o(4,"p",4),r(5," We have sent a password reset link to"),g(6,"br"),r(7),a()(),o(8,"div",9)(9,"button",15),p("click",function(){_(t);let l=m();return C(l.navigateToLogin())}),r(10," Back to Login "),a()(),o(11,"div",16),r(12," Didn't receive the email? "),o(13,"a",17),p("click",function(){_(t);let l=m();return C(l.resendEmail())}),r(14,"Click to resend"),a()()()}if(e&2){let t=m();s(7),v("",t.sentEmail()," ")}}var Q=".auth-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;padding:1rem 2rem}.auth-header[_ngcontent-%COMP%]{text-align:left;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-family:Josefin Sans,sans-serif;font-weight:500;font-size:24px;line-height:24px;letter-spacing:0%;margin-bottom:1rem}.auth-header[_ngcontent-%COMP%]   .title.primary[_ngcontent-%COMP%]{color:#333}.auth-header[_ngcontent-%COMP%]   .title.accent[_ngcontent-%COMP%]{color:#ff5630}.auth-header[_ngcontent-%COMP%]   .title.error[_ngcontent-%COMP%]{color:#d32f2f}.auth-header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-family:Josefin Sans,sans-serif;font-weight:400;font-size:16px;line-height:16px;letter-spacing:0%;color:#666;margin:0}.form-fields[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:20px;margin-bottom:24px}.form-fields[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.auth-actions[_ngcontent-%COMP%]{margin-bottom:16px}.auth-actions[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]{width:100%;height:53px;border-radius:4px;padding:10px 16px;background-color:#00a76f;color:#fff}.auth-actions[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-family:Josefin Sans,sans-serif;font-weight:500;font-size:14px;line-height:14px;letter-spacing:0%;text-align:center}.auth-actions[_ngcontent-%COMP%]   .auth-button[_ngcontent-%COMP%]:hover{background-color:#00896a}.auth-footer[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:1rem}.auth-footer.right-aligned[_ngcontent-%COMP%]{justify-content:flex-end}.auth-footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]{color:#666;font-size:14px;cursor:pointer;text-decoration:none}.auth-footer[_ngcontent-%COMP%]   .link[_ngcontent-%COMP%]:hover{text-decoration:underline}.auth-footer[_ngcontent-%COMP%]   .link.accent[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:500;font-size:16px;line-height:28px;letter-spacing:0%;color:#ff5630}.email-sent-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:center}.resend-link[_ngcontent-%COMP%]{margin-top:1.5rem;font-size:14px;color:#666}.resend-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#ff5630;cursor:pointer;text-decoration:none}.resend-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.spinner[_ngcontent-%COMP%]{margin-right:8px}.row-text[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}  .mdc-text-field--outlined{--mdc-outlined-text-field-container-height: 56px}  .mat-mdc-form-field-subscript-wrapper{height:18px}";function Pt(e,i){if(e&1){let t=P();o(0,"div",1)(1,"div",2)(2,"h1",3),r(3,"Invalid Reset Link"),a(),o(4,"p",4),r(5,"The password reset link is invalid or has expired."),a()(),o(6,"div",5)(7,"button",6),p("click",function(){_(t);let l=m();return C(l.navigateToLogin())}),r(8," Back to Login "),a()()()}}function vt(e,i){e&1&&r(0," Password is required ")}function bt(e,i){e&1&&r(0," Password must be at least 8 characters ")}function yt(e,i){e&1&&r(0," Password must include at least one uppercase letter, one lowercase letter, and one number ")}function St(e,i){if(e&1&&(o(0,"mat-error"),c(1,vt,1,0)(2,bt,1,0)(3,yt,1,0),a()),e&2){let t=m(2);s(),d(t.passwordControl.hasError("required")?1:t.passwordControl.hasError("minlength")?2:t.passwordControl.hasError("pattern")?3:-1)}}function Mt(e,i){e&1&&r(0," Confirm password is required ")}function Et(e,i){e&1&&r(0," Password must be at least 8 characters ")}function Ft(e,i){if(e&1&&(o(0,"mat-error"),c(1,Mt,1,0)(2,Et,1,0),a()),e&2){let t=m(2);s(),d(t.confirmPasswordControl.hasError("required")?1:t.confirmPasswordControl.hasError("minlength")?2:-1)}}function kt(e,i){e&1&&(o(0,"mat-error"),r(1," Passwords do not match "),a())}function Tt(e,i){e&1&&g(0,"mat-spinner",16)}function Ot(e,i){if(e&1){let t=P();o(0,"div",2)(1,"h1",7),r(2,"Set New Password"),a(),o(3,"p",4),r(4,"Type your new password below"),a()(),o(5,"form",8),p("ngSubmit",function(){_(t);let l=m();return C(l.onSubmit())}),o(6,"div",9)(7,"mat-form-field",10)(8,"mat-label"),r(9,"New Password"),a(),g(10,"input",11),o(11,"button",12),p("click",function(){_(t);let l=m();return C(l.togglePasswordVisibility())}),o(12,"mat-icon"),r(13),a()(),c(14,St,4,1,"mat-error"),a(),o(15,"mat-form-field",10)(16,"mat-label"),r(17,"Confirm Password"),a(),g(18,"input",13),o(19,"button",12),p("click",function(){_(t);let l=m();return C(l.toggleConfirmPasswordVisibility())}),o(20,"mat-icon"),r(21),a()(),c(22,Ft,3,1,"mat-error")(23,kt,2,0,"mat-error"),a()(),o(24,"div",5)(25,"button",14)(26,"span",15),c(27,Tt,1,0,"mat-spinner",16),r(28),a()()()()}if(e&2){let t=m();s(5),f("formGroup",t.resetPasswordForm),s(5),f("type",t.hidePassword()?"password":"text"),s(),E("aria-label","Hide password")("aria-pressed",t.hidePassword()),s(2),F(t.hidePassword()?"visibility_off":"visibility"),s(),d(t.passwordControl.invalid&&(t.passwordControl.dirty||t.passwordControl.touched)?14:-1),s(4),f("type",t.hideConfirmPassword()?"password":"text"),s(),E("aria-label","Hide password")("aria-pressed",t.hideConfirmPassword()),s(2),F(t.hideConfirmPassword()?"visibility_off":"visibility"),s(),d(t.confirmPasswordControl.invalid&&(t.confirmPasswordControl.dirty||t.confirmPasswordControl.touched)?22:-1),s(),d(t.resetPasswordForm.hasError("passwordMismatch")&&t.confirmPasswordControl.touched?23:-1),s(2),f("disabled",t.resetPasswordForm.invalid||t.submitting()),s(2),d(t.submitting()?27:-1),s(),v(" ",t.submitting()?"Resetting...":"Reset Password"," ")}}var ot=class e extends x{loginForm=this.fb.group({email:["",[u.required,u.email]],password:["",[u.required,u.minLength(6)]]});get emailControl(){return this.loginForm.get("email")}get passwordControl(){return this.loginForm.get("password")}onSubmit(){return b(this,null,function*(){if(!this.loginForm.invalid){this.submitting.set(!0);try{let{email:i,password:t}=this.loginForm.value;yield this.authService.login(i,t)}catch(i){this.handleError(i,"Login failed")}finally{this.submitting.set(!1)}}})}static \u0275fac=(()=>{let i;return function(n){return(i||(i=y(e)))(n||e)}})();static \u0275cmp=S({type:e,selectors:[["app-login"]],features:[M],decls:29,vars:10,consts:[[1,"auth-container"],[1,"auth-header"],[1,"title","primary"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-fields"],["appearance","outline"],["matInput","","formControlName","email","placeholder","name@example.com","type","email"],["matInput","","formControlName","password","placeholder","Enter your password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],[1,"auth-actions"],["mat-raised-button","","color","primary","type","submit",1,"auth-button",3,"disabled"],[1,"row-text"],["diameter","20",1,"spinner"],[1,"auth-footer","right-aligned"],[1,"link","accent",3,"click"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Welcome!"),a(),o(4,"p",3),r(5,"Sign in to Get Started"),a()(),o(6,"form",4),p("ngSubmit",function(){return n.onSubmit()}),o(7,"div",5)(8,"mat-form-field",6)(9,"mat-label"),r(10,"Enter Your Email"),a(),g(11,"input",7),c(12,mt,3,1,"mat-error"),a(),o(13,"mat-form-field",6)(14,"mat-label"),r(15,"Password"),a(),g(16,"input",8),o(17,"button",9),p("click",function(){return n.togglePasswordVisibility()}),o(18,"mat-icon"),r(19),a()(),c(20,ut,3,1,"mat-error"),a()(),o(21,"div",10)(22,"button",11)(23,"span",12),c(24,ft,1,0,"mat-spinner",13),r(25),a()()()(),o(26,"div",14)(27,"a",15),p("click",function(){return n.navigateToForgotPassword()}),r(28,"Forgot Password"),a()()()),t&2&&(s(6),f("formGroup",n.loginForm),s(6),d(n.emailControl.invalid&&(n.emailControl.dirty||n.emailControl.touched)?12:-1),s(4),f("type",n.hidePassword()?"password":"text"),s(),E("aria-label","Hide password")("aria-pressed",n.hidePassword()),s(2),F(n.hidePassword()?"visibility_off":"visibility"),s(),d(n.passwordControl.invalid&&(n.passwordControl.dirty||n.passwordControl.touched)?20:-1),s(2),f("disabled",n.loginForm.invalid||n.submitting()),s(2),d(n.submitting()?24:-1),s(),v(" ",n.submitting()?"Signing in...":"Sign in",""))},dependencies:[k,R,I,T,O,V,L,N,j,A,G,z,K,J,H,Z,W,q,B,$,D,Y],styles:[Q],changeDetection:0})},rt=class e extends x{forgotPasswordForm=this.fb.group({email:["",[u.required,u.email]]});emailSent=h(!1);sentEmail=h(null);get emailControl(){return this.forgotPasswordForm.get("email")}onSubmit(){return b(this,null,function*(){if(!this.forgotPasswordForm.invalid){this.submitting.set(!0);try{let{email:i}=this.forgotPasswordForm.value;yield this.authService.forgotPassword(i),this.sentEmail.set(i),this.emailSent.set(!0)}catch(i){this.handleError(i,"Failed to send reset email")}finally{this.submitting.set(!1)}}})}resendEmail(){this.sentEmail()&&(this.forgotPasswordForm.setValue({email:this.sentEmail()}),this.onSubmit())}static \u0275fac=(()=>{let i;return function(n){return(i||(i=y(e)))(n||e)}})();static \u0275cmp=S({type:e,selectors:[["app-forgot-password"]],features:[M],decls:3,vars:1,consts:[[1,"auth-container"],[1,"email-sent-container"],[1,"auth-header"],[1,"title","accent"],[1,"subtitle"],[3,"ngSubmit","formGroup"],[1,"form-fields"],["appearance","outline"],["matInput","","formControlName","email","placeholder","name@example.com","type","email"],[1,"auth-actions"],["mat-raised-button","","color","primary","type","submit",1,"auth-button",3,"disabled"],[1,"row-text"],["diameter","20",1,"spinner"],[1,"auth-footer"],[1,"link",3,"click"],["mat-raised-button","","color","primary",1,"auth-button",3,"click"],[1,"resend-link"],[3,"click"]],template:function(t,n){t&1&&(o(0,"div",0),c(1,wt,20,5)(2,xt,15,1,"div",1),a()),t&2&&(s(),d(n.emailSent()?2:1))},dependencies:[k,R,I,T,O,V,L,N,j,A,G,z,J,H,Z,W,q,B,D],styles:[Q],changeDetection:0})},at=class e extends x{resetPasswordForm=this.fb.group({password:["",[u.required,u.minLength(8),u.pattern(this.strongPasswordPattern)]],confirmPassword:["",[u.required,u.minLength(8)]]},{validators:this.passwordMatchValidator});token=h(null);invalidToken=h(!1);get passwordControl(){return this.resetPasswordForm.get("password")}get confirmPasswordControl(){return this.resetPasswordForm.get("confirmPassword")}ngOnInit(){this.route.queryParams.subscribe(i=>{i.token?this.token.set(i.token):(this.invalidToken.set(!0),this.snackBar.open("Invalid or missing reset token","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}))})}onSubmit(){return b(this,null,function*(){if(!this.resetPasswordForm.invalid){this.submitting.set(!0);try{let{password:i}=this.resetPasswordForm.value;if(!this.token())throw new Error("Missing reset token");yield this.authService.resetPassword(i,this.token()),this.snackBar.open("Password reset successfully","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"top"}),this.navigateToLogin()}catch(i){this.handleError(i,"Failed to reset password")}finally{this.submitting.set(!1)}}})}static \u0275fac=(()=>{let i;return function(n){return(i||(i=y(e)))(n||e)}})();static \u0275cmp=S({type:e,selectors:[["app-reset-password"]],features:[M],decls:3,vars:1,consts:[[1,"auth-container"],[1,"email-sent-container"],[1,"auth-header"],[1,"title","error"],[1,"subtitle"],[1,"auth-actions"],["mat-raised-button","","color","primary",1,"auth-button",3,"click"],[1,"title","primary"],[3,"ngSubmit","formGroup"],[1,"form-fields"],["appearance","outline"],["matInput","","formControlName","password","placeholder","Enter your new password",3,"type"],["type","button","mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","confirmPassword","placeholder","Confirm your new password",3,"type"],["mat-raised-button","","color","primary","type","submit",1,"auth-button",3,"disabled"],[1,"row-text"],["diameter","20",1,"spinner"]],template:function(t,n){t&1&&(o(0,"div",0),c(1,Pt,9,0,"div",1)(2,Ot,29,15),a()),t&2&&(s(),d(n.invalidToken()?1:2))},dependencies:[k,R,I,T,O,V,L,N,j,A,G,z,K,J,H,Z,W,q,B,$,D,Y],styles:[Q],changeDetection:0})};export{rt as ForgotPasswordComponent,ot as LoginComponent,at as ResetPasswordComponent};
